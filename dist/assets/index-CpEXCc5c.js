(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function uE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ly={exports:{}},hc={},Fy={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fs=Symbol.for("react.element"),lE=Symbol.for("react.portal"),cE=Symbol.for("react.fragment"),fE=Symbol.for("react.strict_mode"),hE=Symbol.for("react.profiler"),dE=Symbol.for("react.provider"),pE=Symbol.for("react.context"),vE=Symbol.for("react.forward_ref"),gE=Symbol.for("react.suspense"),yE=Symbol.for("react.memo"),mE=Symbol.for("react.lazy"),Np=Symbol.iterator;function _E(t){return t===null||typeof t!="object"?null:(t=Np&&t[Np]||t["@@iterator"],typeof t=="function"?t:null)}var By={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vy=Object.assign,Uy={};function ra(t,e,r){this.props=t,this.context=e,this.refs=Uy,this.updater=r||By}ra.prototype.isReactComponent={};ra.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ra.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jy(){}jy.prototype=ra.prototype;function Ud(t,e,r){this.props=t,this.context=e,this.refs=Uy,this.updater=r||By}var jd=Ud.prototype=new jy;jd.constructor=Ud;Vy(jd,ra.prototype);jd.isPureReactComponent=!0;var bp=Array.isArray,zy=Object.prototype.hasOwnProperty,zd={current:null},Hy={key:!0,ref:!0,__self:!0,__source:!0};function Wy(t,e,r){var n,i={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)zy.call(e,n)&&!Hy.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Fs,type:t,key:o,ref:a,props:i,_owner:zd.current}}function wE(t,e){return{$$typeof:Fs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fs}function xE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var kp=/\/+/g;function _f(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xE(""+t.key):e.toString(36)}function qu(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Fs:case lE:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+_f(a,0):n,bp(i)?(r="",t!=null&&(r=t.replace(kp,"$&/")+"/"),qu(i,e,r,"",function(l){return l})):i!=null&&(Hd(i)&&(i=wE(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(kp,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",bp(t))for(var s=0;s<t.length;s++){o=t[s];var u=n+_f(o,s);a+=qu(o,e,r,u,i)}else if(u=_E(t),typeof u=="function")for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=n+_f(o,s++),a+=qu(o,e,r,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Eu(t,e,r){if(t==null)return t;var n=[],i=0;return qu(t,n,"","",function(o){return e.call(r,o,i++)}),n}function EE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},Yu={transition:null},AE={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:Yu,ReactCurrentOwner:zd};function Gy(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Eu,forEach:function(t,e,r){Eu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Eu(t,function(){e++}),e},toArray:function(t){return Eu(t,function(e){return e})||[]},only:function(t){if(!Hd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=ra;ce.Fragment=cE;ce.Profiler=hE;ce.PureComponent=Ud;ce.StrictMode=fE;ce.Suspense=gE;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AE;ce.act=Gy;ce.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Vy({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=zd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)zy.call(e,u)&&!Hy.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];n.children=s}return{$$typeof:Fs,type:t.type,key:i,ref:o,props:n,_owner:a}};ce.createContext=function(t){return t={$$typeof:pE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dE,_context:t},t.Consumer=t};ce.createElement=Wy;ce.createFactory=function(t){var e=Wy.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:vE,render:t}};ce.isValidElement=Hd;ce.lazy=function(t){return{$$typeof:mE,_payload:{_status:-1,_result:t},_init:EE}};ce.memo=function(t,e){return{$$typeof:yE,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Yu.transition;Yu.transition={};try{t()}finally{Yu.transition=e}};ce.unstable_act=Gy;ce.useCallback=function(t,e){return Zt.current.useCallback(t,e)};ce.useContext=function(t){return Zt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Zt.current.useEffect(t,e)};ce.useId=function(){return Zt.current.useId()};ce.useImperativeHandle=function(t,e,r){return Zt.current.useImperativeHandle(t,e,r)};ce.useInsertionEffect=function(t,e){return Zt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Zt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Zt.current.useMemo(t,e)};ce.useReducer=function(t,e,r){return Zt.current.useReducer(t,e,r)};ce.useRef=function(t){return Zt.current.useRef(t)};ce.useState=function(t){return Zt.current.useState(t)};ce.useSyncExternalStore=function(t,e,r){return Zt.current.useSyncExternalStore(t,e,r)};ce.useTransition=function(){return Zt.current.useTransition()};ce.version="18.3.1";Fy.exports=ce;var ie=Fy.exports;const IE=uE(ie);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE=ie,SE=Symbol.for("react.element"),TE=Symbol.for("react.fragment"),RE=Object.prototype.hasOwnProperty,OE=CE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PE={key:!0,ref:!0,__self:!0,__source:!0};function $y(t,e,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)RE.call(e,n)&&!PE.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:SE,type:t,key:o,ref:a,props:i,_owner:OE.current}}hc.Fragment=TE;hc.jsx=$y;hc.jsxs=$y;Ly.exports=hc;var b=Ly.exports,hh={},Xy={exports:{}},gr={},Ky={exports:{}},qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,re){var oe=$.length;$.push(re);e:for(;0<oe;){var X=oe-1>>>1,he=$[X];if(0<i(he,re))$[X]=re,$[oe]=he,oe=X;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var re=$[0],oe=$.pop();if(oe!==re){$[0]=oe;e:for(var X=0,he=$.length,Oe=he>>>1;X<Oe;){var er=2*(X+1)-1,_r=$[er],on=er+1,an=$[on];if(0>i(_r,oe))on<he&&0>i(an,_r)?($[X]=an,$[on]=oe,X=on):($[X]=_r,$[er]=oe,X=er);else if(on<he&&0>i(an,oe))$[X]=an,$[on]=oe,X=on;else break e}}return re}function i($,re){var oe=$.sortIndex-re.sortIndex;return oe!==0?oe:$.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var u=[],l=[],f=1,h=null,d=3,p=!1,g=!1,w=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var re=r(l);re!==null;){if(re.callback===null)n(l);else if(re.startTime<=$)n(l),re.sortIndex=re.expirationTime,e(u,re);else break;re=r(l)}}function P($){if(w=!1,x($),!g)if(r(u)!==null)g=!0,mr(k);else{var re=r(l);re!==null&&Wt(P,re.startTime-$)}}function k($,re){g=!1,w&&(w=!1,_(E),E=-1),p=!0;var oe=d;try{for(x(re),h=r(u);h!==null&&(!(h.expirationTime>re)||$&&!D());){var X=h.callback;if(typeof X=="function"){h.callback=null,d=h.priorityLevel;var he=X(h.expirationTime<=re);re=t.unstable_now(),typeof he=="function"?h.callback=he:h===r(u)&&n(u),x(re)}else n(u);h=r(u)}if(h!==null)var Oe=!0;else{var er=r(l);er!==null&&Wt(P,er.startTime-re),Oe=!1}return Oe}finally{h=null,d=oe,p=!1}}var M=!1,A=null,E=-1,S=5,R=-1;function D(){return!(t.unstable_now()-R<S)}function N(){if(A!==null){var $=t.unstable_now();R=$;var re=!0;try{re=A(!0,$)}finally{re?O():(M=!1,A=null)}}else M=!1}var O;if(typeof m=="function")O=function(){m(N)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Ue=fe.port2;fe.port1.onmessage=N,O=function(){Ue.postMessage(null)}}else O=function(){I(N,0)};function mr($){A=$,M||(M=!0,O())}function Wt($,re){E=I(function(){$(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,mr(k))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function($){switch(d){case 1:case 2:case 3:var re=3;break;default:re=d}var oe=d;d=re;try{return $()}finally{d=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,re){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var oe=d;d=$;try{return re()}finally{d=oe}},t.unstable_scheduleCallback=function($,re,oe){var X=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?X+oe:X):oe=X,$){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=oe+he,$={id:f++,callback:re,priorityLevel:$,startTime:oe,expirationTime:he,sortIndex:-1},oe>X?($.sortIndex=oe,e(l,$),r(u)===null&&$===r(l)&&(w?(_(E),E=-1):w=!0,Wt(P,oe-X))):($.sortIndex=he,e(u,$),g||p||(g=!0,mr(k))),$},t.unstable_shouldYield=D,t.unstable_wrapCallback=function($){var re=d;return function(){var oe=d;d=re;try{return $.apply(this,arguments)}finally{d=oe}}}})(qy);Ky.exports=qy;var DE=Ky.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE=ie,vr=DE;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yy=new Set,fs={};function Qi(t,e){Uo(t,e),Uo(t+"Capture",e)}function Uo(t,e){for(fs[t]=e,t=0;t<e.length;t++)Yy.add(e[t])}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dh=Object.prototype.hasOwnProperty,bE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mp={},Lp={};function kE(t){return dh.call(Lp,t)?!0:dh.call(Mp,t)?!1:bE.test(t)?Lp[t]=!0:(Mp[t]=!0,!1)}function ME(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function LE(t,e,r,n){if(e===null||typeof e>"u"||ME(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jt(t,e,r,n,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wd=/[\-:]([a-z])/g;function Gd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wd,Gd);Rt[e]=new Jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wd,Gd);Rt[e]=new Jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wd,Gd);Rt[e]=new Jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function $d(t,e,r,n){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LE(e,r,i,n)&&(r=null),n||i===null?kE(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Tn=NE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Au=Symbol.for("react.element"),fo=Symbol.for("react.portal"),ho=Symbol.for("react.fragment"),Xd=Symbol.for("react.strict_mode"),ph=Symbol.for("react.profiler"),Qy=Symbol.for("react.provider"),Zy=Symbol.for("react.context"),Kd=Symbol.for("react.forward_ref"),vh=Symbol.for("react.suspense"),gh=Symbol.for("react.suspense_list"),qd=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),Jy=Symbol.for("react.offscreen"),Fp=Symbol.iterator;function Sa(t){return t===null||typeof t!="object"?null:(t=Fp&&t[Fp]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,wf;function Ba(t){if(wf===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);wf=e&&e[1]||""}return`
`+wf+t}var xf=!1;function Ef(t,e){if(!t||xf)return"";xf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=s);break}}}finally{xf=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ba(t):""}function FE(t){switch(t.tag){case 5:return Ba(t.type);case 16:return Ba("Lazy");case 13:return Ba("Suspense");case 19:return Ba("SuspenseList");case 0:case 2:case 15:return t=Ef(t.type,!1),t;case 11:return t=Ef(t.type.render,!1),t;case 1:return t=Ef(t.type,!0),t;default:return""}}function yh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ho:return"Fragment";case fo:return"Portal";case ph:return"Profiler";case Xd:return"StrictMode";case vh:return"Suspense";case gh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zy:return(t.displayName||"Context")+".Consumer";case Qy:return(t._context.displayName||"Context")+".Provider";case Kd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qd:return e=t.displayName||null,e!==null?e:yh(t.type)||"Memo";case Ln:e=t._payload,t=t._init;try{return yh(t(e))}catch{}}return null}function BE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yh(e);case 8:return e===Xd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function em(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VE(t){var e=em(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Iu(t){t._valueTracker||(t._valueTracker=VE(t))}function tm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=em(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function _l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mh(t,e){var r=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Bp(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=li(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rm(t,e){e=e.checked,e!=null&&$d(t,"checked",e,!1)}function _h(t,e){rm(t,e);var r=li(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wh(t,e.type,r):e.hasOwnProperty("defaultValue")&&wh(t,e.type,li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vp(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function wh(t,e,r){(e!=="number"||_l(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Va=Array.isArray;function Oo(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+li(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Up(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(H(92));if(Va(r)){if(1<r.length)throw Error(H(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:li(r)}}function nm(t,e){var r=li(e.value),n=li(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function jp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function im(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?im(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cu,om=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cu=Cu||document.createElement("div"),Cu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hs(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Qa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UE=["Webkit","ms","Moz","O"];Object.keys(Qa).forEach(function(t){UE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qa[e]=Qa[t]})});function am(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Qa.hasOwnProperty(t)&&Qa[t]?(""+e).trim():e+"px"}function sm(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=am(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var jE=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ah(t,e){if(e){if(jE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Ih(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ch=null;function Yd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sh=null,Po=null,Do=null;function zp(t){if(t=Us(t)){if(typeof Sh!="function")throw Error(H(280));var e=t.stateNode;e&&(e=yc(e),Sh(t.stateNode,t.type,e))}}function um(t){Po?Do?Do.push(t):Do=[t]:Po=t}function lm(){if(Po){var t=Po,e=Do;if(Do=Po=null,zp(t),e)for(t=0;t<e.length;t++)zp(e[t])}}function cm(t,e){return t(e)}function fm(){}var Af=!1;function hm(t,e,r){if(Af)return t(e,r);Af=!0;try{return cm(t,e,r)}finally{Af=!1,(Po!==null||Do!==null)&&(fm(),lm())}}function ds(t,e){var r=t.stateNode;if(r===null)return null;var n=yc(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(H(231,e,typeof r));return r}var Th=!1;if(_n)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){Th=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{Th=!1}function zE(t,e,r,n,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(f){this.onError(f)}}var Za=!1,wl=null,xl=!1,Rh=null,HE={onError:function(t){Za=!0,wl=t}};function WE(t,e,r,n,i,o,a,s,u){Za=!1,wl=null,zE.apply(HE,arguments)}function GE(t,e,r,n,i,o,a,s,u){if(WE.apply(this,arguments),Za){if(Za){var l=wl;Za=!1,wl=null}else throw Error(H(198));xl||(xl=!0,Rh=l)}}function Zi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function dm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hp(t){if(Zi(t)!==t)throw Error(H(188))}function $E(t){var e=t.alternate;if(!e){if(e=Zi(t),e===null)throw Error(H(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Hp(i),t;if(o===n)return Hp(i),e;o=o.sibling}throw Error(H(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?t:e}function pm(t){return t=$E(t),t!==null?vm(t):null}function vm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vm(t);if(e!==null)return e;t=t.sibling}return null}var gm=vr.unstable_scheduleCallback,Wp=vr.unstable_cancelCallback,XE=vr.unstable_shouldYield,KE=vr.unstable_requestPaint,Je=vr.unstable_now,qE=vr.unstable_getCurrentPriorityLevel,Qd=vr.unstable_ImmediatePriority,ym=vr.unstable_UserBlockingPriority,El=vr.unstable_NormalPriority,YE=vr.unstable_LowPriority,mm=vr.unstable_IdlePriority,dc=null,Kr=null;function QE(t){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(dc,t,void 0,(t.current.flags&128)===128)}catch{}}var Vr=Math.clz32?Math.clz32:eA,ZE=Math.log,JE=Math.LN2;function eA(t){return t>>>=0,t===0?32:31-(ZE(t)/JE|0)|0}var Su=64,Tu=4194304;function Ua(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Al(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=Ua(s):(o&=a,o!==0&&(n=Ua(o)))}else a=r&~i,a!==0?n=Ua(a):o!==0&&(n=Ua(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Vr(e),i=1<<r,n|=t[r],e&=~i;return n}function tA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rA(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Vr(o),s=1<<a,u=i[a];u===-1?(!(s&r)||s&n)&&(i[a]=tA(s,e)):u<=e&&(t.expiredLanes|=s),o&=~s}}function Oh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _m(){var t=Su;return Su<<=1,!(Su&4194240)&&(Su=64),t}function If(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Bs(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vr(e),t[e]=r}function nA(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Vr(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function Zd(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Vr(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Te=0;function wm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xm,Jd,Em,Am,Im,Ph=!1,Ru=[],qn=null,Yn=null,Qn=null,ps=new Map,vs=new Map,Vn=[],iA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gp(t,e){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":ps.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vs.delete(e.pointerId)}}function Ra(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Us(e),e!==null&&Jd(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function oA(t,e,r,n,i){switch(e){case"focusin":return qn=Ra(qn,t,e,r,n,i),!0;case"dragenter":return Yn=Ra(Yn,t,e,r,n,i),!0;case"mouseover":return Qn=Ra(Qn,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return ps.set(o,Ra(ps.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,vs.set(o,Ra(vs.get(o)||null,t,e,r,n,i)),!0}return!1}function Cm(t){var e=Di(t.target);if(e!==null){var r=Zi(e);if(r!==null){if(e=r.tag,e===13){if(e=dm(r),e!==null){t.blockedOn=e,Im(t.priority,function(){Em(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Dh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Ch=n,r.target.dispatchEvent(n),Ch=null}else return e=Us(r),e!==null&&Jd(e),t.blockedOn=r,!1;e.shift()}return!0}function $p(t,e,r){Qu(t)&&r.delete(e)}function aA(){Ph=!1,qn!==null&&Qu(qn)&&(qn=null),Yn!==null&&Qu(Yn)&&(Yn=null),Qn!==null&&Qu(Qn)&&(Qn=null),ps.forEach($p),vs.forEach($p)}function Oa(t,e){t.blockedOn===e&&(t.blockedOn=null,Ph||(Ph=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,aA)))}function gs(t){function e(i){return Oa(i,t)}if(0<Ru.length){Oa(Ru[0],t);for(var r=1;r<Ru.length;r++){var n=Ru[r];n.blockedOn===t&&(n.blockedOn=null)}}for(qn!==null&&Oa(qn,t),Yn!==null&&Oa(Yn,t),Qn!==null&&Oa(Qn,t),ps.forEach(e),vs.forEach(e),r=0;r<Vn.length;r++)n=Vn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Vn.length&&(r=Vn[0],r.blockedOn===null);)Cm(r),r.blockedOn===null&&Vn.shift()}var No=Tn.ReactCurrentBatchConfig,Il=!0;function sA(t,e,r,n){var i=Te,o=No.transition;No.transition=null;try{Te=1,e0(t,e,r,n)}finally{Te=i,No.transition=o}}function uA(t,e,r,n){var i=Te,o=No.transition;No.transition=null;try{Te=4,e0(t,e,r,n)}finally{Te=i,No.transition=o}}function e0(t,e,r,n){if(Il){var i=Dh(t,e,r,n);if(i===null)kf(t,e,n,Cl,r),Gp(t,n);else if(oA(i,t,e,r,n))n.stopPropagation();else if(Gp(t,n),e&4&&-1<iA.indexOf(t)){for(;i!==null;){var o=Us(i);if(o!==null&&xm(o),o=Dh(t,e,r,n),o===null&&kf(t,e,n,Cl,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else kf(t,e,n,null,r)}}var Cl=null;function Dh(t,e,r,n){if(Cl=null,t=Yd(n),t=Di(t),t!==null)if(e=Zi(t),e===null)t=null;else if(r=e.tag,r===13){if(t=dm(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cl=t,null}function Sm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qE()){case Qd:return 1;case ym:return 4;case El:case YE:return 16;case mm:return 536870912;default:return 16}default:return 16}}var Gn=null,t0=null,Zu=null;function Tm(){if(Zu)return Zu;var t,e=t0,r=e.length,n,i="value"in Gn?Gn.value:Gn.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[o-n];n++);return Zu=i.slice(t,1<n?1-n:void 0)}function Ju(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ou(){return!0}function Xp(){return!1}function yr(t){function e(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ou:Xp,this.isPropagationStopped=Xp,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ou)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ou)},persist:function(){},isPersistent:Ou}),e}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},r0=yr(na),Vs=Xe({},na,{view:0,detail:0}),lA=yr(Vs),Cf,Sf,Pa,pc=Xe({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pa&&(Pa&&t.type==="mousemove"?(Cf=t.screenX-Pa.screenX,Sf=t.screenY-Pa.screenY):Sf=Cf=0,Pa=t),Cf)},movementY:function(t){return"movementY"in t?t.movementY:Sf}}),Kp=yr(pc),cA=Xe({},pc,{dataTransfer:0}),fA=yr(cA),hA=Xe({},Vs,{relatedTarget:0}),Tf=yr(hA),dA=Xe({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),pA=yr(dA),vA=Xe({},na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gA=yr(vA),yA=Xe({},na,{data:0}),qp=yr(yA),mA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_A={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wA[t])?!!e[t]:!1}function n0(){return xA}var EA=Xe({},Vs,{key:function(t){if(t.key){var e=mA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ju(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_A[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n0,charCode:function(t){return t.type==="keypress"?Ju(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ju(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AA=yr(EA),IA=Xe({},pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yp=yr(IA),CA=Xe({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n0}),SA=yr(CA),TA=Xe({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),RA=yr(TA),OA=Xe({},pc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PA=yr(OA),DA=[9,13,27,32],i0=_n&&"CompositionEvent"in window,Ja=null;_n&&"documentMode"in document&&(Ja=document.documentMode);var NA=_n&&"TextEvent"in window&&!Ja,Rm=_n&&(!i0||Ja&&8<Ja&&11>=Ja),Qp=" ",Zp=!1;function Om(t,e){switch(t){case"keyup":return DA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var po=!1;function bA(t,e){switch(t){case"compositionend":return Pm(e);case"keypress":return e.which!==32?null:(Zp=!0,Qp);case"textInput":return t=e.data,t===Qp&&Zp?null:t;default:return null}}function kA(t,e){if(po)return t==="compositionend"||!i0&&Om(t,e)?(t=Tm(),Zu=t0=Gn=null,po=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Rm&&e.locale!=="ko"?null:e.data;default:return null}}var MA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!MA[t.type]:e==="textarea"}function Dm(t,e,r,n){um(n),e=Sl(e,"onChange"),0<e.length&&(r=new r0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var es=null,ys=null;function LA(t){zm(t,0)}function vc(t){var e=yo(t);if(tm(e))return t}function FA(t,e){if(t==="change")return e}var Nm=!1;if(_n){var Rf;if(_n){var Of="oninput"in document;if(!Of){var ev=document.createElement("div");ev.setAttribute("oninput","return;"),Of=typeof ev.oninput=="function"}Rf=Of}else Rf=!1;Nm=Rf&&(!document.documentMode||9<document.documentMode)}function tv(){es&&(es.detachEvent("onpropertychange",bm),ys=es=null)}function bm(t){if(t.propertyName==="value"&&vc(ys)){var e=[];Dm(e,ys,t,Yd(t)),hm(LA,e)}}function BA(t,e,r){t==="focusin"?(tv(),es=e,ys=r,es.attachEvent("onpropertychange",bm)):t==="focusout"&&tv()}function VA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vc(ys)}function UA(t,e){if(t==="click")return vc(e)}function jA(t,e){if(t==="input"||t==="change")return vc(e)}function zA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jr=typeof Object.is=="function"?Object.is:zA;function ms(t,e){if(jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!dh.call(e,i)||!jr(t[i],e[i]))return!1}return!0}function rv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nv(t,e){var r=rv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rv(r)}}function km(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?km(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mm(){for(var t=window,e=_l();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=_l(t.document)}return e}function o0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HA(t){var e=Mm(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&km(r.ownerDocument.documentElement,r)){if(n!==null&&o0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=nv(r,o);var a=nv(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WA=_n&&"documentMode"in document&&11>=document.documentMode,vo=null,Nh=null,ts=null,bh=!1;function iv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bh||vo==null||vo!==_l(n)||(n=vo,"selectionStart"in n&&o0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ts&&ms(ts,n)||(ts=n,n=Sl(Nh,"onSelect"),0<n.length&&(e=new r0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=vo)))}function Pu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var go={animationend:Pu("Animation","AnimationEnd"),animationiteration:Pu("Animation","AnimationIteration"),animationstart:Pu("Animation","AnimationStart"),transitionend:Pu("Transition","TransitionEnd")},Pf={},Lm={};_n&&(Lm=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function gc(t){if(Pf[t])return Pf[t];if(!go[t])return t;var e=go[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Lm)return Pf[t]=e[r];return t}var Fm=gc("animationend"),Bm=gc("animationiteration"),Vm=gc("animationstart"),Um=gc("transitionend"),jm=new Map,ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vi(t,e){jm.set(t,e),Qi(e,[t])}for(var Df=0;Df<ov.length;Df++){var Nf=ov[Df],GA=Nf.toLowerCase(),$A=Nf[0].toUpperCase()+Nf.slice(1);vi(GA,"on"+$A)}vi(Fm,"onAnimationEnd");vi(Bm,"onAnimationIteration");vi(Vm,"onAnimationStart");vi("dblclick","onDoubleClick");vi("focusin","onFocus");vi("focusout","onBlur");vi(Um,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);Qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XA=new Set("cancel close invalid load scroll toggle".split(" ").concat(ja));function av(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,GE(n,e,void 0,t),t.currentTarget=null}function zm(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var s=n[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;av(i,s,l),o=u}else for(a=0;a<n.length;a++){if(s=n[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;av(i,s,l),o=u}}}if(xl)throw t=Rh,xl=!1,Rh=null,t}function Le(t,e){var r=e[Bh];r===void 0&&(r=e[Bh]=new Set);var n=t+"__bubble";r.has(n)||(Hm(e,t,2,!1),r.add(n))}function bf(t,e,r){var n=0;e&&(n|=4),Hm(r,t,n,e)}var Du="_reactListening"+Math.random().toString(36).slice(2);function _s(t){if(!t[Du]){t[Du]=!0,Yy.forEach(function(r){r!=="selectionchange"&&(XA.has(r)||bf(r,!1,t),bf(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Du]||(e[Du]=!0,bf("selectionchange",!1,e))}}function Hm(t,e,r,n){switch(Sm(e)){case 1:var i=sA;break;case 4:i=uA;break;default:i=e0}r=i.bind(null,e,r,t),i=void 0,!Th||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function kf(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Di(s),a===null)return;if(u=a.tag,u===5||u===6){n=o=a;continue e}s=s.parentNode}}n=n.return}hm(function(){var l=o,f=Yd(r),h=[];e:{var d=jm.get(t);if(d!==void 0){var p=r0,g=t;switch(t){case"keypress":if(Ju(r)===0)break e;case"keydown":case"keyup":p=AA;break;case"focusin":g="focus",p=Tf;break;case"focusout":g="blur",p=Tf;break;case"beforeblur":case"afterblur":p=Tf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=fA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=SA;break;case Fm:case Bm:case Vm:p=pA;break;case Um:p=RA;break;case"scroll":p=lA;break;case"wheel":p=PA;break;case"copy":case"cut":case"paste":p=gA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Yp}var w=(e&4)!==0,I=!w&&t==="scroll",_=w?d!==null?d+"Capture":null:d;w=[];for(var m=l,x;m!==null;){x=m;var P=x.stateNode;if(x.tag===5&&P!==null&&(x=P,_!==null&&(P=ds(m,_),P!=null&&w.push(ws(m,P,x)))),I)break;m=m.return}0<w.length&&(d=new p(d,g,null,r,f),h.push({event:d,listeners:w}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&r!==Ch&&(g=r.relatedTarget||r.fromElement)&&(Di(g)||g[wn]))break e;if((p||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=l,g=g?Di(g):null,g!==null&&(I=Zi(g),g!==I||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=l),p!==g)){if(w=Kp,P="onMouseLeave",_="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=Yp,P="onPointerLeave",_="onPointerEnter",m="pointer"),I=p==null?d:yo(p),x=g==null?d:yo(g),d=new w(P,m+"leave",p,r,f),d.target=I,d.relatedTarget=x,P=null,Di(f)===l&&(w=new w(_,m+"enter",g,r,f),w.target=x,w.relatedTarget=I,P=w),I=P,p&&g)t:{for(w=p,_=g,m=0,x=w;x;x=ao(x))m++;for(x=0,P=_;P;P=ao(P))x++;for(;0<m-x;)w=ao(w),m--;for(;0<x-m;)_=ao(_),x--;for(;m--;){if(w===_||_!==null&&w===_.alternate)break t;w=ao(w),_=ao(_)}w=null}else w=null;p!==null&&sv(h,d,p,w,!1),g!==null&&I!==null&&sv(h,I,g,w,!0)}}e:{if(d=l?yo(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var k=FA;else if(Jp(d))if(Nm)k=jA;else{k=VA;var M=BA}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(k=UA);if(k&&(k=k(t,l))){Dm(h,k,r,f);break e}M&&M(t,d,l),t==="focusout"&&(M=d._wrapperState)&&M.controlled&&d.type==="number"&&wh(d,"number",d.value)}switch(M=l?yo(l):window,t){case"focusin":(Jp(M)||M.contentEditable==="true")&&(vo=M,Nh=l,ts=null);break;case"focusout":ts=Nh=vo=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,iv(h,r,f);break;case"selectionchange":if(WA)break;case"keydown":case"keyup":iv(h,r,f)}var A;if(i0)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else po?Om(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Rm&&r.locale!=="ko"&&(po||E!=="onCompositionStart"?E==="onCompositionEnd"&&po&&(A=Tm()):(Gn=f,t0="value"in Gn?Gn.value:Gn.textContent,po=!0)),M=Sl(l,E),0<M.length&&(E=new qp(E,t,null,r,f),h.push({event:E,listeners:M}),A?E.data=A:(A=Pm(r),A!==null&&(E.data=A)))),(A=NA?bA(t,r):kA(t,r))&&(l=Sl(l,"onBeforeInput"),0<l.length&&(f=new qp("onBeforeInput","beforeinput",null,r,f),h.push({event:f,listeners:l}),f.data=A))}zm(h,e)})}function ws(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Sl(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ds(t,r),o!=null&&n.unshift(ws(t,o,i)),o=ds(t,e),o!=null&&n.push(ws(t,o,i))),t=t.return}return n}function ao(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sv(t,e,r,n,i){for(var o=e._reactName,a=[];r!==null&&r!==n;){var s=r,u=s.alternate,l=s.stateNode;if(u!==null&&u===n)break;s.tag===5&&l!==null&&(s=l,i?(u=ds(r,o),u!=null&&a.unshift(ws(r,u,s))):i||(u=ds(r,o),u!=null&&a.push(ws(r,u,s)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var KA=/\r\n?/g,qA=/\u0000|\uFFFD/g;function uv(t){return(typeof t=="string"?t:""+t).replace(KA,`
`).replace(qA,"")}function Nu(t,e,r){if(e=uv(e),uv(t)!==e&&r)throw Error(H(425))}function Tl(){}var kh=null,Mh=null;function Lh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fh=typeof setTimeout=="function"?setTimeout:void 0,YA=typeof clearTimeout=="function"?clearTimeout:void 0,lv=typeof Promise=="function"?Promise:void 0,QA=typeof queueMicrotask=="function"?queueMicrotask:typeof lv<"u"?function(t){return lv.resolve(null).then(t).catch(ZA)}:Fh;function ZA(t){setTimeout(function(){throw t})}function Mf(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),gs(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);gs(e)}function Zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ia=Math.random().toString(36).slice(2),Gr="__reactFiber$"+ia,xs="__reactProps$"+ia,wn="__reactContainer$"+ia,Bh="__reactEvents$"+ia,JA="__reactListeners$"+ia,eI="__reactHandles$"+ia;function Di(t){var e=t[Gr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[wn]||r[Gr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=cv(t);t!==null;){if(r=t[Gr])return r;t=cv(t)}return e}t=r,r=t.parentNode}return null}function Us(t){return t=t[Gr]||t[wn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function yc(t){return t[xs]||null}var Vh=[],mo=-1;function gi(t){return{current:t}}function Ve(t){0>mo||(t.current=Vh[mo],Vh[mo]=null,mo--)}function Ne(t,e){mo++,Vh[mo]=t.current,t.current=e}var ci={},jt=gi(ci),or=gi(!1),Ui=ci;function jo(t,e){var r=t.type.contextTypes;if(!r)return ci;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ar(t){return t=t.childContextTypes,t!=null}function Rl(){Ve(or),Ve(jt)}function fv(t,e,r){if(jt.current!==ci)throw Error(H(168));Ne(jt,e),Ne(or,r)}function Wm(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(H(108,BE(t)||"Unknown",i));return Xe({},r,n)}function Ol(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,Ui=jt.current,Ne(jt,t),Ne(or,or.current),!0}function hv(t,e,r){var n=t.stateNode;if(!n)throw Error(H(169));r?(t=Wm(t,e,Ui),n.__reactInternalMemoizedMergedChildContext=t,Ve(or),Ve(jt),Ne(jt,t)):Ve(or),Ne(or,r)}var cn=null,mc=!1,Lf=!1;function Gm(t){cn===null?cn=[t]:cn.push(t)}function tI(t){mc=!0,Gm(t)}function yi(){if(!Lf&&cn!==null){Lf=!0;var t=0,e=Te;try{var r=cn;for(Te=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}cn=null,mc=!1}catch(i){throw cn!==null&&(cn=cn.slice(t+1)),gm(Qd,yi),i}finally{Te=e,Lf=!1}}return null}var _o=[],wo=0,Pl=null,Dl=0,xr=[],Er=0,ji=null,fn=1,hn="";function Ti(t,e){_o[wo++]=Dl,_o[wo++]=Pl,Pl=t,Dl=e}function $m(t,e,r){xr[Er++]=fn,xr[Er++]=hn,xr[Er++]=ji,ji=t;var n=fn;t=hn;var i=32-Vr(n)-1;n&=~(1<<i),r+=1;var o=32-Vr(e)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,fn=1<<32-Vr(e)+i|r<<i|n,hn=o+t}else fn=1<<o|r<<i|n,hn=t}function a0(t){t.return!==null&&(Ti(t,1),$m(t,1,0))}function s0(t){for(;t===Pl;)Pl=_o[--wo],_o[wo]=null,Dl=_o[--wo],_o[wo]=null;for(;t===ji;)ji=xr[--Er],xr[Er]=null,hn=xr[--Er],xr[Er]=null,fn=xr[--Er],xr[Er]=null}var dr=null,hr=null,je=!1,Mr=null;function Xm(t,e){var r=Ir(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function dv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dr=t,hr=Zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dr=t,hr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ji!==null?{id:fn,overflow:hn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ir(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,dr=t,hr=null,!0):!1;default:return!1}}function Uh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jh(t){if(je){var e=hr;if(e){var r=e;if(!dv(t,e)){if(Uh(t))throw Error(H(418));e=Zn(r.nextSibling);var n=dr;e&&dv(t,e)?Xm(n,r):(t.flags=t.flags&-4097|2,je=!1,dr=t)}}else{if(Uh(t))throw Error(H(418));t.flags=t.flags&-4097|2,je=!1,dr=t}}}function pv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dr=t}function bu(t){if(t!==dr)return!1;if(!je)return pv(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lh(t.type,t.memoizedProps)),e&&(e=hr)){if(Uh(t))throw Km(),Error(H(418));for(;e;)Xm(t,e),e=Zn(e.nextSibling)}if(pv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){hr=Zn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}hr=null}}else hr=dr?Zn(t.stateNode.nextSibling):null;return!0}function Km(){for(var t=hr;t;)t=Zn(t.nextSibling)}function zo(){hr=dr=null,je=!1}function u0(t){Mr===null?Mr=[t]:Mr.push(t)}var rI=Tn.ReactCurrentBatchConfig;function Da(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,t))}return t}function ku(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vv(t){var e=t._init;return e(t._payload)}function qm(t){function e(_,m){if(t){var x=_.deletions;x===null?(_.deletions=[m],_.flags|=16):x.push(m)}}function r(_,m){if(!t)return null;for(;m!==null;)e(_,m),m=m.sibling;return null}function n(_,m){for(_=new Map;m!==null;)m.key!==null?_.set(m.key,m):_.set(m.index,m),m=m.sibling;return _}function i(_,m){return _=ri(_,m),_.index=0,_.sibling=null,_}function o(_,m,x){return _.index=x,t?(x=_.alternate,x!==null?(x=x.index,x<m?(_.flags|=2,m):x):(_.flags|=2,m)):(_.flags|=1048576,m)}function a(_){return t&&_.alternate===null&&(_.flags|=2),_}function s(_,m,x,P){return m===null||m.tag!==6?(m=Hf(x,_.mode,P),m.return=_,m):(m=i(m,x),m.return=_,m)}function u(_,m,x,P){var k=x.type;return k===ho?f(_,m,x.props.children,P,x.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ln&&vv(k)===m.type)?(P=i(m,x.props),P.ref=Da(_,m,x),P.return=_,P):(P=al(x.type,x.key,x.props,null,_.mode,P),P.ref=Da(_,m,x),P.return=_,P)}function l(_,m,x,P){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=Wf(x,_.mode,P),m.return=_,m):(m=i(m,x.children||[]),m.return=_,m)}function f(_,m,x,P,k){return m===null||m.tag!==7?(m=Fi(x,_.mode,P,k),m.return=_,m):(m=i(m,x),m.return=_,m)}function h(_,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Hf(""+m,_.mode,x),m.return=_,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Au:return x=al(m.type,m.key,m.props,null,_.mode,x),x.ref=Da(_,null,m),x.return=_,x;case fo:return m=Wf(m,_.mode,x),m.return=_,m;case Ln:var P=m._init;return h(_,P(m._payload),x)}if(Va(m)||Sa(m))return m=Fi(m,_.mode,x,null),m.return=_,m;ku(_,m)}return null}function d(_,m,x,P){var k=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:s(_,m,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Au:return x.key===k?u(_,m,x,P):null;case fo:return x.key===k?l(_,m,x,P):null;case Ln:return k=x._init,d(_,m,k(x._payload),P)}if(Va(x)||Sa(x))return k!==null?null:f(_,m,x,P,null);ku(_,x)}return null}function p(_,m,x,P,k){if(typeof P=="string"&&P!==""||typeof P=="number")return _=_.get(x)||null,s(m,_,""+P,k);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Au:return _=_.get(P.key===null?x:P.key)||null,u(m,_,P,k);case fo:return _=_.get(P.key===null?x:P.key)||null,l(m,_,P,k);case Ln:var M=P._init;return p(_,m,x,M(P._payload),k)}if(Va(P)||Sa(P))return _=_.get(x)||null,f(m,_,P,k,null);ku(m,P)}return null}function g(_,m,x,P){for(var k=null,M=null,A=m,E=m=0,S=null;A!==null&&E<x.length;E++){A.index>E?(S=A,A=null):S=A.sibling;var R=d(_,A,x[E],P);if(R===null){A===null&&(A=S);break}t&&A&&R.alternate===null&&e(_,A),m=o(R,m,E),M===null?k=R:M.sibling=R,M=R,A=S}if(E===x.length)return r(_,A),je&&Ti(_,E),k;if(A===null){for(;E<x.length;E++)A=h(_,x[E],P),A!==null&&(m=o(A,m,E),M===null?k=A:M.sibling=A,M=A);return je&&Ti(_,E),k}for(A=n(_,A);E<x.length;E++)S=p(A,_,E,x[E],P),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?E:S.key),m=o(S,m,E),M===null?k=S:M.sibling=S,M=S);return t&&A.forEach(function(D){return e(_,D)}),je&&Ti(_,E),k}function w(_,m,x,P){var k=Sa(x);if(typeof k!="function")throw Error(H(150));if(x=k.call(x),x==null)throw Error(H(151));for(var M=k=null,A=m,E=m=0,S=null,R=x.next();A!==null&&!R.done;E++,R=x.next()){A.index>E?(S=A,A=null):S=A.sibling;var D=d(_,A,R.value,P);if(D===null){A===null&&(A=S);break}t&&A&&D.alternate===null&&e(_,A),m=o(D,m,E),M===null?k=D:M.sibling=D,M=D,A=S}if(R.done)return r(_,A),je&&Ti(_,E),k;if(A===null){for(;!R.done;E++,R=x.next())R=h(_,R.value,P),R!==null&&(m=o(R,m,E),M===null?k=R:M.sibling=R,M=R);return je&&Ti(_,E),k}for(A=n(_,A);!R.done;E++,R=x.next())R=p(A,_,E,R.value,P),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?E:R.key),m=o(R,m,E),M===null?k=R:M.sibling=R,M=R);return t&&A.forEach(function(N){return e(_,N)}),je&&Ti(_,E),k}function I(_,m,x,P){if(typeof x=="object"&&x!==null&&x.type===ho&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Au:e:{for(var k=x.key,M=m;M!==null;){if(M.key===k){if(k=x.type,k===ho){if(M.tag===7){r(_,M.sibling),m=i(M,x.props.children),m.return=_,_=m;break e}}else if(M.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ln&&vv(k)===M.type){r(_,M.sibling),m=i(M,x.props),m.ref=Da(_,M,x),m.return=_,_=m;break e}r(_,M);break}else e(_,M);M=M.sibling}x.type===ho?(m=Fi(x.props.children,_.mode,P,x.key),m.return=_,_=m):(P=al(x.type,x.key,x.props,null,_.mode,P),P.ref=Da(_,m,x),P.return=_,_=P)}return a(_);case fo:e:{for(M=x.key;m!==null;){if(m.key===M)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){r(_,m.sibling),m=i(m,x.children||[]),m.return=_,_=m;break e}else{r(_,m);break}else e(_,m);m=m.sibling}m=Wf(x,_.mode,P),m.return=_,_=m}return a(_);case Ln:return M=x._init,I(_,m,M(x._payload),P)}if(Va(x))return g(_,m,x,P);if(Sa(x))return w(_,m,x,P);ku(_,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(r(_,m.sibling),m=i(m,x),m.return=_,_=m):(r(_,m),m=Hf(x,_.mode,P),m.return=_,_=m),a(_)):r(_,m)}return I}var Ho=qm(!0),Ym=qm(!1),Nl=gi(null),bl=null,xo=null,l0=null;function c0(){l0=xo=bl=null}function f0(t){var e=Nl.current;Ve(Nl),t._currentValue=e}function zh(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function bo(t,e){bl=t,l0=xo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ir=!0),t.firstContext=null)}function Rr(t){var e=t._currentValue;if(l0!==t)if(t={context:t,memoizedValue:e,next:null},xo===null){if(bl===null)throw Error(H(308));xo=t,bl.dependencies={lanes:0,firstContext:t}}else xo=xo.next=t;return e}var Ni=null;function h0(t){Ni===null?Ni=[t]:Ni.push(t)}function Qm(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,h0(e)):(r.next=i.next,i.next=r),e.interleaved=r,xn(t,n)}function xn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Fn=!1;function d0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,me&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,xn(t,r)}return i=n.interleaved,i===null?(e.next=e,h0(n)):(e.next=i.next,i.next=e),n.interleaved=e,xn(t,r)}function el(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Zd(t,r)}}function gv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function kl(t,e,r,n){var i=t.updateQueue;Fn=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?o=l:a.next=l,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==a&&(s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=u))}if(o!==null){var h=i.baseState;a=0,f=l=u=null,s=o;do{var d=s.lane,p=s.eventTime;if((n&d)===d){f!==null&&(f=f.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=t,w=s;switch(d=e,p=r,w.tag){case 1:if(g=w.payload,typeof g=="function"){h=g.call(p,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,d=typeof g=="function"?g.call(p,h,d):g,d==null)break e;h=Xe({},h,d);break e;case 2:Fn=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(l=f=p,u=h):f=f.next=p,a|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(f===null&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Hi|=a,t.lanes=a,t.memoizedState=h}}function yv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(H(191,i));i.call(n)}}}var js={},qr=gi(js),Es=gi(js),As=gi(js);function bi(t){if(t===js)throw Error(H(174));return t}function p0(t,e){switch(Ne(As,e),Ne(Es,t),Ne(qr,js),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Eh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Eh(e,t)}Ve(qr),Ne(qr,e)}function Wo(){Ve(qr),Ve(Es),Ve(As)}function Jm(t){bi(As.current);var e=bi(qr.current),r=Eh(e,t.type);e!==r&&(Ne(Es,t),Ne(qr,r))}function v0(t){Es.current===t&&(Ve(qr),Ve(Es))}var Ge=gi(0);function Ml(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ff=[];function g0(){for(var t=0;t<Ff.length;t++)Ff[t]._workInProgressVersionPrimary=null;Ff.length=0}var tl=Tn.ReactCurrentDispatcher,Bf=Tn.ReactCurrentBatchConfig,zi=0,$e=null,ot=null,gt=null,Ll=!1,rs=!1,Is=0,nI=0;function bt(){throw Error(H(321))}function y0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!jr(t[r],e[r]))return!1;return!0}function m0(t,e,r,n,i,o){if(zi=o,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tl.current=t===null||t.memoizedState===null?sI:uI,t=r(n,i),rs){o=0;do{if(rs=!1,Is=0,25<=o)throw Error(H(301));o+=1,gt=ot=null,e.updateQueue=null,tl.current=lI,t=r(n,i)}while(rs)}if(tl.current=Fl,e=ot!==null&&ot.next!==null,zi=0,gt=ot=$e=null,Ll=!1,e)throw Error(H(300));return t}function _0(){var t=Is!==0;return Is=0,t}function Wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?$e.memoizedState=gt=t:gt=gt.next=t,gt}function Or(){if(ot===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=gt===null?$e.memoizedState:gt.next;if(e!==null)gt=e,ot=t;else{if(t===null)throw Error(H(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},gt===null?$e.memoizedState=gt=t:gt=gt.next=t}return gt}function Cs(t,e){return typeof e=="function"?e(t):e}function Vf(t){var e=Or(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=ot,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,u=null,l=o;do{var f=l.lane;if((zi&f)===f)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=h,a=n):u=u.next=h,$e.lanes|=f,Hi|=f}l=l.next}while(l!==null&&l!==o);u===null?a=n:u.next=s,jr(n,e.memoizedState)||(ir=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,$e.lanes|=o,Hi|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Uf(t){var e=Or(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);jr(o,e.memoizedState)||(ir=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function e_(){}function t_(t,e){var r=$e,n=Or(),i=e(),o=!jr(n.memoizedState,i);if(o&&(n.memoizedState=i,ir=!0),n=n.queue,w0(i_.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,Ss(9,n_.bind(null,r,n,i,e),void 0,null),mt===null)throw Error(H(349));zi&30||r_(r,e,i)}return i}function r_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function n_(t,e,r,n){e.value=r,e.getSnapshot=n,o_(e)&&a_(t)}function i_(t,e,r){return r(function(){o_(e)&&a_(t)})}function o_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!jr(t,r)}catch{return!0}}function a_(t){var e=xn(t,1);e!==null&&Ur(e,t,1,-1)}function mv(t){var e=Wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:t},e.queue=t,t=t.dispatch=aI.bind(null,$e,t),[e.memoizedState,t]}function Ss(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function s_(){return Or().memoizedState}function rl(t,e,r,n){var i=Wr();$e.flags|=t,i.memoizedState=Ss(1|e,r,void 0,n===void 0?null:n)}function _c(t,e,r,n){var i=Or();n=n===void 0?null:n;var o=void 0;if(ot!==null){var a=ot.memoizedState;if(o=a.destroy,n!==null&&y0(n,a.deps)){i.memoizedState=Ss(e,r,o,n);return}}$e.flags|=t,i.memoizedState=Ss(1|e,r,o,n)}function _v(t,e){return rl(8390656,8,t,e)}function w0(t,e){return _c(2048,8,t,e)}function u_(t,e){return _c(4,2,t,e)}function l_(t,e){return _c(4,4,t,e)}function c_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function f_(t,e,r){return r=r!=null?r.concat([t]):null,_c(4,4,c_.bind(null,e,t),r)}function x0(){}function h_(t,e){var r=Or();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&y0(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function d_(t,e){var r=Or();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&y0(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function p_(t,e,r){return zi&21?(jr(r,e)||(r=_m(),$e.lanes|=r,Hi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ir=!0),t.memoizedState=r)}function iI(t,e){var r=Te;Te=r!==0&&4>r?r:4,t(!0);var n=Bf.transition;Bf.transition={};try{t(!1),e()}finally{Te=r,Bf.transition=n}}function v_(){return Or().memoizedState}function oI(t,e,r){var n=ti(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},g_(t))y_(e,r);else if(r=Qm(t,e,r,n),r!==null){var i=Qt();Ur(r,t,n,i),m_(r,e,n)}}function aI(t,e,r){var n=ti(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(g_(t))y_(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,jr(s,a)){var u=e.interleaved;u===null?(i.next=i,h0(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}r=Qm(t,e,i,n),r!==null&&(i=Qt(),Ur(r,t,n,i),m_(r,e,n))}}function g_(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function y_(t,e){rs=Ll=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function m_(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Zd(t,r)}}var Fl={readContext:Rr,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},sI={readContext:Rr,useCallback:function(t,e){return Wr().memoizedState=[t,e===void 0?null:e],t},useContext:Rr,useEffect:_v,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,rl(4194308,4,c_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return rl(4194308,4,t,e)},useInsertionEffect:function(t,e){return rl(4,2,t,e)},useMemo:function(t,e){var r=Wr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Wr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=oI.bind(null,$e,t),[n.memoizedState,t]},useRef:function(t){var e=Wr();return t={current:t},e.memoizedState=t},useState:mv,useDebugValue:x0,useDeferredValue:function(t){return Wr().memoizedState=t},useTransition:function(){var t=mv(!1),e=t[0];return t=iI.bind(null,t[1]),Wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=$e,i=Wr();if(je){if(r===void 0)throw Error(H(407));r=r()}else{if(r=e(),mt===null)throw Error(H(349));zi&30||r_(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,_v(i_.bind(null,n,o,t),[t]),n.flags|=2048,Ss(9,n_.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=Wr(),e=mt.identifierPrefix;if(je){var r=hn,n=fn;r=(n&~(1<<32-Vr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Is++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=nI++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uI={readContext:Rr,useCallback:h_,useContext:Rr,useEffect:w0,useImperativeHandle:f_,useInsertionEffect:u_,useLayoutEffect:l_,useMemo:d_,useReducer:Vf,useRef:s_,useState:function(){return Vf(Cs)},useDebugValue:x0,useDeferredValue:function(t){var e=Or();return p_(e,ot.memoizedState,t)},useTransition:function(){var t=Vf(Cs)[0],e=Or().memoizedState;return[t,e]},useMutableSource:e_,useSyncExternalStore:t_,useId:v_,unstable_isNewReconciler:!1},lI={readContext:Rr,useCallback:h_,useContext:Rr,useEffect:w0,useImperativeHandle:f_,useInsertionEffect:u_,useLayoutEffect:l_,useMemo:d_,useReducer:Uf,useRef:s_,useState:function(){return Uf(Cs)},useDebugValue:x0,useDeferredValue:function(t){var e=Or();return ot===null?e.memoizedState=t:p_(e,ot.memoizedState,t)},useTransition:function(){var t=Uf(Cs)[0],e=Or().memoizedState;return[t,e]},useMutableSource:e_,useSyncExternalStore:t_,useId:v_,unstable_isNewReconciler:!1};function br(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Hh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Xe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var wc={isMounted:function(t){return(t=t._reactInternals)?Zi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Qt(),i=ti(t),o=gn(n,i);o.payload=e,r!=null&&(o.callback=r),e=Jn(t,o,i),e!==null&&(Ur(e,t,i,n),el(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Qt(),i=ti(t),o=gn(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Jn(t,o,i),e!==null&&(Ur(e,t,i,n),el(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Qt(),n=ti(t),i=gn(r,n);i.tag=2,e!=null&&(i.callback=e),e=Jn(t,i,n),e!==null&&(Ur(e,t,n,r),el(e,t,n))}};function wv(t,e,r,n,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!ms(r,n)||!ms(i,o):!0}function __(t,e,r){var n=!1,i=ci,o=e.contextType;return typeof o=="object"&&o!==null?o=Rr(o):(i=ar(e)?Ui:jt.current,n=e.contextTypes,o=(n=n!=null)?jo(t,i):ci),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wc,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function xv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&wc.enqueueReplaceState(e,e.state,null)}function Wh(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},d0(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Rr(o):(o=ar(e)?Ui:jt.current,i.context=jo(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Hh(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&wc.enqueueReplaceState(i,i.state,null),kl(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Go(t,e){try{var r="",n=e;do r+=FE(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function jf(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Gh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var cI=typeof WeakMap=="function"?WeakMap:Map;function w_(t,e,r){r=gn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Vl||(Vl=!0,td=n),Gh(t,e)},r}function x_(t,e,r){r=gn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Gh(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Gh(t,e),typeof n!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Ev(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new cI;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=II.bind(null,t,e,r),e.then(t,t))}function Av(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Iv(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=gn(-1,1),e.tag=2,Jn(r,e,1))),r.lanes|=1),t)}var fI=Tn.ReactCurrentOwner,ir=!1;function Yt(t,e,r,n){e.child=t===null?Ym(e,null,r,n):Ho(e,t.child,r,n)}function Cv(t,e,r,n,i){r=r.render;var o=e.ref;return bo(e,i),n=m0(t,e,r,n,o,i),r=_0(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(je&&r&&a0(e),e.flags|=1,Yt(t,e,n,i),e.child)}function Sv(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!O0(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,E_(t,e,o,n,i)):(t=al(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:ms,r(a,n)&&t.ref===e.ref)return En(t,e,i)}return e.flags|=1,t=ri(o,n),t.ref=e.ref,t.return=e,e.child=t}function E_(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(ms(o,n)&&t.ref===e.ref)if(ir=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(ir=!0);else return e.lanes=t.lanes,En(t,e,i)}return $h(t,e,r,n,i)}function A_(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Ao,fr),fr|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(Ao,fr),fr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Ne(Ao,fr),fr|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Ne(Ao,fr),fr|=n;return Yt(t,e,i,r),e.child}function I_(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function $h(t,e,r,n,i){var o=ar(r)?Ui:jt.current;return o=jo(e,o),bo(e,i),r=m0(t,e,r,n,o,i),n=_0(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(je&&n&&a0(e),e.flags|=1,Yt(t,e,r,i),e.child)}function Tv(t,e,r,n,i){if(ar(r)){var o=!0;Ol(e)}else o=!1;if(bo(e,i),e.stateNode===null)nl(t,e),__(e,r,n),Wh(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=r.contextType;typeof l=="object"&&l!==null?l=Rr(l):(l=ar(r)?Ui:jt.current,l=jo(e,l));var f=r.getDerivedStateFromProps,h=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||u!==l)&&xv(e,a,n,l),Fn=!1;var d=e.memoizedState;a.state=d,kl(e,n,a,i),u=e.memoizedState,s!==n||d!==u||or.current||Fn?(typeof f=="function"&&(Hh(e,r,f,n),u=e.memoizedState),(s=Fn||wv(e,r,s,n,d,u,l))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=l,n=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,Zm(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:br(e.type,s),a.props=l,h=e.pendingProps,d=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Rr(u):(u=ar(r)?Ui:jt.current,u=jo(e,u));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==h||d!==u)&&xv(e,a,n,u),Fn=!1,d=e.memoizedState,a.state=d,kl(e,n,a,i);var g=e.memoizedState;s!==h||d!==g||or.current||Fn?(typeof p=="function"&&(Hh(e,r,p,n),g=e.memoizedState),(l=Fn||wv(e,r,l,n,d,g,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,g,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,g,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),a.props=n,a.state=g,a.context=u,n=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return Xh(t,e,r,n,o,i)}function Xh(t,e,r,n,i,o){I_(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&hv(e,r,!1),En(t,e,o);n=e.stateNode,fI.current=e;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Ho(e,t.child,null,o),e.child=Ho(e,null,s,o)):Yt(t,e,s,o),e.memoizedState=n.state,i&&hv(e,r,!0),e.child}function C_(t){var e=t.stateNode;e.pendingContext?fv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fv(t,e.context,!1),p0(t,e.containerInfo)}function Rv(t,e,r,n,i){return zo(),u0(i),e.flags|=256,Yt(t,e,r,n),e.child}var Kh={dehydrated:null,treeContext:null,retryLane:0};function qh(t){return{baseLanes:t,cachePool:null,transitions:null}}function S_(t,e,r){var n=e.pendingProps,i=Ge.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ne(Ge,i&1),t===null)return jh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,o?(n=e.mode,o=e.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Ac(a,n,0,null),t=Fi(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=qh(r),e.memoizedState=Kh,t):E0(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return hI(t,e,a,n,s,i,r);if(o){o=n.fallback,a=e.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=ri(i,u),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=ri(s,o):(o=Fi(o,a,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,a=t.child.memoizedState,a=a===null?qh(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~r,e.memoizedState=Kh,n}return o=t.child,t=o.sibling,n=ri(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function E0(t,e){return e=Ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mu(t,e,r,n){return n!==null&&u0(n),Ho(e,t.child,null,r),t=E0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hI(t,e,r,n,i,o,a){if(r)return e.flags&256?(e.flags&=-257,n=jf(Error(H(422))),Mu(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=Ac({mode:"visible",children:n.children},i,0,null),o=Fi(o,i,a,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&Ho(e,t.child,null,a),e.child.memoizedState=qh(a),e.memoizedState=Kh,o);if(!(e.mode&1))return Mu(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(H(419)),n=jf(o,n,void 0),Mu(t,e,a,n)}if(s=(a&t.childLanes)!==0,ir||s){if(n=mt,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,xn(t,i),Ur(n,t,i,-1))}return R0(),n=jf(Error(H(421))),Mu(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=CI.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,hr=Zn(i.nextSibling),dr=e,je=!0,Mr=null,t!==null&&(xr[Er++]=fn,xr[Er++]=hn,xr[Er++]=ji,fn=t.id,hn=t.overflow,ji=e),e=E0(e,n.children),e.flags|=4096,e)}function Ov(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),zh(t.return,e,r)}function zf(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function T_(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(Yt(t,e,n.children,r),n=Ge.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ov(t,r,e);else if(t.tag===19)Ov(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ne(Ge,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Ml(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),zf(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ml(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}zf(e,!0,r,null,o);break;case"together":zf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Hi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,r=ri(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ri(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function dI(t,e,r){switch(e.tag){case 3:C_(e),zo();break;case 5:Jm(e);break;case 1:ar(e.type)&&Ol(e);break;case 4:p0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ne(Nl,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ne(Ge,Ge.current&1),e.flags|=128,null):r&e.child.childLanes?S_(t,e,r):(Ne(Ge,Ge.current&1),t=En(t,e,r),t!==null?t.sibling:null);Ne(Ge,Ge.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return T_(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ne(Ge,Ge.current),n)break;return null;case 22:case 23:return e.lanes=0,A_(t,e,r)}return En(t,e,r)}var R_,Yh,O_,P_;R_=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Yh=function(){};O_=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,bi(qr.current);var o=null;switch(r){case"input":i=mh(t,i),n=mh(t,n),o=[];break;case"select":i=Xe({},i,{value:void 0}),n=Xe({},n,{value:void 0}),o=[];break;case"textarea":i=xh(t,i),n=xh(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Tl)}Ah(r,n);var a;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(fs.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in n){var u=n[l];if(s=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(l,r)),r=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(fs.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Le("scroll",t),o||s===u||(o=[])):(o=o||[]).push(l,u))}r&&(o=o||[]).push("style",r);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};P_=function(t,e,r,n){r!==n&&(e.flags|=4)};function Na(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function pI(t,e,r){var n=e.pendingProps;switch(s0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return ar(e.type)&&Rl(),kt(e),null;case 3:return n=e.stateNode,Wo(),Ve(or),Ve(jt),g0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(bu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mr!==null&&(id(Mr),Mr=null))),Yh(t,e),kt(e),null;case 5:v0(e);var i=bi(As.current);if(r=e.type,t!==null&&e.stateNode!=null)O_(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(H(166));return kt(e),null}if(t=bi(qr.current),bu(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Gr]=e,n[xs]=o,t=(e.mode&1)!==0,r){case"dialog":Le("cancel",n),Le("close",n);break;case"iframe":case"object":case"embed":Le("load",n);break;case"video":case"audio":for(i=0;i<ja.length;i++)Le(ja[i],n);break;case"source":Le("error",n);break;case"img":case"image":case"link":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"input":Bp(n,o),Le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Le("invalid",n);break;case"textarea":Up(n,o),Le("invalid",n)}Ah(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&Nu(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Nu(n.textContent,s,t),i=["children",""+s]):fs.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Le("scroll",n)}switch(r){case"input":Iu(n),Vp(n,o,!0);break;case"textarea":Iu(n),jp(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Tl)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=im(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Gr]=e,t[xs]=n,R_(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ih(r,n),r){case"dialog":Le("cancel",t),Le("close",t),i=n;break;case"iframe":case"object":case"embed":Le("load",t),i=n;break;case"video":case"audio":for(i=0;i<ja.length;i++)Le(ja[i],t);i=n;break;case"source":Le("error",t),i=n;break;case"img":case"image":case"link":Le("error",t),Le("load",t),i=n;break;case"details":Le("toggle",t),i=n;break;case"input":Bp(t,n),i=mh(t,n),Le("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Xe({},n,{value:void 0}),Le("invalid",t);break;case"textarea":Up(t,n),i=xh(t,n),Le("invalid",t);break;default:i=n}Ah(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="style"?sm(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&om(t,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&hs(t,u):typeof u=="number"&&hs(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(fs.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Le("scroll",t):u!=null&&$d(t,o,u,a))}switch(r){case"input":Iu(t),Vp(t,n,!1);break;case"textarea":Iu(t),jp(t);break;case"option":n.value!=null&&t.setAttribute("value",""+li(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Oo(t,!!n.multiple,o,!1):n.defaultValue!=null&&Oo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Tl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)P_(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(H(166));if(r=bi(As.current),bi(qr.current),bu(e)){if(n=e.stateNode,r=e.memoizedProps,n[Gr]=e,(o=n.nodeValue!==r)&&(t=dr,t!==null))switch(t.tag){case 3:Nu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nu(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Gr]=e,e.stateNode=n}return kt(e),null;case 13:if(Ve(Ge),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&hr!==null&&e.mode&1&&!(e.flags&128))Km(),zo(),e.flags|=98560,o=!1;else if(o=bu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(H(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(H(317));o[Gr]=e}else zo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),o=!1}else Mr!==null&&(id(Mr),Mr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?ct===0&&(ct=3):R0())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return Wo(),Yh(t,e),t===null&&_s(e.stateNode.containerInfo),kt(e),null;case 10:return f0(e.type._context),kt(e),null;case 17:return ar(e.type)&&Rl(),kt(e),null;case 19:if(Ve(Ge),o=e.memoizedState,o===null)return kt(e),null;if(n=(e.flags&128)!==0,a=o.rendering,a===null)if(n)Na(o,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ml(t),a!==null){for(e.flags|=128,Na(o,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ne(Ge,Ge.current&1|2),e.child}t=t.sibling}o.tail!==null&&Je()>$o&&(e.flags|=128,n=!0,Na(o,!1),e.lanes=4194304)}else{if(!n)if(t=Ml(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Na(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!je)return kt(e),null}else 2*Je()-o.renderingStartTime>$o&&r!==1073741824&&(e.flags|=128,n=!0,Na(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Je(),e.sibling=null,r=Ge.current,Ne(Ge,n?r&1|2:r&1),e):(kt(e),null);case 22:case 23:return T0(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?fr&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function vI(t,e){switch(s0(e),e.tag){case 1:return ar(e.type)&&Rl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wo(),Ve(or),Ve(jt),g0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return v0(e),null;case 13:if(Ve(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));zo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Ge),null;case 4:return Wo(),null;case 10:return f0(e.type._context),null;case 22:case 23:return T0(),null;case 24:return null;default:return null}}var Lu=!1,Vt=!1,gI=typeof WeakSet=="function"?WeakSet:Set,K=null;function Eo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ye(t,e,n)}else r.current=null}function Qh(t,e,r){try{r()}catch(n){Ye(t,e,n)}}var Pv=!1;function yI(t,e){if(kh=Il,t=Mm(),o0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,u=-1,l=0,f=0,h=t,d=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(s=a+i),h!==o||n!==0&&h.nodeType!==3||(u=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===r&&++l===i&&(s=a),d===o&&++f===n&&(u=a),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}r=s===-1||u===-1?null:{start:s,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Mh={focusedElem:t,selectionRange:r},Il=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,I=g.memoizedState,_=e.stateNode,m=_.getSnapshotBeforeUpdate(e.elementType===e.type?w:br(e.type,w),I);_.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(P){Ye(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return g=Pv,Pv=!1,g}function ns(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Qh(e,r,o)}i=i.next}while(i!==n)}}function xc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Zh(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function D_(t){var e=t.alternate;e!==null&&(t.alternate=null,D_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gr],delete e[xs],delete e[Bh],delete e[JA],delete e[eI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N_(t){return t.tag===5||t.tag===3||t.tag===4}function Dv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jh(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Tl));else if(n!==4&&(t=t.child,t!==null))for(Jh(t,e,r),t=t.sibling;t!==null;)Jh(t,e,r),t=t.sibling}function ed(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ed(t,e,r),t=t.sibling;t!==null;)ed(t,e,r),t=t.sibling}var Et=null,kr=!1;function Nn(t,e,r){for(r=r.child;r!==null;)b_(t,e,r),r=r.sibling}function b_(t,e,r){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(dc,r)}catch{}switch(r.tag){case 5:Vt||Eo(r,e);case 6:var n=Et,i=kr;Et=null,Nn(t,e,r),Et=n,kr=i,Et!==null&&(kr?(t=Et,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Et.removeChild(r.stateNode));break;case 18:Et!==null&&(kr?(t=Et,r=r.stateNode,t.nodeType===8?Mf(t.parentNode,r):t.nodeType===1&&Mf(t,r),gs(t)):Mf(Et,r.stateNode));break;case 4:n=Et,i=kr,Et=r.stateNode.containerInfo,kr=!0,Nn(t,e,r),Et=n,kr=i;break;case 0:case 11:case 14:case 15:if(!Vt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Qh(r,e,a),i=i.next}while(i!==n)}Nn(t,e,r);break;case 1:if(!Vt&&(Eo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Ye(r,e,s)}Nn(t,e,r);break;case 21:Nn(t,e,r);break;case 22:r.mode&1?(Vt=(n=Vt)||r.memoizedState!==null,Nn(t,e,r),Vt=n):Nn(t,e,r);break;default:Nn(t,e,r)}}function Nv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new gI),e.forEach(function(n){var i=SI.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Dr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:Et=s.stateNode,kr=!1;break e;case 3:Et=s.stateNode.containerInfo,kr=!0;break e;case 4:Et=s.stateNode.containerInfo,kr=!0;break e}s=s.return}if(Et===null)throw Error(H(160));b_(o,a,i),Et=null,kr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Ye(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)k_(e,t),e=e.sibling}function k_(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dr(e,t),Hr(t),n&4){try{ns(3,t,t.return),xc(3,t)}catch(w){Ye(t,t.return,w)}try{ns(5,t,t.return)}catch(w){Ye(t,t.return,w)}}break;case 1:Dr(e,t),Hr(t),n&512&&r!==null&&Eo(r,r.return);break;case 5:if(Dr(e,t),Hr(t),n&512&&r!==null&&Eo(r,r.return),t.flags&32){var i=t.stateNode;try{hs(i,"")}catch(w){Ye(t,t.return,w)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=r!==null?r.memoizedProps:o,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&rm(i,o),Ih(s,a);var l=Ih(s,o);for(a=0;a<u.length;a+=2){var f=u[a],h=u[a+1];f==="style"?sm(i,h):f==="dangerouslySetInnerHTML"?om(i,h):f==="children"?hs(i,h):$d(i,f,h,l)}switch(s){case"input":_h(i,o);break;case"textarea":nm(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Oo(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?Oo(i,!!o.multiple,o.defaultValue,!0):Oo(i,!!o.multiple,o.multiple?[]:"",!1))}i[xs]=o}catch(w){Ye(t,t.return,w)}}break;case 6:if(Dr(e,t),Hr(t),n&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(w){Ye(t,t.return,w)}}break;case 3:if(Dr(e,t),Hr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gs(e.containerInfo)}catch(w){Ye(t,t.return,w)}break;case 4:Dr(e,t),Hr(t);break;case 13:Dr(e,t),Hr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(C0=Je())),n&4&&Nv(t);break;case 22:if(f=r!==null&&r.memoizedState!==null,t.mode&1?(Vt=(l=Vt)||f,Dr(e,t),Vt=l):Dr(e,t),Hr(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!f&&t.mode&1)for(K=t,f=t.child;f!==null;){for(h=K=f;K!==null;){switch(d=K,p=d.child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Eo(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(w){Ye(n,r,w)}}break;case 5:Eo(d,d.return);break;case 22:if(d.memoizedState!==null){kv(h);continue}}p!==null?(p.return=d,K=p):kv(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{i=h.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=h.stateNode,u=h.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=am("display",a))}catch(w){Ye(t,t.return,w)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(w){Ye(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dr(e,t),Hr(t),n&4&&Nv(t);break;case 21:break;default:Dr(e,t),Hr(t)}}function Hr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(N_(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(hs(i,""),n.flags&=-33);var o=Dv(t);ed(t,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=Dv(t);Jh(t,s,a);break;default:throw Error(H(161))}}catch(u){Ye(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mI(t,e,r){K=t,M_(t)}function M_(t,e,r){for(var n=(t.mode&1)!==0;K!==null;){var i=K,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Lu;if(!a){var s=i.alternate,u=s!==null&&s.memoizedState!==null||Vt;s=Lu;var l=Vt;if(Lu=a,(Vt=u)&&!l)for(K=i;K!==null;)a=K,u=a.child,a.tag===22&&a.memoizedState!==null?Mv(i):u!==null?(u.return=a,K=u):Mv(i);for(;o!==null;)K=o,M_(o),o=o.sibling;K=i,Lu=s,Vt=l}bv(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,K=o):bv(t)}}function bv(t){for(;K!==null;){var e=K;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||xc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Vt)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:br(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&yv(e,o,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}yv(e,a,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var f=l.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&gs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Vt||e.flags&512&&Zh(e)}catch(d){Ye(e,e.return,d)}}if(e===t){K=null;break}if(r=e.sibling,r!==null){r.return=e.return,K=r;break}K=e.return}}function kv(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var r=e.sibling;if(r!==null){r.return=e.return,K=r;break}K=e.return}}function Mv(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{xc(4,e)}catch(u){Ye(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){Ye(e,i,u)}}var o=e.return;try{Zh(e)}catch(u){Ye(e,o,u)}break;case 5:var a=e.return;try{Zh(e)}catch(u){Ye(e,a,u)}}}catch(u){Ye(e,e.return,u)}if(e===t){K=null;break}var s=e.sibling;if(s!==null){s.return=e.return,K=s;break}K=e.return}}var _I=Math.ceil,Bl=Tn.ReactCurrentDispatcher,A0=Tn.ReactCurrentOwner,Sr=Tn.ReactCurrentBatchConfig,me=0,mt=null,tt=null,St=0,fr=0,Ao=gi(0),ct=0,Ts=null,Hi=0,Ec=0,I0=0,is=null,rr=null,C0=0,$o=1/0,ln=null,Vl=!1,td=null,ei=null,Fu=!1,$n=null,Ul=0,os=0,rd=null,il=-1,ol=0;function Qt(){return me&6?Je():il!==-1?il:il=Je()}function ti(t){return t.mode&1?me&2&&St!==0?St&-St:rI.transition!==null?(ol===0&&(ol=_m()),ol):(t=Te,t!==0||(t=window.event,t=t===void 0?16:Sm(t.type)),t):1}function Ur(t,e,r,n){if(50<os)throw os=0,rd=null,Error(H(185));Bs(t,r,n),(!(me&2)||t!==mt)&&(t===mt&&(!(me&2)&&(Ec|=r),ct===4&&Un(t,St)),sr(t,n),r===1&&me===0&&!(e.mode&1)&&($o=Je()+500,mc&&yi()))}function sr(t,e){var r=t.callbackNode;rA(t,e);var n=Al(t,t===mt?St:0);if(n===0)r!==null&&Wp(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Wp(r),e===1)t.tag===0?tI(Lv.bind(null,t)):Gm(Lv.bind(null,t)),QA(function(){!(me&6)&&yi()}),r=null;else{switch(wm(n)){case 1:r=Qd;break;case 4:r=ym;break;case 16:r=El;break;case 536870912:r=mm;break;default:r=El}r=H_(r,L_.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function L_(t,e){if(il=-1,ol=0,me&6)throw Error(H(327));var r=t.callbackNode;if(ko()&&t.callbackNode!==r)return null;var n=Al(t,t===mt?St:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=jl(t,n);else{e=n;var i=me;me|=2;var o=B_();(mt!==t||St!==e)&&(ln=null,$o=Je()+500,Li(t,e));do try{EI();break}catch(s){F_(t,s)}while(!0);c0(),Bl.current=o,me=i,tt!==null?e=0:(mt=null,St=0,e=ct)}if(e!==0){if(e===2&&(i=Oh(t),i!==0&&(n=i,e=nd(t,i))),e===1)throw r=Ts,Li(t,0),Un(t,n),sr(t,Je()),r;if(e===6)Un(t,n);else{if(i=t.current.alternate,!(n&30)&&!wI(i)&&(e=jl(t,n),e===2&&(o=Oh(t),o!==0&&(n=o,e=nd(t,o))),e===1))throw r=Ts,Li(t,0),Un(t,n),sr(t,Je()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(H(345));case 2:Ri(t,rr,ln);break;case 3:if(Un(t,n),(n&130023424)===n&&(e=C0+500-Je(),10<e)){if(Al(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Qt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Fh(Ri.bind(null,t,rr,ln),e);break}Ri(t,rr,ln);break;case 4:if(Un(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-Vr(n);o=1<<a,a=e[a],a>i&&(i=a),n&=~o}if(n=i,n=Je()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*_I(n/1960))-n,10<n){t.timeoutHandle=Fh(Ri.bind(null,t,rr,ln),n);break}Ri(t,rr,ln);break;case 5:Ri(t,rr,ln);break;default:throw Error(H(329))}}}return sr(t,Je()),t.callbackNode===r?L_.bind(null,t):null}function nd(t,e){var r=is;return t.current.memoizedState.isDehydrated&&(Li(t,e).flags|=256),t=jl(t,e),t!==2&&(e=rr,rr=r,e!==null&&id(e)),t}function id(t){rr===null?rr=t:rr.push.apply(rr,t)}function wI(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!jr(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Un(t,e){for(e&=~I0,e&=~Ec,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Vr(e),n=1<<r;t[r]=-1,e&=~n}}function Lv(t){if(me&6)throw Error(H(327));ko();var e=Al(t,0);if(!(e&1))return sr(t,Je()),null;var r=jl(t,e);if(t.tag!==0&&r===2){var n=Oh(t);n!==0&&(e=n,r=nd(t,n))}if(r===1)throw r=Ts,Li(t,0),Un(t,e),sr(t,Je()),r;if(r===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ri(t,rr,ln),sr(t,Je()),null}function S0(t,e){var r=me;me|=1;try{return t(e)}finally{me=r,me===0&&($o=Je()+500,mc&&yi())}}function Wi(t){$n!==null&&$n.tag===0&&!(me&6)&&ko();var e=me;me|=1;var r=Sr.transition,n=Te;try{if(Sr.transition=null,Te=1,t)return t()}finally{Te=n,Sr.transition=r,me=e,!(me&6)&&yi()}}function T0(){fr=Ao.current,Ve(Ao)}function Li(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,YA(r)),tt!==null)for(r=tt.return;r!==null;){var n=r;switch(s0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Rl();break;case 3:Wo(),Ve(or),Ve(jt),g0();break;case 5:v0(n);break;case 4:Wo();break;case 13:Ve(Ge);break;case 19:Ve(Ge);break;case 10:f0(n.type._context);break;case 22:case 23:T0()}r=r.return}if(mt=t,tt=t=ri(t.current,null),St=fr=e,ct=0,Ts=null,I0=Ec=Hi=0,rr=is=null,Ni!==null){for(e=0;e<Ni.length;e++)if(r=Ni[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}Ni=null}return t}function F_(t,e){do{var r=tt;try{if(c0(),tl.current=Fl,Ll){for(var n=$e.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ll=!1}if(zi=0,gt=ot=$e=null,rs=!1,Is=0,A0.current=null,r===null||r.return===null){ct=1,Ts=e,tt=null;break}e:{var o=t,a=r.return,s=r,u=e;if(e=St,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,f=s,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=Av(a);if(p!==null){p.flags&=-257,Iv(p,a,s,o,e),p.mode&1&&Ev(o,l,e),e=p,u=l;var g=e.updateQueue;if(g===null){var w=new Set;w.add(u),e.updateQueue=w}else g.add(u);break e}else{if(!(e&1)){Ev(o,l,e),R0();break e}u=Error(H(426))}}else if(je&&s.mode&1){var I=Av(a);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Iv(I,a,s,o,e),u0(Go(u,s));break e}}o=u=Go(u,s),ct!==4&&(ct=2),is===null?is=[o]:is.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=w_(o,u,e);gv(o,_);break e;case 1:s=u;var m=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ei===null||!ei.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var P=x_(o,s,e);gv(o,P);break e}}o=o.return}while(o!==null)}U_(r)}catch(k){e=k,tt===r&&r!==null&&(tt=r=r.return);continue}break}while(!0)}function B_(){var t=Bl.current;return Bl.current=Fl,t===null?Fl:t}function R0(){(ct===0||ct===3||ct===2)&&(ct=4),mt===null||!(Hi&268435455)&&!(Ec&268435455)||Un(mt,St)}function jl(t,e){var r=me;me|=2;var n=B_();(mt!==t||St!==e)&&(ln=null,Li(t,e));do try{xI();break}catch(i){F_(t,i)}while(!0);if(c0(),me=r,Bl.current=n,tt!==null)throw Error(H(261));return mt=null,St=0,ct}function xI(){for(;tt!==null;)V_(tt)}function EI(){for(;tt!==null&&!XE();)V_(tt)}function V_(t){var e=z_(t.alternate,t,fr);t.memoizedProps=t.pendingProps,e===null?U_(t):tt=e,A0.current=null}function U_(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=vI(r,e),r!==null){r.flags&=32767,tt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,tt=null;return}}else if(r=pI(r,e,fr),r!==null){tt=r;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);ct===0&&(ct=5)}function Ri(t,e,r){var n=Te,i=Sr.transition;try{Sr.transition=null,Te=1,AI(t,e,r,n)}finally{Sr.transition=i,Te=n}return null}function AI(t,e,r,n){do ko();while($n!==null);if(me&6)throw Error(H(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(nA(t,o),t===mt&&(tt=mt=null,St=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Fu||(Fu=!0,H_(El,function(){return ko(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Sr.transition,Sr.transition=null;var a=Te;Te=1;var s=me;me|=4,A0.current=null,yI(t,r),k_(r,t),HA(Mh),Il=!!kh,Mh=kh=null,t.current=r,mI(r),KE(),me=s,Te=a,Sr.transition=o}else t.current=r;if(Fu&&(Fu=!1,$n=t,Ul=i),o=t.pendingLanes,o===0&&(ei=null),QE(r.stateNode),sr(t,Je()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,t=td,td=null,t;return Ul&1&&t.tag!==0&&ko(),o=t.pendingLanes,o&1?t===rd?os++:(os=0,rd=t):os=0,yi(),null}function ko(){if($n!==null){var t=wm(Ul),e=Sr.transition,r=Te;try{if(Sr.transition=null,Te=16>t?16:t,$n===null)var n=!1;else{if(t=$n,$n=null,Ul=0,me&6)throw Error(H(331));var i=me;for(me|=4,K=t.current;K!==null;){var o=K,a=o.child;if(K.flags&16){var s=o.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(K=l;K!==null;){var f=K;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(h!==null)h.return=f,K=h;else for(;K!==null;){f=K;var d=f.sibling,p=f.return;if(D_(f),f===l){K=null;break}if(d!==null){d.return=p,K=d;break}K=p}}}var g=o.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var I=w.sibling;w.sibling=null,w=I}while(w!==null)}}K=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,K=a;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,K=_;break e}K=o.return}}var m=t.current;for(K=m;K!==null;){a=K;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,K=x;else e:for(a=m;K!==null;){if(s=K,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:xc(9,s)}}catch(k){Ye(s,s.return,k)}if(s===a){K=null;break e}var P=s.sibling;if(P!==null){P.return=s.return,K=P;break e}K=s.return}}if(me=i,yi(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(dc,t)}catch{}n=!0}return n}finally{Te=r,Sr.transition=e}}return!1}function Fv(t,e,r){e=Go(r,e),e=w_(t,e,1),t=Jn(t,e,1),e=Qt(),t!==null&&(Bs(t,1,e),sr(t,e))}function Ye(t,e,r){if(t.tag===3)Fv(t,t,r);else for(;e!==null;){if(e.tag===3){Fv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ei===null||!ei.has(n))){t=Go(r,t),t=x_(e,t,1),e=Jn(e,t,1),t=Qt(),e!==null&&(Bs(e,1,t),sr(e,t));break}}e=e.return}}function II(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&r,mt===t&&(St&r)===r&&(ct===4||ct===3&&(St&130023424)===St&&500>Je()-C0?Li(t,0):I0|=r),sr(t,e)}function j_(t,e){e===0&&(t.mode&1?(e=Tu,Tu<<=1,!(Tu&130023424)&&(Tu=4194304)):e=1);var r=Qt();t=xn(t,e),t!==null&&(Bs(t,e,r),sr(t,r))}function CI(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),j_(t,r)}function SI(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(e),j_(t,r)}var z_;z_=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||or.current)ir=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ir=!1,dI(t,e,r);ir=!!(t.flags&131072)}else ir=!1,je&&e.flags&1048576&&$m(e,Dl,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;nl(t,e),t=e.pendingProps;var i=jo(e,jt.current);bo(e,r),i=m0(null,e,n,t,i,r);var o=_0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ar(n)?(o=!0,Ol(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,d0(e),i.updater=wc,e.stateNode=i,i._reactInternals=e,Wh(e,n,t,r),e=Xh(null,e,n,!0,o,r)):(e.tag=0,je&&o&&a0(e),Yt(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(nl(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=RI(n),t=br(n,t),i){case 0:e=$h(null,e,n,t,r);break e;case 1:e=Tv(null,e,n,t,r);break e;case 11:e=Cv(null,e,n,t,r);break e;case 14:e=Sv(null,e,n,br(n.type,t),r);break e}throw Error(H(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:br(n,i),$h(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:br(n,i),Tv(t,e,n,i,r);case 3:e:{if(C_(e),t===null)throw Error(H(387));n=e.pendingProps,o=e.memoizedState,i=o.element,Zm(t,e),kl(e,n,null,r);var a=e.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Go(Error(H(423)),e),e=Rv(t,e,n,r,i);break e}else if(n!==i){i=Go(Error(H(424)),e),e=Rv(t,e,n,r,i);break e}else for(hr=Zn(e.stateNode.containerInfo.firstChild),dr=e,je=!0,Mr=null,r=Ym(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(zo(),n===i){e=En(t,e,r);break e}Yt(t,e,n,r)}e=e.child}return e;case 5:return Jm(e),t===null&&jh(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,Lh(n,i)?a=null:o!==null&&Lh(n,o)&&(e.flags|=32),I_(t,e),Yt(t,e,a,r),e.child;case 6:return t===null&&jh(e),null;case 13:return S_(t,e,r);case 4:return p0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ho(e,null,n,r):Yt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:br(n,i),Cv(t,e,n,i,r);case 7:return Yt(t,e,e.pendingProps,r),e.child;case 8:return Yt(t,e,e.pendingProps.children,r),e.child;case 12:return Yt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Ne(Nl,n._currentValue),n._currentValue=a,o!==null)if(jr(o.value,a)){if(o.children===i.children&&!or.current){e=En(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var u=s.firstContext;u!==null;){if(u.context===n){if(o.tag===1){u=gn(-1,r&-r),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),zh(o.return,r,e),s.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(H(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),zh(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Yt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,bo(e,r),i=Rr(i),n=n(i),e.flags|=1,Yt(t,e,n,r),e.child;case 14:return n=e.type,i=br(n,e.pendingProps),i=br(n.type,i),Sv(t,e,n,i,r);case 15:return E_(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:br(n,i),nl(t,e),e.tag=1,ar(n)?(t=!0,Ol(e)):t=!1,bo(e,r),__(e,n,i),Wh(e,n,i,r),Xh(null,e,n,!0,t,r);case 19:return T_(t,e,r);case 22:return A_(t,e,r)}throw Error(H(156,e.tag))};function H_(t,e){return gm(t,e)}function TI(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(t,e,r,n){return new TI(t,e,r,n)}function O0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RI(t){if(typeof t=="function")return O0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kd)return 11;if(t===qd)return 14}return 2}function ri(t,e){var r=t.alternate;return r===null?(r=Ir(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function al(t,e,r,n,i,o){var a=2;if(n=t,typeof t=="function")O0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ho:return Fi(r.children,i,o,e);case Xd:a=8,i|=8;break;case ph:return t=Ir(12,r,e,i|2),t.elementType=ph,t.lanes=o,t;case vh:return t=Ir(13,r,e,i),t.elementType=vh,t.lanes=o,t;case gh:return t=Ir(19,r,e,i),t.elementType=gh,t.lanes=o,t;case Jy:return Ac(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qy:a=10;break e;case Zy:a=9;break e;case Kd:a=11;break e;case qd:a=14;break e;case Ln:a=16,n=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Ir(a,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function Fi(t,e,r,n){return t=Ir(7,t,n,e),t.lanes=r,t}function Ac(t,e,r,n){return t=Ir(22,t,n,e),t.elementType=Jy,t.lanes=r,t.stateNode={isHidden:!1},t}function Hf(t,e,r){return t=Ir(6,t,null,e),t.lanes=r,t}function Wf(t,e,r){return e=Ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OI(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=If(0),this.expirationTimes=If(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=If(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function P0(t,e,r,n,i,o,a,s,u){return t=new OI(t,e,r,s,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ir(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},d0(o),t}function PI(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function W_(t){if(!t)return ci;t=t._reactInternals;e:{if(Zi(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ar(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var r=t.type;if(ar(r))return Wm(t,r,e)}return e}function G_(t,e,r,n,i,o,a,s,u){return t=P0(r,n,!0,t,i,o,a,s,u),t.context=W_(null),r=t.current,n=Qt(),i=ti(r),o=gn(n,i),o.callback=e??null,Jn(r,o,i),t.current.lanes=i,Bs(t,i,n),sr(t,n),t}function Ic(t,e,r,n){var i=e.current,o=Qt(),a=ti(i);return r=W_(r),e.context===null?e.context=r:e.pendingContext=r,e=gn(o,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Jn(i,e,a),t!==null&&(Ur(t,i,a,o),el(t,i,a)),a}function zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function D0(t,e){Bv(t,e),(t=t.alternate)&&Bv(t,e)}function DI(){return null}var $_=typeof reportError=="function"?reportError:function(t){console.error(t)};function N0(t){this._internalRoot=t}Cc.prototype.render=N0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Ic(t,e,null,null)};Cc.prototype.unmount=N0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wi(function(){Ic(null,t,null,null)}),e[wn]=null}};function Cc(t){this._internalRoot=t}Cc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Am();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Vn.length&&e!==0&&e<Vn[r].priority;r++);Vn.splice(r,0,t),r===0&&Cm(t)}};function b0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vv(){}function NI(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var l=zl(a);o.call(l)}}var a=G_(e,n,t,0,null,!1,!1,"",Vv);return t._reactRootContainer=a,t[wn]=a.current,_s(t.nodeType===8?t.parentNode:t),Wi(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var l=zl(u);s.call(l)}}var u=P0(t,0,!1,null,null,!1,!1,"",Vv);return t._reactRootContainer=u,t[wn]=u.current,_s(t.nodeType===8?t.parentNode:t),Wi(function(){Ic(e,u,r,n)}),u}function Tc(t,e,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var u=zl(a);s.call(u)}}Ic(e,a,t,i)}else a=NI(r,e,t,i,n);return zl(a)}xm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ua(e.pendingLanes);r!==0&&(Zd(e,r|1),sr(e,Je()),!(me&6)&&($o=Je()+500,yi()))}break;case 13:Wi(function(){var n=xn(t,1);if(n!==null){var i=Qt();Ur(n,t,1,i)}}),D0(t,1)}};Jd=function(t){if(t.tag===13){var e=xn(t,134217728);if(e!==null){var r=Qt();Ur(e,t,134217728,r)}D0(t,134217728)}};Em=function(t){if(t.tag===13){var e=ti(t),r=xn(t,e);if(r!==null){var n=Qt();Ur(r,t,e,n)}D0(t,e)}};Am=function(){return Te};Im=function(t,e){var r=Te;try{return Te=t,e()}finally{Te=r}};Sh=function(t,e,r){switch(e){case"input":if(_h(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=yc(n);if(!i)throw Error(H(90));tm(n),_h(n,i)}}}break;case"textarea":nm(t,r);break;case"select":e=r.value,e!=null&&Oo(t,!!r.multiple,e,!1)}};cm=S0;fm=Wi;var bI={usingClientEntryPoint:!1,Events:[Us,yo,yc,um,lm,S0]},ba={findFiberByHostInstance:Di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kI={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pm(t),t===null?null:t.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||DI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{dc=Bu.inject(kI),Kr=Bu}catch{}}gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bI;gr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b0(e))throw Error(H(200));return PI(t,e,null,r)};gr.createRoot=function(t,e){if(!b0(t))throw Error(H(299));var r=!1,n="",i=$_;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=P0(t,1,!1,null,null,r,!1,n,i),t[wn]=e.current,_s(t.nodeType===8?t.parentNode:t),new N0(e)};gr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=pm(e),t=t===null?null:t.stateNode,t};gr.flushSync=function(t){return Wi(t)};gr.hydrate=function(t,e,r){if(!Sc(e))throw Error(H(200));return Tc(null,t,e,!0,r)};gr.hydrateRoot=function(t,e,r){if(!b0(t))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=$_;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=G_(e,null,t,1,r??null,i,!1,o,a),t[wn]=e.current,_s(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Cc(e)};gr.render=function(t,e,r){if(!Sc(e))throw Error(H(200));return Tc(null,t,e,!1,r)};gr.unmountComponentAtNode=function(t){if(!Sc(t))throw Error(H(40));return t._reactRootContainer?(Wi(function(){Tc(null,null,t,!1,function(){t._reactRootContainer=null,t[wn]=null})}),!0):!1};gr.unstable_batchedUpdates=S0;gr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Sc(r))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Tc(t,e,r,!1,n)};gr.version="18.3.1-next-f1338f8080-20240426";function X_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X_)}catch(t){console.error(t)}}X_(),Xy.exports=gr;var MI=Xy.exports,Uv=MI;hh.createRoot=Uv.createRoot,hh.hydrateRoot=Uv.hydrateRoot;function LI(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function FI(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var BI=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),VI=function(t){BI(e,t);function e(r,n){var i=this.constructor,o=t.call(this,r,n)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),LI(o,i.prototype),FI(o),o}return e}(Error),UI=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lr=function(t){UI(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(VI),jI=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qe=function(t){jI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(lr),zI=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),J=function(t){zI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(lr),K_=function(){function t(e){if(this.binarizer=e,e===null)throw new J("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,i){var o=this.binarizer.getLuminanceSource().crop(e,r,n,i);return new t(this.binarizer.createBinarizer(o))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),HI=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rt=function(t){HI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(lr),WI=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),be=function(){function t(){}return t.arraycopy=function(e,r,n,i,o){for(;o--;)n[i++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),GI=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k0=function(t){GI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(lr),$I=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jv=function(t){$I(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var i=t.call(this,n)||this;return i.index=r,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e}(k0),XI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ut=function(){function t(){}return t.fill=function(e,r){for(var n=0,i=e.length;n<i;n++)e[n]=r},t.fillWithin=function(e,r,n,i){t.rangeCheck(e.length,r,n);for(var o=r;o<n;o++)e[o]=i},t.rangeCheck=function(e,r,n){if(r>n)throw new J("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new jv(r);if(n>e)throw new jv(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var i=1;try{for(var o=XI(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=31*i+s}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var i=n-r,o=new Int32Array(i);return be.arraycopy(e,r,o,0,i),o},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var i=0,o=e.length-1;i<=o;){var a=o+i>>1,s=n(r,e[a]);if(s>0)i=a+1;else if(s<0)o=a-1;else return a}return-i-1},t.numberComparator=function(e,r){return e-r},t}(),le=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),yt=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);be.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),o=n[i];o&=~((1<<(e&31))-1);for(var a=n.length;o===0;){if(++i===a)return r;o=n[i]}var s=i*32+le.numberOfTrailingZeros(o);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),o=~n[i];o&=~((1<<(e&31))-1);for(var a=n.length;o===0;){if(++i===a)return r;o=~n[i]}var s=i*32+le.numberOfTrailingZeros(o);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new J;if(r!==e){r--;for(var n=Math.floor(e/32),i=Math.floor(r/32),o=this.bits,a=n;a<=i;a++){var s=a>n?0:e&31,u=a<i?31:r&31,l=(2<<u)-(1<<s);o[a]|=l}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new J;if(r===e)return!0;r--;for(var i=Math.floor(e/32),o=Math.floor(r/32),a=this.bits,s=i;s<=o;s++){var u=s>i?0:e&31,l=s<o?31:r&31,f=(2<<l)-(1<<u)&4294967295;if((a[s]&f)!==(n?f:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new J("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new J("Sizes don't match");for(var r=this.bits,n=0,i=r.length;n<i;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,i){for(var o=0;o<i;o++){for(var a=0,s=0;s<8;s++)this.get(e)&&(a|=1<<7-s),e++;r[n+o]=a}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,i=this.bits,o=0;o<n;o++){var a=i[o];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,e[r-o]=a}if(this.size!==n*32){for(var s=n*32-this.size,u=e[0]>>>s,o=1;o<n;o++){var l=e[o];u|=l<<32-s,e[o-1]=u,u=l>>>s}e[n-1]=u}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&ut.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+ut.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),od;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(od||(od={}));const ke=od;var KI=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W=function(t){KI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(lr),qI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ce;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Ce||(Ce={}));var st=function(){function t(e,r,n){for(var i,o,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=a,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var u=this.values,l=0,f=u.length;l!==f;l++){var h=u[l];t.VALUES_TO_ECI.set(h,this)}try{for(var d=qI(a),p=d.next();!p.done;p=d.next()){var g=p.value;t.NAME_TO_ECI.set(g,this)}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new W("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new W("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new W("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Ce.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Ce.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Ce.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Ce.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Ce.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Ce.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Ce.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Ce.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Ce.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Ce.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Ce.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Ce.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Ce.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Ce.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Ce.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Ce.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Ce.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Ce.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Ce.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Ce.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Ce.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Ce.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Ce.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Ce.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Ce.Big5,28,"Big5"),t.GB18030=new t(Ce.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Ce.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),YI=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sl=function(t){YI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(lr),Tr=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof st?e:st.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var i="",o=0,a=e.length;o<a;o++){var s=e[o].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(n.equals(st.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new sl("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(st.UTF8)||e.equals(st.ISO8859_1)||e.equals(st.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),i=[],o=0;o<n.length;o++)i.push(n[o].charCodeAt(0));return new Uint8Array(i)},t}(),ge=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return Tr.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(ke.CHARACTER_SET)!==void 0)return r.get(ke.CHARACTER_SET).toString();for(var n=e.length,i=!0,o=!0,a=!0,s=0,u=0,l=0,f=0,h=0,d=0,p=0,g=0,w=0,I=0,_=0,m=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,x=0;x<n&&(i||o||a);x++){var P=e[x]&255;a&&(s>0?P&128?s--:a=!1:P&128&&(P&64?(s++,P&32?(s++,P&16?(s++,P&8?a=!1:f++):l++):u++):a=!1)),i&&(P>127&&P<160?i=!1:P>159&&(P<192||P===215||P===247)&&_++),o&&(h>0?P<64||P===127||P>252?o=!1:h--:P===128||P===160||P>239?o=!1:P>160&&P<224?(d++,g=0,p++,p>w&&(w=p)):P>127?(h++,p=0,g++,g>I&&(I=g)):(p=0,g=0))}return a&&s>0&&(a=!1),o&&h>0&&(o=!1),a&&(m||u+l+f>0)?t.UTF8:o&&(t.ASSUME_SHIFT_JIS||w>=3||I>=3)?t.SHIFT_JIS:i&&o?w===2&&d===2||_*10>=n?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:o?t.SHIFT_JIS:a?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=-1;function o(s,u,l,f,h,d){if(s==="%%")return"%";if(r[++i]!==void 0){s=f?parseInt(f.substr(1)):void 0;var p=h?parseInt(h.substr(1)):void 0,g;switch(d){case"s":g=r[i];break;case"c":g=r[i][0];break;case"f":g=parseFloat(r[i]).toFixed(s);break;case"p":g=parseFloat(r[i]).toPrecision(s);break;case"e":g=parseFloat(r[i]).toExponential(s);break;case"x":g=parseInt(r[i]).toString(p||16);break;case"d":g=parseFloat(parseInt(r[i],p||10).toPrecision(s)).toFixed(0);break}g=typeof g=="object"?JSON.stringify(g):(+g).toString(p);for(var w=parseInt(l),I=l&&l[0]+""=="0"?"0":" ";g.length<w;)g=u!==void 0?g+I:I+g;return g}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)},t.getBytes=function(e,r){return Tr.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=st.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=st.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=st.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),ue=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ge.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var i=r;r<r+n;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),tn=function(){function t(e,r,n,i){if(this.width=e,this.height=r,this.rowSize=n,this.bits=i,r==null&&(r=e),this.height=r,e<1||r<1)throw new J("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,i=new t(n,r),o=0;o<r;o++)for(var a=e[o],s=0;s<n;s++)a[s]&&i.set(s,o);return i},t.parseFromString=function(e,r,n){if(e===null)throw new J("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,a=0,s=-1,u=0,l=0;l<e.length;)if(e.charAt(l)===`
`||e.charAt(l)==="\r"){if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new J("row lengths do not match");a=o,u++}l++}else if(e.substring(l,l+r.length)===r)l+=r.length,i[o]=!0,o++;else if(e.substring(l,l+n.length)===n)l+=n.length,i[o]=!1,o++;else throw new J("illegal character encountered: "+e.substring(l));if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new J("row lengths do not match");u++}for(var f=new t(s,u),h=0;h<o;h++)i[h]&&f.set(Math.floor(h%s),Math.floor(h/s));return f},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new J("input matrix dimensions do not match");for(var r=new yt(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,o=0,a=this.height;o<a;o++)for(var s=o*n,u=e.getRow(o,r).getBitArray(),l=0;l<n;l++)i[s+l]^=u[l]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,i){if(r<0||e<0)throw new J("Left and top must be nonnegative");if(i<1||n<1)throw new J("Height and width must be at least 1");var o=e+n,a=r+i;if(a>this.height||o>this.width)throw new J("The region must fit inside the matrix");for(var s=this.rowSize,u=this.bits,l=r;l<a;l++)for(var f=l*s,h=e;h<o;h++)u[f+Math.floor(h/32)]|=1<<(h&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new yt(this.width):r.clear();for(var n=this.rowSize,i=this.bits,o=e*n,a=0;a<n;a++)r.setBulk(a*32,i[o+a]);return r},t.prototype.setRow=function(e,r){be.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new yt(e),i=new yt(e),o=0,a=Math.floor((r+1)/2);o<a;o++)n=this.getRow(o,n),i=this.getRow(r-1-o,i),n.reverse(),i.reverse(),this.setRow(o,i),this.setRow(r-1-o,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,i=this.bits,o=e,a=r,s=-1,u=-1,l=0;l<r;l++)for(var f=0;f<n;f++){var h=i[l*n+f];if(h!==0){if(l<a&&(a=l),l>u&&(u=l),f*32<o){for(var d=0;!(h<<31-d&4294967295);)d++;f*32+d<o&&(o=f*32+d)}if(f*32+31>s){for(var d=31;!(h>>>d);)d--;f*32+d>s&&(s=f*32+d)}}}return s<o||u<a?null:Int32Array.from([o,a,s-o+1,u-a+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var i=n/e,o=n%e*32,a=r[n],s=0;!(a<<31-s&4294967295);)s++;return o+=s,Int32Array.from([o,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),o=Math.floor(n%e)*32,a=r[n],s=31;!(a>>>s);)s--;return o+=s,Int32Array.from([o,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&ut.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ut.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var i=new ue,o=0,a=this.height;o<a;o++){for(var s=0,u=this.width;s<u;s++)i.append(this.get(s,o)?e:r);i.append(n)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),QI=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V=function(t){QI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(lr),ZI=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JI=function(t){ZI(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var i=this.getLuminanceSource(),o=i.getWidth();n==null||n.getSize()<o?n=new yt(o):n.clear(),this.initArrays(o);for(var a=i.getRow(r,this.luminances),s=this.buckets,u=0;u<o;u++)s[(a[u]&255)>>e.LUMINANCE_SHIFT]++;var l=e.estimateBlackPoint(s);if(o<3)for(var u=0;u<o;u++)(a[u]&255)<l&&n.set(u);else for(var f=a[0]&255,h=a[1]&255,u=1;u<o-1;u++){var d=a[u+1]&255;(h*4-f-d)/2<l&&n.set(u),f=h,h=d}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight(),o=new tn(n,i);this.initArrays(n);for(var a=this.buckets,s=1;s<5;s++)for(var u=Math.floor(i*s/5),l=r.getRow(u,this.luminances),f=Math.floor(n*4/5),h=Math.floor(n/5);h<f;h++){var d=l[h]&255;a[d>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(a),g=r.getMatrix(),s=0;s<i;s++)for(var w=s*n,h=0;h<n;h++){var d=g[w+h]&255;d<p&&o.set(h,s)}return o},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(r){for(var n=r.length,i=0,o=0,a=0,s=0;s<n;s++)r[s]>a&&(o=s,a=r[s]),r[s]>i&&(i=r[s]);for(var u=0,l=0,s=0;s<n;s++){var f=s-o,h=r[s]*f*f;h>l&&(u=s,l=h)}if(o>u){var d=o;o=u,u=d}if(u-o<=n/16)throw new V;for(var p=u-1,g=-1,s=u-1;s>o;s--){var w=s-o,h=w*w*(u-s)*(i-r[s]);h>g&&(p=s,g=h)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(WI),eC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q_=function(t){eC(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=r.getMatrix(),a=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&a++;var s=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&s++;var u=e.calculateBlackPoints(o,a,s,n,i),l=new tn(n,i);e.calculateThresholdForBlock(o,a,s,n,i,u,l),this.matrix=l}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,i,o,a,s,u){for(var l=a-e.BLOCK_SIZE,f=o-e.BLOCK_SIZE,h=0;h<i;h++){var d=h<<e.BLOCK_SIZE_POWER;d>l&&(d=l);for(var p=e.cap(h,2,i-3),g=0;g<n;g++){var w=g<<e.BLOCK_SIZE_POWER;w>f&&(w=f);for(var I=e.cap(g,2,n-3),_=0,m=-2;m<=2;m++){var x=s[p+m];_+=x[I-2]+x[I-1]+x[I]+x[I+1]+x[I+2]}var P=_/25;e.thresholdBlock(r,w,d,P,o,u)}}},e.cap=function(r,n,i){return r<n?n:r>i?i:r},e.thresholdBlock=function(r,n,i,o,a,s){for(var u=0,l=i*a+n;u<e.BLOCK_SIZE;u++,l+=a)for(var f=0;f<e.BLOCK_SIZE;f++)(r[l+f]&255)<=o&&s.set(n+f,i+u)},e.calculateBlackPoints=function(r,n,i,o,a){for(var s=a-e.BLOCK_SIZE,u=o-e.BLOCK_SIZE,l=new Array(i),f=0;f<i;f++){l[f]=new Int32Array(n);var h=f<<e.BLOCK_SIZE_POWER;h>s&&(h=s);for(var d=0;d<n;d++){var p=d<<e.BLOCK_SIZE_POWER;p>u&&(p=u);for(var g=0,w=255,I=0,_=0,m=h*o+p;_<e.BLOCK_SIZE;_++,m+=o){for(var x=0;x<e.BLOCK_SIZE;x++){var P=r[m+x]&255;g+=P,P<w&&(w=P),P>I&&(I=P)}if(I-w>e.MIN_DYNAMIC_RANGE)for(_++,m+=o;_<e.BLOCK_SIZE;_++,m+=o)for(var x=0;x<e.BLOCK_SIZE;x++)g+=r[m+x]&255}var k=g>>e.BLOCK_SIZE_POWER*2;if(I-w<=e.MIN_DYNAMIC_RANGE&&(k=w/2,f>0&&d>0)){var M=(l[f-1][d]+2*l[f][d-1]+l[f-1][d-1])/4;w<M&&(k=M)}l[f][d]=k}}return l},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(JI),zs=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,i){throw new sl("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new sl("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new sl("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new ue,n=0;n<this.height;n++){for(var i=this.getRow(n,e),o=0;o<this.width;o++){var a=i[o]&255,s=void 0;a<64?s="#":a<128?s="+":a<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},t}(),tC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rc=function(t){tC(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var i=this.delegate.getRow(r,n),o=this.getWidth(),a=0;a<o;a++)i[a]=255-(i[a]&255);return i},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),o=0;o<n;o++)i[o]=255-(r[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,i,o){return new e(this.delegate.crop(r,n,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(zs),rC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nC=function(t){rC(e,t);function e(r,n){n===void 0&&(n=!1);var i=t.call(this,r.width,r.height)||this;return i.canvas=r,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(r,n),i}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var i=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,i,o){o===void 0&&(o=!1);var a=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var s=0,u=0,l=r.length;s<l;s+=4,u++){var f=void 0,h=r[s+3];if(h===0)f=255;else{var d=r[s],p=r[s+1],g=r[s+2];f=306*d+601*p+117*g+512>>10}a[u]=f}else for(var s=0,u=0,w=r.length;s<w;s+=4,u++){var f=void 0,h=r[s+3];if(h===0)f=255;else{var d=r[s],p=r[s+1],g=r[s+2];f=306*d+601*p+117*g+512>>10}a[u]=255-f}return a},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new J("Requested row is outside the image: "+r);var i=this.getWidth(),o=r*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,o){return t.prototype.crop.call(this,r,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),i=n.getContext("2d"),o=r*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*s),l=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*s);return n.width=u,n.height=l,i.translate(u/2,l/2),i.rotate(o),i.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Rc(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(zs),iC=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Xt=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(f){try{l(n.next(f))}catch(h){a(h)}}function u(f){try{l(n.throw(f))}catch(h){a(h)}}function l(f){f.done?o(f.value):i(f.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},Kt=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return u([l,f])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},oC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oa=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Xt(this,void 0,void 0,function(){var e,r,n,i,o,a,s,u,l,f,h,d;return Kt(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=oC(e),i=n.next();!i.done;i=n.next())o=i.value,a=o.kind==="video"?"videoinput":o.kind,a==="videoinput"&&(s=o.deviceId||o.id,u=o.label||"Video device "+(r.length+1),l=o.groupId,f={deviceId:s,label:u,kind:a,groupId:l},r.push(f))}catch(g){h={error:g}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(h)throw h.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Xt(this,void 0,void 0,function(){var e;return Kt(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new iC(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Xt(this,void 0,void 0,function(){var r;return Kt(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Xt(this,void 0,void 0,function(){return Kt(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Xt(this,void 0,void 0,function(){var n,i;return Kt(this,function(o){switch(o.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Xt(this,void 0,void 0,function(){var n;return Kt(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Xt(this,void 0,void 0,function(){var n,i;return Kt(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=o.sent(),[4,this.decodeOnce(n)];case 2:return i=o.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Xt(this,void 0,void 0,function(){return Kt(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Xt(this,void 0,void 0,function(){var i,o;return Kt(this,function(a){switch(a.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Xt(this,void 0,void 0,function(){var i;return Kt(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,r,n)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Xt(this,void 0,void 0,function(){var i;return Kt(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Xt(this,void 0,void 0,function(){var n;return Kt(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,i){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Xt(this,void 0,void 0,function(){return Kt(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Qe("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Qe("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Qe("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Qe("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Qe("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Qe("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Qe("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Qe("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Qe("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Qe("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,r);return n.src=e,i},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,i){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Xt(this,void 0,void 0,function(){return Kt(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Xt(this,void 0,void 0,function(){return Kt(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var i=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var o=function(a,s){if(i._stopAsyncDecode){s(new V("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);a(u)}catch(d){var l=r&&d instanceof V,f=d instanceof rt||d instanceof W,h=f&&n;if(l||h)return setTimeout(o,i._timeBetweenDecodingAttempts,a,s);s(d)}};return new Promise(function(a,s){return o(a,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var o=n.decode(e);r(o,null),setTimeout(i,n.timeBetweenScansMillis)}catch(u){r(null,u);var a=u instanceof rt||u instanceof W,s=u instanceof V;(a||s)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new nC(n,r),o=new q_(i);return new K_(o)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=i+"px",r.width=n,r.height=i,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),Ht=function(){function t(e,r,n,i,o,a){n===void 0&&(n=r==null?0:8*r.length),a===void 0&&(a=be.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=i,this.format=o,this.timestamp=a,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=i,this.format=o,this.resultMetadata=null,a==null?this.timestamp=be.currentTimeMillis():this.timestamp=a}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);be.arraycopy(r,0,n,0,r.length),be.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),ad;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ad||(ad={}));const Z=ad;var sd;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(sd||(sd={}));const Ct=sd;var Oc=function(){function t(e,r,n,i,o,a){o===void 0&&(o=-1),a===void 0&&(a=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=a,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),za=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new J;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),ni=function(){function t(e,r){if(r.length===0)throw new J;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),be.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var i=0,o=r.length;i!==o;i++){var a=r[i];n=za.addOrSubtract(n,a)}return n}n=r[0];for(var s=r.length,u=this.field,i=1;i<s;i++)n=za.addOrSubtract(u.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new J("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var o=new Int32Array(n.length),a=n.length-r.length;be.arraycopy(n,0,o,0,a);for(var s=a;s<n.length;s++)o[s]=za.addOrSubtract(r[s-a],n[s]);return new t(this.field,o)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new J("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,i=e.coefficients,o=i.length,a=new Int32Array(n+o-1),s=this.field,u=0;u<n;u++)for(var l=r[u],f=0;f<o;f++)a[u+f]=za.addOrSubtract(a[u+f],s.multiply(l,i[f]));return new t(s,a)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,i=new Int32Array(r),o=this.coefficients,a=0;a<r;a++)i[a]=n.multiply(o[a],e);return new t(n,i)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new J;if(r===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,o=new Int32Array(i+e),a=this.field,s=0;s<i;s++)o[s]=a.multiply(n[s],r);return new t(a,o)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new J("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new J("Divide by 0");for(var r=this.field,n=r.getZero(),i=this,o=e.getCoefficient(e.getDegree()),a=r.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),u=r.multiply(i.getCoefficient(i.getDegree()),a),l=e.multiplyByMonomial(s,u),f=r.buildMonomial(s,u);n=n.addOrSubtract(f),i=i.addOrSubtract(l)}return[n,i]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),aC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y_=function(t){aC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(lr),sC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nr=function(t){sC(e,t);function e(r,n,i){var o=t.call(this)||this;o.primitive=r,o.size=n,o.generatorBase=i;for(var a=new Int32Array(n),s=1,u=0;u<n;u++)a[u]=s,s*=2,s>=n&&(s^=r,s&=n-1);o.expTable=a;for(var l=new Int32Array(n),u=0;u<n-1;u++)l[a[u]]=u;return o.logTable=l,o.zero=new ni(o,Int32Array.from([0])),o.one=new ni(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new J;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new ni(this,i)},e.prototype.inverse=function(r){if(r===0)throw new Y_;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+le.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(za),uC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vu=function(t){uC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(lr),lC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hs=function(t){lC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(lr),Pc=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,i=new ni(n,e),o=new Int32Array(r),a=!0,s=0;s<r;s++){var u=i.evaluateAt(n.exp(s+n.getGeneratorBase()));o[o.length-1-s]=u,u!==0&&(a=!1)}if(!a)for(var l=new ni(n,o),f=this.runEuclideanAlgorithm(n.buildMonomial(r,1),l,r),h=f[0],d=f[1],p=this.findErrorLocations(h),g=this.findErrorMagnitudes(d,p),s=0;s<p.length;s++){var w=e.length-1-n.log(p[s]);if(w<0)throw new Vu("Bad error location");e[w]=nr.addOrSubtract(e[w],g[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var o=this.field,a=e,s=r,u=o.getZero(),l=o.getOne();s.getDegree()>=(n/2|0);){var f=a,h=u;if(a=s,u=l,a.isZero())throw new Vu("r_{i-1} was zero");s=f;for(var d=o.getZero(),p=a.getCoefficient(a.getDegree()),g=o.inverse(p);s.getDegree()>=a.getDegree()&&!s.isZero();){var w=s.getDegree()-a.getDegree(),I=o.multiply(s.getCoefficient(s.getDegree()),g);d=d.addOrSubtract(o.buildMonomial(w,I)),s=s.addOrSubtract(a.multiplyByMonomial(w,I))}if(l=d.multiply(u).addOrSubtract(h),s.getDegree()>=a.getDegree())throw new Hs("Division algorithm failed to reduce polynomial?")}var _=l.getCoefficient(0);if(_===0)throw new Vu("sigmaTilde(0) was zero");var m=o.inverse(_),x=l.multiplyScalar(m),P=s.multiplyScalar(m);return[x,P]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),i=0,o=this.field,a=1;a<o.getSize()&&i<r;a++)e.evaluateAt(a)===0&&(n[i]=o.inverse(a),i++);if(i!==r)throw new Vu("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,i=new Int32Array(n),o=this.field,a=0;a<n;a++){for(var s=o.inverse(r[a]),u=1,l=0;l<n;l++)if(a!==l){var f=o.multiply(r[l],s),h=f&1?f&-2:f|1;u=o.multiply(u,h)}i[a]=o.multiply(e.evaluateAt(s),o.inverse(u)),o.getGeneratorBase()!==0&&(i[a]=o.multiply(i[a],s))}return i},t}(),wt;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(wt||(wt={}));var zv=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),i=this.correctBits(n),o=t.convertBoolArrayToByteArray(i),a=t.getEncodedData(i),s=new Oc(o,a,null,null);return s.setNumBits(i.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=wt.UPPER,i=wt.UPPER,o="",a=0;a<r;)if(i===wt.BINARY){if(r-a<5)break;var s=t.readCode(e,a,5);if(a+=5,s===0){if(r-a<11)break;s=t.readCode(e,a,11)+31,a+=11}for(var u=0;u<s;u++){if(r-a<8){a=r;break}var l=t.readCode(e,a,8);o+=ge.castAsNonUtf8Char(l),a+=8}i=n}else{var f=i===wt.DIGIT?4:5;if(r-a<f)break;var l=t.readCode(e,a,f);a+=f;var h=t.getCharacter(i,l);h.startsWith("CTRL_")?(n=i,i=t.getTable(h.charAt(5)),h.charAt(6)==="L"&&(n=i)):(o+=h,i=n)}return o},t.getTable=function(e){switch(e){case"L":return wt.LOWER;case"P":return wt.PUNCT;case"M":return wt.MIXED;case"D":return wt.DIGIT;case"B":return wt.BINARY;case"U":default:return wt.UPPER}},t.getCharacter=function(e,r){switch(e){case wt.UPPER:return t.UPPER_TABLE[r];case wt.LOWER:return t.LOWER_TABLE[r];case wt.MIXED:return t.MIXED_TABLE[r];case wt.PUNCT:return t.PUNCT_TABLE[r];case wt.DIGIT:return t.DIGIT_TABLE[r];default:throw new Hs("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=nr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=nr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=nr.AZTEC_DATA_10):(n=12,r=nr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/n;if(o<i)throw new W;for(var a=e.length%n,s=new Int32Array(o),u=0;u<o;u++,a+=n)s[u]=t.readCode(e,a,n);try{var l=new Pc(r);l.decode(s,o-i)}catch(I){throw new W(I)}for(var f=(1<<n)-1,h=0,u=0;u<i;u++){var d=s[u];if(d===0||d===f)throw new W;(d===1||d===f-1)&&h++}for(var p=new Array(i*n-h),g=0,u=0;u<i;u++){var d=s[u];if(d===1||d===f-1)p.fill(d>1,g,g+n-1),g+=n-1;else for(var w=n-1;w>=0;--w)p[g++]=(d&1<<w)!==0}return p},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(r?11:14)+n*4,o=new Int32Array(i),a=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<o.length;s++)o[s]=s;else for(var u=i+1+2*le.truncDivision(le.truncDivision(i,2)-1,15),l=i/2,f=le.truncDivision(u,2),s=0;s<l;s++){var h=s+le.truncDivision(s,15);o[l-s-1]=f-h-1,o[l+s]=f+h+1}for(var s=0,d=0;s<n;s++){for(var p=(n-s)*4+(r?9:12),g=s*2,w=i-1-g,I=0;I<p;I++)for(var _=I*2,m=0;m<2;m++)a[d+_+m]=e.get(o[g+m],o[g+I]),a[d+2*p+_+m]=e.get(o[g+I],o[w-m]),a[d+4*p+_+m]=e.get(o[w-m],o[w-I]),a[d+6*p+_+m]=e.get(o[w-I],o[g+m]);d+=p*8}return a},t.readCode=function(e,r,n){for(var i=0,o=r;o<r+n;o++)i<<=1,e[o]&&(i|=1);return i},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),we=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,i){var o=e-n,a=r-i;return Math.sqrt(o*o+a*a)},t.sum=function(e){for(var r=0,n=0,i=e.length;n!==i;n++){var o=e[n];r+=o}return r},t}(),ud=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Y=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*ud.floatToIntBits(this.x)+ud.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,a,s;if(n>=r&&n>=i?(a=e[0],o=e[1],s=e[2]):i>=n&&i>=r?(a=e[1],o=e[0],s=e[2]):(a=e[2],o=e[0],s=e[1]),this.crossProductZ(o,a,s)<0){var u=o;o=s,s=u}e[0]=o,e[1]=a,e[2]=s},t.distance=function(e,r){return we.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var i=r.x,o=r.y;return(n.x-i)*(e.y-o)-(n.y-o)*(e.x-i)},t}(),M0=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),cC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fC=function(t){cC(e,t);function e(r,n,i,o,a){var s=t.call(this,r,n)||this;return s.compact=i,s.nbDatablocks=o,s.nbLayers=a,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(M0),ld=function(){function t(e,r,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=r/2|0;if(this.leftInit=n-o,this.rightInit=n+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,i=this.downInit,o=!1,a=!0,s=!1,u=!1,l=!1,f=!1,h=!1,d=this.width,p=this.height;a;){a=!1;for(var g=!0;(g||!u)&&r<d;)g=this.containsBlackPoint(n,i,r,!1),g?(r++,a=!0,u=!0):u||r++;if(r>=d){o=!0;break}for(var w=!0;(w||!l)&&i<p;)w=this.containsBlackPoint(e,r,i,!0),w?(i++,a=!0,l=!0):l||i++;if(i>=p){o=!0;break}for(var I=!0;(I||!f)&&e>=0;)I=this.containsBlackPoint(n,i,e,!1),I?(e--,a=!0,f=!0):f||e--;if(e<0){o=!0;break}for(var _=!0;(_||!h)&&n>=0;)_=this.containsBlackPoint(e,r,n,!0),_?(n--,a=!0,h=!0):h||n--;if(n<0){o=!0;break}a&&(s=!0)}if(!o&&s){for(var m=r-e,x=null,P=1;x===null&&P<m;P++)x=this.getBlackPointOnSegment(e,i-P,e+P,i);if(x==null)throw new V;for(var k=null,P=1;k===null&&P<m;P++)k=this.getBlackPointOnSegment(e,n+P,e+P,n);if(k==null)throw new V;for(var M=null,P=1;M===null&&P<m;P++)M=this.getBlackPointOnSegment(r,n+P,r-P,n);if(M==null)throw new V;for(var A=null,P=1;A===null&&P<m;P++)A=this.getBlackPointOnSegment(r,i-P,r-P,i);if(A==null)throw new V;return this.centerEdges(A,x,M,k)}else throw new V},t.prototype.getBlackPointOnSegment=function(e,r,n,i){for(var o=we.round(we.distance(e,r,n,i)),a=(n-e)/o,s=(i-r)/o,u=this.image,l=0;l<o;l++){var f=we.round(e+l*a),h=we.round(r+l*s);if(u.get(f,h))return new Y(f,h)}return null},t.prototype.centerEdges=function(e,r,n,i){var o=e.getX(),a=e.getY(),s=r.getX(),u=r.getY(),l=n.getX(),f=n.getY(),h=i.getX(),d=i.getY(),p=t.CORR;return o<this.width/2?[new Y(h-p,d+p),new Y(s+p,u+p),new Y(l-p,f-p),new Y(o+p,a-p)]:[new Y(h+p,d+p),new Y(s+p,u-p),new Y(l-p,f+p),new Y(o-p,a-p)]},t.prototype.containsBlackPoint=function(e,r,n,i){var o=this.image;if(i){for(var a=e;a<=r;a++)if(o.get(a,n))return!0}else for(var s=e;s<=r;s++)if(o.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),Hv=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),i=e.getHeight(),o=!0,a=0;a<r.length&&o;a+=2){var s=Math.floor(r[a]),u=Math.floor(r[a+1]);if(s<-1||s>n||u<-1||u>i)throw new V;o=!1,s===-1?(r[a]=0,o=!0):s===n&&(r[a]=n-1,o=!0),u===-1?(r[a+1]=0,o=!0):u===i&&(r[a+1]=i-1,o=!0)}o=!0;for(var a=r.length-2;a>=0&&o;a-=2){var s=Math.floor(r[a]),u=Math.floor(r[a+1]);if(s<-1||s>n||u<-1||u>i)throw new V;o=!1,s===-1?(r[a]=0,o=!0):s===n&&(r[a]=n-1,o=!0),u===-1?(r[a+1]=0,o=!0):u===i&&(r[a+1]=i-1,o=!0)}},t}(),Q_=function(){function t(e,r,n,i,o,a,s,u,l){this.a11=e,this.a21=r,this.a31=n,this.a12=i,this.a22=o,this.a32=a,this.a13=s,this.a23=u,this.a33=l}return t.quadrilateralToQuadrilateral=function(e,r,n,i,o,a,s,u,l,f,h,d,p,g,w,I){var _=t.quadrilateralToSquare(e,r,n,i,o,a,s,u),m=t.squareToQuadrilateral(l,f,h,d,p,g,w,I);return m.times(_)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,i=this.a12,o=this.a13,a=this.a21,s=this.a22,u=this.a23,l=this.a31,f=this.a32,h=this.a33,d=0;d<r;d+=2){var p=e[d],g=e[d+1],w=o*p+u*g+h;e[d]=(n*p+a*g+l)/w,e[d+1]=(i*p+s*g+f)/w}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,i=this.a12,o=this.a13,a=this.a21,s=this.a22,u=this.a23,l=this.a31,f=this.a32,h=this.a33,d=e.length,p=0;p<d;p++){var g=e[p],w=r[p],I=o*g+u*w+h;e[p]=(n*g+a*w+l)/I,r[p]=(i*g+s*w+f)/I}},t.squareToQuadrilateral=function(e,r,n,i,o,a,s,u){var l=e-n+o-s,f=r-i+a-u;if(l===0&&f===0)return new t(n-e,o-n,e,i-r,a-i,r,0,0,1);var h=n-o,d=s-o,p=i-a,g=u-a,w=h*g-d*p,I=(l*g-d*f)/w,_=(h*f-l*p)/w;return new t(n-e+I*n,s-e+_*s,e,i-r+I*i,u-r+_*u,r,I,_,1)},t.quadrilateralToSquare=function(e,r,n,i,o,a,s,u){return t.squareToQuadrilateral(e,r,n,i,o,a,s,u).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),hC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dC=function(t){hC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,i,o,a,s,u,l,f,h,d,p,g,w,I,_,m,x,P){var k=Q_.quadrilateralToQuadrilateral(o,a,s,u,l,f,h,d,p,g,w,I,_,m,x,P);return this.sampleGridWithTransform(r,n,i,k)},e.prototype.sampleGridWithTransform=function(r,n,i,o){if(n<=0||i<=0)throw new V;for(var a=new tn(n,i),s=new Float32Array(2*n),u=0;u<i;u++){for(var l=s.length,f=u+.5,h=0;h<l;h+=2)s[h]=h/2+.5,s[h+1]=f;o.transformPoints(s),Hv.checkAndNudgePoints(r,s);try{for(var h=0;h<l;h+=2)r.get(Math.floor(s[h]),Math.floor(s[h+1]))&&a.set(h/2,u)}catch{throw new V}}return a},e}(Hv),L0=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new dC,t}(),tr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Y(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),pC=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),a=this.getMatrixCornerPoints(n);return new fC(o,a,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new V;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var i=0,o=0;o<4;o++){var a=n[(this.shift+o)%4];this.compact?(i<<=7,i+=a>>1&127):(i<<=10,i+=(a>>2&992)+(a>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(o,a,s){var u=(o>>r-2<<1)+(o&1);n=(n<<3)+u}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(le.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new V},t.prototype.getCorrectedParameterData=function(e,r){var n,i;r?(n=7,i=2):(n=10,i=4);for(var o=n-i,a=new Int32Array(n),s=n-1;s>=0;--s)a[s]=e&15,e>>=4;try{var u=new Pc(nr.AZTEC_PARAM);u.decode(a,o)}catch{throw new V}for(var l=0,s=0;s<i;s++)l=(l<<4)+a[s];return l},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,i=e,o=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,a,1,-1),u=this.getFirstDifferent(n,a,1,1),l=this.getFirstDifferent(i,a,-1,1),f=this.getFirstDifferent(o,a,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(f,s)*this.nbCenterLayers/(this.distancePoint(o,r)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(s,u,l,f))break}r=s,n=u,i=l,o=f,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;var d=new Y(r.getX()+.5,r.getY()-.5),p=new Y(n.getX()+.5,n.getY()+.5),g=new Y(i.getX()-.5,i.getY()+.5),w=new Y(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,p,g,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,i;try{var o=new ld(this.image).detect();e=o[0],r=o[1],n=o[2],i=o[3]}catch{var a=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new tr(a+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new tr(a+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new tr(a-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new tr(a-7,s-7),!1,-1,-1).toResultPoint()}var u=we.round((e.getX()+i.getX()+r.getX()+n.getX())/4),l=we.round((e.getY()+i.getY()+r.getY()+n.getY())/4);try{var o=new ld(this.image,15,u,l).detect();e=o[0],r=o[1],n=o[2],i=o[3]}catch{e=this.getFirstDifferent(new tr(u+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new tr(u+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new tr(u-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new tr(u-7,l-7),!1,-1,-1).toResultPoint()}return u=we.round((e.getX()+i.getX()+r.getX()+n.getX())/4),l=we.round((e.getY()+i.getY()+r.getY()+n.getY())/4),new tr(u,l)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,i,o){var a=L0.getInstance(),s=this.getDimension(),u=s/2-this.nbCenterLayers,l=s/2+this.nbCenterLayers;return a.sampleGrid(e,s,s,u,u,l,u,l,l,u,l,r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(e,r,n){for(var i=0,o=this.distanceResultPoint(e,r),a=o/n,s=e.getX(),u=e.getY(),l=a*(r.getX()-e.getX())/o,f=a*(r.getY()-e.getY())/o,h=0;h<n;h++)this.image.get(we.round(s+h*l),we.round(u+h*f))&&(i|=1<<n-h-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,i){var o=3;e=new tr(e.getX()-o,e.getY()+o),r=new tr(r.getX()-o,r.getY()-o),n=new tr(n.getX()+o,n.getY()-o),i=new tr(i.getX()+o,i.getY()+o);var a=this.getColor(i,e);if(a===0)return!1;var s=this.getColor(e,r);return s!==a||(s=this.getColor(r,n),s!==a)?!1:(s=this.getColor(n,i),s===a)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),i=(r.getX()-e.getX())/n,o=(r.getY()-e.getY())/n,a=0,s=e.getX(),u=e.getY(),l=this.image.get(e.getX(),e.getY()),f=Math.ceil(n),h=0;h<f;h++)s+=i,u+=o,this.image.get(we.round(s),we.round(u))!==l&&a++;var d=a/n;return d>.1&&d<.9?0:d<=.1===l?1:-1},t.prototype.getFirstDifferent=function(e,r,n,i){for(var o=e.getX()+n,a=e.getY()+i;this.isValid(o,a)&&this.image.get(o,a)===r;)o+=n,a+=i;for(o-=n,a-=i;this.isValid(o,a)&&this.image.get(o,a)===r;)o+=n;for(o-=n;this.isValid(o,a)&&this.image.get(o,a)===r;)a+=i;return a-=i,new tr(o,a)},t.prototype.expandSquare=function(e,r,n){var i=n/(2*r),o=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,l=new Y(s+i*o,u+i*a),f=new Y(s-i*o,u-i*a);o=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var h=new Y(s+i*o,u+i*a),d=new Y(s-i*o,u-i*a),p=[l,h,f,d];return p},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=we.round(e.getX()),n=we.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return we.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return we.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(le.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Hl=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,i=new pC(e.getBlackMatrix()),o=null,a=null;try{var s=i.detectMirror(!1);o=s.getPoints(),this.reportFoundResultPoints(r,o),a=new zv().decode(s)}catch(h){n=h}if(a==null)try{var s=i.detectMirror(!0);o=s.getPoints(),this.reportFoundResultPoints(r,o),a=new zv().decode(s)}catch(h){throw n??h}var u=new Ht(a.getText(),a.getRawBytes(),a.getNumBits(),o,Z.AZTEC,be.currentTimeMillis()),l=a.getByteSegments();l!=null&&u.putMetadata(Ct.BYTE_SEGMENTS,l);var f=a.getECLevel();return f!=null&&u.putMetadata(Ct.ERROR_CORRECTION_LEVEL,f),u},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(ke.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(i,o,a){n.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),vC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){vC(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Hl,r)||this}return e})(oa);var ft=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(ke.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,r),a=o.getResultMetadata(),s=270;a!==null&&a.get(Ct.ORIENTATION)===!0&&(s=s+a.get(Ct.ORIENTATION)%360),o.putMetadata(Ct.ORIENTATION,s);var u=o.getResultPoints();if(u!==null)for(var l=i.getHeight(),f=0;f<u.length;f++)u[f]=new Y(l-u[f].getY()-1,u[f].getX());return o}else throw new V}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),i=e.getHeight(),o=new yt(n),a=r&&r.get(ke.TRY_HARDER)===!0,s=Math.max(1,i>>(a?8:5)),u;a?u=i:u=15;for(var l=Math.trunc(i/2),f=0;f<u;f++){var h=Math.trunc((f+1)/2),d=(f&1)===0,p=l+s*(d?h:-h);if(p<0||p>=i)break;try{o=e.getBlackRow(p,o)}catch{continue}for(var g=function(m){if(m===1&&(o.reverse(),r&&r.get(ke.NEED_RESULT_POINT_CALLBACK)===!0)){var x=new Map;r.forEach(function(M,A){return x.set(A,M)}),x.delete(ke.NEED_RESULT_POINT_CALLBACK),r=x}try{var P=w.decodeRow(p,o,r);if(m===1){P.putMetadata(Ct.ORIENTATION,180);var k=P.getResultPoints();k!==null&&(k[0]=new Y(n-k[0].getX()-1,k[0].getY()),k[1]=new Y(n-k[1].getX()-1,k[1].getY()))}return{value:P}}catch{}},w=this,I=0;I<2;I++){var _=g(I);if(typeof _=="object")return _.value}}throw new V},t.recordPattern=function(e,r,n){for(var i=n.length,o=0;o<i;o++)n[o]=0;var a=e.getSize();if(r>=a)throw new V;for(var s=!e.get(r),u=0,l=r;l<a;){if(e.get(l)!==s)n[u]++;else{if(++u===i)break;n[u]=1,s=!s}l++}if(!(u===i||u===i-1&&l===a))throw new V},t.recordPatternInReverse=function(e,r,n){for(var i=n.length,o=e.get(r);r>0&&i>=0;)e.get(--r)!==o&&(i--,o=!o);if(i>=0)throw new V;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var i=e.length,o=0,a=0,s=0;s<i;s++)o+=e[s],a+=r[s];if(o<a)return Number.POSITIVE_INFINITY;var u=o/a;n*=u;for(var l=0,f=0;f<i;f++){var h=e[f],d=r[f]*u,p=h>d?h-d:d-h;if(p>n)return Number.POSITIVE_INFINITY;l+=p}return l/o},t}(),gC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wv=function(t){gC(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),i=r.getNextSet(0),o=0,a=Int32Array.from([0,0,0,0,0,0]),s=i,u=!1,l=6,f=i;f<n;f++)if(r.get(f)!==u)a[o]++;else{if(o===l-1){for(var h=e.MAX_AVG_VARIANCE,d=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var g=ft.patternMatchVariance(a,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);g<h&&(h=g,d=p)}if(d>=0&&r.isRange(Math.max(0,s-(f-s)/2),s,!1))return Int32Array.from([s,f,d]);s+=a[0]+a[1],a=a.slice(2,a.length),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,u=!u}throw new V},e.decodeCode=function(r,n,i){ft.recordPattern(r,i,n);for(var o=e.MAX_AVG_VARIANCE,a=-1,s=0;s<e.CODE_PATTERNS.length;s++){var u=e.CODE_PATTERNS[s],l=this.patternMatchVariance(n,u,e.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,a=s)}if(a>=0)return a;throw new V},e.prototype.decodeRow=function(r,n,i){var o=i&&i.get(ke.ASSUME_GS1)===!0,a=e.findStartPattern(n),s=a[2],u=0,l=new Uint8Array(20);l[u++]=s;var f;switch(s){case e.CODE_START_A:f=e.CODE_CODE_A;break;case e.CODE_START_B:f=e.CODE_CODE_B;break;case e.CODE_START_C:f=e.CODE_CODE_C;break;default:throw new W}for(var h=!1,d=!1,p="",g=a[0],w=a[1],I=Int32Array.from([0,0,0,0,0,0]),_=0,m=0,x=s,P=0,k=!0,M=!1,A=!1;!h;){var E=d;switch(d=!1,_=m,m=e.decodeCode(n,I,w),l[u++]=m,m!==e.CODE_STOP&&(k=!0),m!==e.CODE_STOP&&(P++,x+=P*m),g=w,w+=I.reduce(function(Wt,$){return Wt+$},0),m){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new W}switch(f){case e.CODE_CODE_A:if(m<64)A===M?p+=String.fromCharCode(32+m):p+=String.fromCharCode(32+m+128),A=!1;else if(m<96)A===M?p+=String.fromCharCode(m-64):p+=String.fromCharCode(m+64),A=!1;else switch(m!==e.CODE_STOP&&(k=!1),m){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!M&&A?(M=!0,A=!1):M&&A?(M=!1,A=!1):A=!0;break;case e.CODE_SHIFT:d=!0,f=e.CODE_CODE_B;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_B:if(m<96)A===M?p+=String.fromCharCode(32+m):p+=String.fromCharCode(32+m+128),A=!1;else switch(m!==e.CODE_STOP&&(k=!1),m){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!M&&A?(M=!0,A=!1):M&&A?(M=!1,A=!1):A=!0;break;case e.CODE_SHIFT:d=!0,f=e.CODE_CODE_A;break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_C:if(m<100)m<10&&(p+="0"),p+=m;else switch(m!==e.CODE_STOP&&(k=!1),m){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_STOP:h=!0;break}break}E&&(f=f===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var S=w-g;if(w=n.getNextUnset(w),!n.isRange(w,Math.min(n.getSize(),w+(w-g)/2),!1))throw new V;if(x-=P*_,x%103!==_)throw new rt;var R=p.length;if(R===0)throw new V;R>0&&k&&(f===e.CODE_CODE_C?p=p.substring(0,R-2):p=p.substring(0,R-1));for(var D=(a[1]+a[0])/2,N=g+S/2,O=l.length,fe=new Uint8Array(O),Ue=0;Ue<O;Ue++)fe[Ue]=l[Ue];var mr=[new Y(D,r),new Y(N,r)];return new Ht(p,fe,0,mr,Z.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(ft),yC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gv=function(t){yC(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var i=t.call(this)||this;return i.usingCheckDigit=r,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(r,n,i){var o,a,s,u,l=this.counters;l.fill(0),this.decodeRowResult="";var f=e.findAsteriskPattern(n,l),h=n.getNextSet(f[1]),d=n.getSize(),p,g;do{e.recordPattern(n,h,l);var w=e.toNarrowWidePattern(l);if(w<0)throw new V;p=e.patternToChar(w),this.decodeRowResult+=p,g=h;try{for(var I=(o=void 0,Gf(l)),_=I.next();!_.done;_=I.next()){var m=_.value;h+=m}}catch(O){o={error:O}}finally{try{_&&!_.done&&(a=I.return)&&a.call(I)}finally{if(o)throw o.error}}h=n.getNextSet(h)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x=0;try{for(var P=Gf(l),k=P.next();!k.done;k=P.next()){var m=k.value;x+=m}}catch(O){s={error:O}}finally{try{k&&!k.done&&(u=P.return)&&u.call(P)}finally{if(s)throw s.error}}var M=h-g-x;if(h!==d&&M*2<x)throw new V;if(this.usingCheckDigit){for(var A=this.decodeRowResult.length-1,E=0,S=0;S<A;S++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(S));if(this.decodeRowResult.charAt(A)!==e.ALPHABET_STRING.charAt(E%43))throw new rt;this.decodeRowResult=this.decodeRowResult.substring(0,A)}if(this.decodeRowResult.length===0)throw new V;var R;this.extendedMode?R=e.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;var D=(f[1]+f[0])/2,N=g+x/2;return new Ht(R,null,0,[new Y(D,r),new Y(N,r)],Z.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var i=r.getSize(),o=r.getNextSet(0),a=0,s=o,u=!1,l=n.length,f=o;f<i;f++)if(r.get(f)!==u)n[a]++;else{if(a===l-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((f-s)/2)),s,!1))return[s,f];s+=n[0]+n[1],n.copyWithin(0,2,2+a-1),n[a-1]=0,n[a]=0,a--}else a++;n[a]=1,u=!u}throw new V},e.toNarrowWidePattern=function(r){var n,i,o=r.length,a=0,s;do{var u=2147483647;try{for(var l=(n=void 0,Gf(r)),f=l.next();!f.done;f=l.next()){var h=f.value;h<u&&h>a&&(u=h)}}catch(w){n={error:w}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}a=u,s=0;for(var d=0,p=0,g=0;g<o;g++){var h=r[g];h>a&&(p|=1<<o-1-g,s++,d+=h)}if(s===3){for(var g=0;g<o&&s>0;g++){var h=r[g];if(h>a&&(s--,h*2>=d))return-1}return p}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new V},e.decodeExtended=function(r){for(var n=r.length,i="",o=0;o<n;o++){var a=r.charAt(o);if(a==="+"||a==="$"||a==="%"||a==="/"){var s=r.charAt(o+1),u="\0";switch(a){case"+":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new W;break;case"$":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new W;break;case"%":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s==="X"||s==="Y"||s==="Z")u="";else throw new W;break;case"/":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new W;break}i+=u,o++}else i+=a}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(ft),mC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$f=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$v=function(t){mC(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,i){var o,a,s,u,l=this.findAsteriskPattern(n),f=n.getNextSet(l[1]),h=n.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var p,g;do{e.recordPattern(n,f,d);var w=this.toPattern(d);if(w<0)throw new V;p=this.patternToChar(w),this.decodeRowResult+=p,g=f;try{for(var I=(o=void 0,$f(d)),_=I.next();!_.done;_=I.next()){var m=_.value;f+=m}}catch(S){o={error:S}}finally{try{_&&!_.done&&(a=I.return)&&a.call(I)}finally{if(o)throw o.error}}f=n.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x=0;try{for(var P=$f(d),k=P.next();!k.done;k=P.next()){var m=k.value;x+=m}}catch(S){s={error:S}}finally{try{k&&!k.done&&(u=P.return)&&u.call(P)}finally{if(s)throw s.error}}if(f===h||!n.get(f))throw new V;if(this.decodeRowResult.length<2)throw new V;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var M=this.decodeExtended(this.decodeRowResult),A=(l[1]+l[0])/2,E=g+x/2;return new Ht(M,null,0,[new Y(A,r),new Y(E,r)],Z.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),i=r.getNextSet(0);this.counters.fill(0);for(var o=this.counters,a=i,s=!1,u=o.length,l=0,f=i;f<n;f++)if(r.get(f)!==s)o[l]++;else{if(l===u-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([a,f]);a+=o[0]+o[1],o.copyWithin(0,2,2+l-1),o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,s=!s}throw new V},e.prototype.toPattern=function(r){var n,i,o=0;try{for(var a=$f(r),s=a.next();!s.done;s=a.next()){var u=s.value;o+=u}}catch(g){n={error:g}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}for(var l=0,f=r.length,h=0;h<f;h++){var d=Math.round(r[h]*9/o);if(d<1||d>4)return-1;if(h&1)l<<=d;else for(var p=0;p<d;p++)l=l<<1|1}return l},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new V},e.prototype.decodeExtended=function(r){for(var n=r.length,i="",o=0;o<n;o++){var a=r.charAt(o);if(a>="a"&&a<="d"){if(o>=n-1)throw new W;var s=r.charAt(o+1),u="\0";switch(a){case"d":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new W;break;case"a":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new W;break;case"b":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s>="X"&&s<="Z")u="";else throw new W;break;case"c":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new W;break}i+=u,o++}else i+=a}return i},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,i){for(var o=1,a=0,s=n-1;s>=0;s--)a+=o*e.ALPHABET_STRING.indexOf(r.charAt(s)),++o>i&&(o=1);if(r.charAt(n)!==e.ALPHABET_STRING[a%47])throw new rt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(ft),_C=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xv=function(t){_C(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,i){var o,a,s=this.decodeStart(n),u=this.decodeEnd(n),l=new ue;e.decodeMiddle(n,s[1],u[0],l);var f=l.toString(),h=null;i!=null&&(h=i.get(ke.ALLOWED_LENGTHS)),h==null&&(h=e.DEFAULT_ALLOWED_LENGTHS);var d=f.length,p=!1,g=0;try{for(var w=wC(h),I=w.next();!I.done;I=w.next()){var _=I.value;if(d===_){p=!0;break}_>g&&(g=_)}}catch(P){o={error:P}}finally{try{I&&!I.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}if(!p&&d>g&&(p=!0),!p)throw new W;var m=[new Y(s[1],r),new Y(u[0],r)],x=new Ht(f,null,0,m,Z.ITF,new Date().getTime());return x},e.decodeMiddle=function(r,n,i,o){var a=new Int32Array(10),s=new Int32Array(5),u=new Int32Array(5);for(a.fill(0),s.fill(0),u.fill(0);n<i;){ft.recordPattern(r,n,a);for(var l=0;l<5;l++){var f=2*l;s[l]=a[f],u[l]=a[f+1]}var h=e.decodeDigit(s);o.append(h.toString()),h=this.decodeDigit(u),o.append(h.toString()),a.forEach(function(d){n+=d})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),i=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(r,i[0]),i},e.prototype.validateQuietZone=function(r,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var o=n-1;i>0&&o>=0&&!r.get(o);o--)i--;if(i!==0)throw new V},e.skipWhiteSpace=function(r){var n=r.getSize(),i=r.getNextSet(0);if(i===n)throw new V;return i},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),i=void 0;try{i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(a){a instanceof V&&(i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,i[0]);var o=i[0];return i[0]=r.getSize()-i[1],i[1]=r.getSize()-o,i}finally{r.reverse()}},e.findGuardPattern=function(r,n,i){var o=i.length,a=new Int32Array(o),s=r.getSize(),u=!1,l=0,f=n;a.fill(0);for(var h=n;h<s;h++)if(r.get(h)!==u)a[l]++;else{if(l===o-1){if(ft.patternMatchVariance(a,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[f,h];f+=a[0]+a[1],be.arraycopy(a,2,a,0,l-1),a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,u=!u}throw new V},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,a=0;a<o;a++){var s=e.PATTERNS[a],u=ft.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);u<n?(n=u,i=a):u===n&&(i=-1)}if(i>=0)return i%10;throw new V},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(ft),xC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xo=function(t){xC(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,i,o=0,a=Int32Array.from([0,0,0]);!n;){a=Int32Array.from([0,0,0]),i=e.findGuardPattern(r,o,!1,this.START_END_PATTERN,a);var s=i[0];o=i[1];var u=s-(o-s);u>=0&&(n=r.isRange(u,s,!1))}return i},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,o=n-1;o>=0;o-=2){var a=r.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new W;i+=a}i*=3;for(var o=n-2;o>=0;o-=2){var a=r.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new W;i+=a}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,i,o){return this.findGuardPattern(r,n,i,o,new Int32Array(o.length))},e.findGuardPattern=function(r,n,i,o,a){var s=r.getSize();n=i?r.getNextUnset(n):r.getNextSet(n);for(var u=0,l=n,f=o.length,h=i,d=n;d<s;d++)if(r.get(d)!==h)a[u]++;else{if(u===f-1){if(ft.patternMatchVariance(a,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([l,d]);l+=a[0]+a[1];for(var p=a.slice(2,a.length),g=0;g<u-1;g++)a[g]=p[g];a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,h=!h}throw new V},e.decodeDigit=function(r,n,i,o){this.recordPattern(r,i,n);for(var a=this.MAX_AVG_VARIANCE,s=-1,u=o.length,l=0;l<u;l++){var f=o[l],h=ft.patternMatchVariance(n,f,e.MAX_INDIVIDUAL_VARIANCE);h<a&&(a=h,s=l)}if(s>=0)return s;throw new V},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(ft),EC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AC=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(r,n,i),a=i.toString(),s=t.parseExtensionString(a),u=[new Y((n[0]+n[1])/2,e),new Y(o,e)],l=new Ht(a,null,0,u,Z.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&l.putAllMetadata(s),l},t.prototype.decodeMiddle=function(e,r,n){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),u=r[1],l=0,f=0;f<5&&u<s;f++){var h=Xo.decodeDigit(e,a,u,Xo.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var d=(i=void 0,EC(a)),p=d.next();!p.done;p=d.next()){var g=p.value;u+=g}}catch(I){i={error:I}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(l|=1<<4-f),f!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(n.length!==5)throw new V;var w=this.determineCheckDigit(l);if(t.extensionChecksum(n.toString())!==w)throw new V;return u},t.extensionChecksum=function(e){for(var r=e.length,n=0,i=r-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=r-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new V},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Ct.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),o=n%100,a=o<10?"0"+o:o.toString();return r+i+"."+a},t}(),IC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CC=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(r,n,i),a=i.toString(),s=t.parseExtensionString(a),u=[new Y((n[0]+n[1])/2,e),new Y(o,e)],l=new Ht(a,null,0,u,Z.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&l.putAllMetadata(s),l},t.prototype.decodeMiddle=function(e,r,n){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),u=r[1],l=0,f=0;f<2&&u<s;f++){var h=Xo.decodeDigit(e,a,u,Xo.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var d=(i=void 0,IC(a)),p=d.next();!p.done;p=d.next()){var g=p.value;u+=g}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(l|=1<<1-f),f!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(n.length!==2)throw new V;if(parseInt(n.toString())%4!==l)throw new V;return u},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Ct.ISSUE_NUMBER,parseInt(e)]])},t}(),SC=function(){function t(){}return t.decodeRow=function(e,r,n){var i=Xo.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new AC;return o.decodeRow(e,r,i)}catch{var a=new CC;return a.decodeRow(e,r,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),TC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),at=function(t){TC(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],o=new Int32Array(i.length),a=0;a<i.length;a++)o[a]=i[i.length-a-1];e.L_AND_G_PATTERNS[n]=o}return r}return e.prototype.decodeRow=function(r,n,i){var o=e.findStartGuardPattern(n),a=i==null?null:i.get(ke.NEED_RESULT_POINT_CALLBACK);if(a!=null){var s=new Y((o[0]+o[1])/2,r);a.foundPossibleResultPoint(s)}var u=this.decodeMiddle(n,o,this.decodeRowStringBuffer),l=u.rowOffset,f=u.resultString;if(a!=null){var h=new Y(l,r);a.foundPossibleResultPoint(h)}var d=e.decodeEnd(n,l);if(a!=null){var p=new Y((d[0]+d[1])/2,r);a.foundPossibleResultPoint(p)}var g=d[1],w=g+(g-d[0]);if(w>=n.getSize()||!n.isRange(g,w,!1))throw new V;var I=f.toString();if(I.length<8)throw new W;if(!e.checkChecksum(I))throw new rt;var _=(o[1]+o[0])/2,m=(d[1]+d[0])/2,x=this.getBarcodeFormat(),P=[new Y(_,r),new Y(m,r)],k=new Ht(I,null,0,P,x,new Date().getTime()),M=0;try{var A=SC.decodeRow(r,n,d[1]);k.putMetadata(Ct.UPC_EAN_EXTENSION,A.getText()),k.putAllMetadata(A.getResultMetadata()),k.addResultPoints(A.getResultPoints()),M=A.getText().length}catch{}var E=i==null?null:i.get(ke.ALLOWED_EAN_EXTENSIONS);if(E!=null){var S=!1;for(var R in E)if(M.toString()===R){S=!0;break}if(!S)throw new V}return x===Z.EAN_13||Z.UPC_A,k},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,o=n-1;o>=0;o-=2){var a=r.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new W;i+=a}i*=3;for(var o=n-2;o>=0;o-=2){var a=r.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new W;i+=a}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Xo),RC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cd=function(t){RC(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var o,a,s,u,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var f=r.getSize(),h=n[1],d=0,p=0;p<6&&h<f;p++){var g=at.decodeDigit(r,l,h,at.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var w=(o=void 0,Kv(l)),I=w.next();!I.done;I=w.next()){var _=I.value;h+=_}}catch(k){o={error:k}}finally{try{I&&!I.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}g>=10&&(d|=1<<5-p)}i=e.determineFirstDigit(i,d);var m=at.findGuardPattern(r,h,!0,at.MIDDLE_PATTERN,new Int32Array(at.MIDDLE_PATTERN.length).fill(0));h=m[1];for(var p=0;p<6&&h<f;p++){var g=at.decodeDigit(r,l,h,at.L_PATTERNS);i+=String.fromCharCode(48+g);try{for(var x=(s=void 0,Kv(l)),P=x.next();!P.done;P=x.next()){var _=P.value;h+=_}}catch(A){s={error:A}}finally{try{P&&!P.done&&(u=x.return)&&u.call(x)}finally{if(s)throw s.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return Z.EAN_13},e.determineFirstDigit=function(r,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return r=String.fromCharCode(48+i)+r,r;throw new V},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(at),OC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yv=function(t){OC(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var o,a,s,u,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var f=r.getSize(),h=n[1],d=0;d<4&&h<f;d++){var p=at.decodeDigit(r,l,h,at.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var g=(o=void 0,qv(l)),w=g.next();!w.done;w=g.next()){var I=w.value;h+=I}}catch(P){o={error:P}}finally{try{w&&!w.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}}var _=at.findGuardPattern(r,h,!0,at.MIDDLE_PATTERN,new Int32Array(at.MIDDLE_PATTERN.length).fill(0));h=_[1];for(var d=0;d<4&&h<f;d++){var p=at.decodeDigit(r,l,h,at.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var m=(s=void 0,qv(l)),x=m.next();!x.done;x=m.next()){var I=x.value;h+=I}}catch(M){s={error:M}}finally{try{x&&!x.done&&(u=m.return)&&u.call(m)}finally{if(s)throw s.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return Z.EAN_8},e}(at),PC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qv=function(t){PC(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new cd,r}return e.prototype.getBarcodeFormat=function(){return Z.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,i))},e.prototype.decodeMiddle=function(r,n,i){return this.ean13Reader.decodeMiddle(r,n,i)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var i=new Ht(n.substring(1),null,null,r.getResultPoints(),Z.UPC_A);return r.getResultMetadata()!=null&&i.putAllMetadata(r.getResultMetadata()),i}else throw new V},e.prototype.reset=function(){this.ean13Reader.reset()},e}(at),DC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zv=function(t){DC(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,i){var o,a,s=this.decodeMiddleCounters.map(function(I){return I});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=r.getSize(),l=n[1],f=0,h=0;h<6&&l<u;h++){var d=e.decodeDigit(r,s,l,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);try{for(var p=(o=void 0,NC(s)),g=p.next();!g.done;g=p.next()){var w=g.value;l+=w}}catch(I){o={error:I}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}d>=10&&(f|=1<<5-h)}return e.determineNumSysAndCheckDigit(new ue(i),f),l},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return at.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){r.insert(0,"0"+i),r.append("0"+o);return}throw V.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Z.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),i=new ue;i.append(r.charAt(0));var o=n[5];switch(o){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(o),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(o);break}return r.length>=8&&i.append(r.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(at),bC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xf=function(t){bC(e,t);function e(r){var n=t.call(this)||this,i=r==null?null:r.get(ke.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(Z.EAN_13)>-1&&o.push(new cd),i.indexOf(Z.UPC_A)>-1&&o.push(new Qv),i.indexOf(Z.EAN_8)>-1&&o.push(new Yv),i.indexOf(Z.UPC_E)>-1&&o.push(new Zv)),o.length===0&&(o.push(new cd),o.push(new Qv),o.push(new Yv),o.push(new Zv)),n.readers=o,n}return e.prototype.decodeRow=function(r,n,i){var o,a;try{for(var s=Jv(this.readers),u=s.next();!u.done;u=s.next()){var l=u.value;try{var f=l.decodeRow(r,n,i),h=f.getBarcodeFormat()===Z.EAN_13&&f.getText().charAt(0)==="0",d=i==null?null:i.get(ke.POSSIBLE_FORMATS),p=d==null||d.includes(Z.UPC_A);if(h&&p){var g=f.getRawBytes(),w=new Ht(f.getText().substring(1),g,g?g.length:null,f.getResultPoints(),Z.UPC_A);return w.putAllMetadata(f.getResultMetadata()),w}return f}catch{}}}catch(I){o={error:I}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}throw new V},e.prototype.reset=function(){var r,n;try{for(var i=Jv(this.readers),o=i.next();!o.done;o=i.next()){var a=o.value;a.reset()}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e}(ft),kC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MC=function(t){kC(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,i){var o=this.getValidRowData(n);if(!o)throw new V;var a=this.codaBarDecodeRow(o.row);if(!a)throw new V;return new Ht(a,null,0,[new Y(o.left,r),new Y(o.right,r)],Z.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),i=n.indexOf(!0);if(i===-1)return null;var o=n.lastIndexOf(!0);if(o<=i)return null;n=n.slice(i,o+1);for(var a=[],s=n[0],u=1,l=1;l<n.length;l++)n[l]===s?u++:(s=n[l],a.push(u),u=1);return a.push(u),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:i,right:o}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],i=Math.ceil(r.reduce(function(u,l){return(u+l)/2},0));r.length>0;){var o=r.splice(0,8).splice(0,7),a=o.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[a])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(ft),LC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oi=function(t){LC(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var i=0;i<n.length;i++)if(ft.patternMatchVariance(r,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new V},e.count=function(r){return we.sum(new Int32Array(r))},e.increment=function(r,n){for(var i=0,o=n[0],a=1;a<r.length;a++)n[a]>o&&(o=n[a],i=a);r[i]++},e.decrement=function(r,n){for(var i=0,o=n[0],a=1;a<r.length;a++)n[a]<o&&(o=n[a],i=a);r[i]--},e.isFinderPattern=function(r){var n,i,o=r[0]+r[1],a=o+r[2]+r[3],s=o/a;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;try{for(var f=FC(r),h=f.next();!h.done;h=f.next()){var d=h.value;d>l&&(l=d),d<u&&(u=d)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}return l<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(ft),Wl=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Z_=function(){function t(e,r,n,i,o){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Y(n,o)),this.resultPoints.push(new Y(i,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),BC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Io=function(){function t(){}return t.getRSSvalue=function(e,r,n){var i,o,a=0;try{for(var s=BC(e),u=s.next();!u.done;u=s.next()){var l=u.value;a+=l}}catch(m){i={error:m}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}for(var f=0,h=0,d=e.length,p=0;p<d-1;p++){var g=void 0;for(g=1,h|=1<<p;g<e[p];g++,h&=~(1<<p)){var w=t.combins(a-g-1,d-p-2);if(n&&h===0&&a-g-(d-p-1)>=d-p-1&&(w-=t.combins(a-g-(d-p),d-p-2)),d-p-1>1){for(var I=0,_=a-g-(d-p-2);_>r;_--)I+=t.combins(a-g-_-1,d-p-3);w-=I*(d-1-p)}else a-g>r&&w--;f+=w}a-=g}return f},t.combins=function(e,r){var n,i;e-r>r?(i=r,n=e-r):(i=e-r,n=r);for(var o=1,a=1,s=e;s>n;s--)o*=s,a<=i&&(o/=a,a++);for(;a<=i;)o/=a,a++;return o},t}(),VC=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,i=new yt(n),o=0,a=e[0],s=a.getRightChar().getValue(),u=11;u>=0;--u)s&1<<u&&i.set(o),o++;for(var u=1;u<e.length;++u){for(var l=e[u],f=l.getLeftChar().getValue(),h=11;h>=0;--h)f&1<<h&&i.set(o),o++;if(l.getRightChar()!==null)for(var d=l.getRightChar().getValue(),h=11;h>=0;--h)d&1<<h&&i.set(o),o++}return i},t}(),Ii=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),F0=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),UC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nr=function(t){UC(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(F0),jC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ci=function(t){jC(e,t);function e(r,n,i){var o=t.call(this,r)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=n,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(F0),zC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),so=function(t){zC(e,t);function e(r,n,i){var o=t.call(this,r)||this;if(n<0||n>10||i<0||i>10)throw new W;return o.firstDigit=n,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(F0),Uu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HC=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,i,o,a,s,u,l;if(!e)return null;if(e.length<2)throw new V;var f=e.substring(0,2);try{for(var h=Uu(t.TWO_DIGIT_DATA_LENGTH),d=h.next();!d.done;d=h.next()){var p=d.value;if(p[0]===f)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(M){r={error:M}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}if(e.length<3)throw new V;var g=e.substring(0,3);try{for(var w=Uu(t.THREE_DIGIT_DATA_LENGTH),I=w.next();!I.done;I=w.next()){var p=I.value;if(p[0]===g)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(M){i={error:M}}finally{try{I&&!I.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}try{for(var _=Uu(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),m=_.next();!m.done;m=_.next()){var p=m.value;if(p[0]===g)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(M){a={error:M}}finally{try{m&&!m.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}if(e.length<4)throw new V;var x=e.substring(0,4);try{for(var P=Uu(t.FOUR_DIGIT_DATA_LENGTH),k=P.next();!k.done;k=P.next()){var p=k.value;if(p[0]===x)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(M){u={error:M}}finally{try{k&&!k.done&&(l=P.return)&&l.call(P)}finally{if(u)throw u.error}}throw new V},t.processFixedAI=function(e,r,n){if(n.length<e)throw new V;var i=n.substring(0,e);if(n.length<e+r)throw new V;var o=n.substring(e,e+r),a=n.substring(e+r),s="("+i+")"+o,u=t.parseFieldsInGeneralPurpose(a);return u==null?s:s+u},t.processVariableAI=function(e,r,n){var i=n.substring(0,e),o;n.length<e+r?o=n.length:o=e+r;var a=n.substring(e,o),s=n.substring(o),u="("+i+")"+a,l=t.parseFieldsInGeneralPurpose(s);return l==null?u:u+l},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),ul=function(){function t(e){this.buffer=new ue,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,i=null;do{var o=this.decodeGeneralPurposeField(n,i),a=HC.parseFieldsInGeneralPurpose(o.getNewString());if(a!=null&&e.append(a),o.isRemaining()?i=""+o.getRemainingValue():i=null,n===o.getNewPosition())break;n=o.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new so(this.information.getSize(),so.FNC1,so.FNC1):new so(this.information.getSize(),r-1,so.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,o=(n-8)%11;return new so(e+7,i,o)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var i=0,o=0;o<n;++o)e.get(r+o)&&(i|=1<<n-o-1);return i},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Ci(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Ci(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Ci(this.current.getPosition(),this.buffer.toString()):r=new Ci(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ii(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Ci(this.current.getPosition(),this.buffer.toString());return new Ii(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ii(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Ci(this.current.getPosition(),this.buffer.toString());return new Ii(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ii(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Ci(this.current.getPosition(),this.buffer.toString());return new Ii(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ii(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Nr(e+5,Nr.FNC1);if(r>=5&&r<15)return new Nr(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Nr(e+7,""+(n+1));if(n>=90&&n<116)return new Nr(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new W}return new Nr(e+8,o)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Nr(e+5,Nr.FNC1);if(r>=5&&r<15)return new Nr(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Nr(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Hs("Decoding invalid alphanumeric value: "+n)}return new Nr(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),J_=function(){function t(e){this.information=e,this.generalDecoder=new ul(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),WC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lr=function(t){WC(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var i=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,i){for(var o=0;o<4;++o){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a)}e.appendCheckDigit(r,i)},e.appendCheckDigit=function(r,n){for(var i=0,o=0;o<13;o++){var a=r.charAt(o+n).charCodeAt(0)-48;i+=o&1?a:3*a}i=10-i%10,i===10&&(i=0),r.append(i)},e.GTIN_SIZE=40,e}(J_),GC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$C=function(t){GC(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new ue;r.append("(01)");var n=r.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(i),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Lr),XC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KC=function(t){XC(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new ue;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(J_),qC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ll=function(t){qC(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(r,o);for(var a=this.checkWeight(o),s=1e5,u=0;u<5;++u)a/s===0&&r.append("0"),s/=10;r.append(a)},e}(Lr),YC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e2=function(t){YC(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+ll.GTIN_SIZE+e.WEIGHT_SIZE)throw new V;var r=new ue;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+ll.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(ll),QC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZC=function(t){QC(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(e2),JC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eS=function(t){JC(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(e2),tS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rS=function(t){tS(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Lr.GTIN_SIZE)throw new V;var r=new ue;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Lr.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Lr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Lr),nS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iS=function(t){nS(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Lr.GTIN_SIZE)throw new V;var r=new ue;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Lr.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Lr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Lr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(o.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Lr),oS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bn=function(t){oS(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.dateCode=i,o.firstAIdigits=n,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new V;var r=new ue;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){r.append("("),r.append(this.dateCode),r.append(")");var o=i%32;i/=32;var a=i%12+1;i/=12;var s=i;s/10===0&&r.append("0"),r.append(s),a/10===0&&r.append("0"),r.append(a),o/10===0&&r.append("0"),r.append(o)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(ll);function aS(t){try{if(t.get(1))return new $C(t);if(!t.get(2))return new KC(t);var e=ul.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new ZC(t);case 5:return new eS(t)}var r=ul.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new rS(t);case 13:return new iS(t)}var n=ul.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new bn(t,"310","11");case 57:return new bn(t,"320","11");case 58:return new bn(t,"310","13");case 59:return new bn(t,"320","13");case 60:return new bn(t,"310","15");case 61:return new bn(t,"320","15");case 62:return new bn(t,"310","17");case 63:return new bn(t,"320","17")}}catch(i){throw console.log(i),new Hs("unknown decoder: "+t)}}var eg=function(){function t(e,r,n,i){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),sS=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(i,o){r.forEach(function(a){i.getLeftChar().getValue()===a.getLeftChar().getValue()&&i.getRightChar().getValue()===a.getRightChar().getValue()&&i.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),uS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lS=function(t){uS(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof V){if(!this.pairs.length)throw new V;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(r,!1),o){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new V},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var i,o,a=n;a<this.rows.length;a++){var s=this.rows[a];this.pairs.length=0;try{for(var u=(i=void 0,kn(r)),l=u.next();!l.done;l=u.next()){var f=l.value;this.pairs.push(f.getPairs())}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var h=new Array(r);h.push(s);try{return this.checkRows(h,a+1)}catch(d){console.log(d)}}}throw new V},e.isValidSequence=function(r){var n,i;try{for(var o=kn(e.FINDER_PATTERN_SEQUENCES),a=o.next();!a.done;a=o.next()){var s=a.value;if(!(r.length>s.length)){for(var u=!0,l=0;l<r.length;l++)if(r[l].getFinderPattern().getValue()!==s[l]){u=!1;break}if(u)return!0}}}catch(f){n={error:f}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var i=0,o=!1,a=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>r){a=s.isEquivalent(this.pairs);break}o=s.isEquivalent(this.pairs),i++}a||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new sS(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var i,o,a,s,u,l;try{for(var f=kn(n),h=f.next();!h.done;h=f.next()){var d=h.value;if(d.getPairs().length!==r.length){var p=!0;try{for(var g=(a=void 0,kn(d.getPairs())),w=g.next();!w.done;w=g.next()){var I=w.value,_=!1;try{for(var m=(u=void 0,kn(r)),x=m.next();!x.done;x=m.next()){var P=x.value;if(eg.equals(I,P)){_=!0;break}}}catch(k){u={error:k}}finally{try{x&&!x.done&&(l=m.return)&&l.call(m)}finally{if(u)throw u.error}}_||(p=!1)}}catch(k){a={error:k}}finally{try{w&&!w.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}}}}catch(k){i={error:k}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}},e.isPartialRow=function(r,n){var i,o,a,s,u,l;try{for(var f=kn(n),h=f.next();!h.done;h=f.next()){var d=h.value,p=!0;try{for(var g=(a=void 0,kn(r)),w=g.next();!w.done;w=g.next()){var I=w.value,_=!1;try{for(var m=(u=void 0,kn(d.getPairs())),x=m.next();!x.done;x=m.next()){var P=x.value;if(I.equals(P)){_=!0;break}}}catch(k){u={error:k}}finally{try{x&&!x.done&&(l=m.return)&&l.call(m)}finally{if(u)throw u.error}}if(!_){p=!1;break}}}catch(k){a={error:k}}finally{try{w&&!w.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}if(p)return!0}}catch(k){i={error:k}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=VC.buildBitArray(r),i=aS(n),o=i.parseInformation(),a=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),u=[a[0],a[1],s[0],s[1]];return new Ht(o,null,null,u,Z.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),i=r.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),a=2,s=1;s<this.pairs.size();++s){var u=this.pairs.get(s);o+=u.getLeftChar().getChecksumPortion(),a++;var l=u.getRightChar();l!=null&&(o+=l.getChecksumPortion(),a++)}o%=211;var f=211*(a-4)+o;return f===n.getValue()},e.getNextSecondBar=function(r,n){var i;return r.get(n)?(i=r.getNextUnset(n),i=r.getNextSet(i)):(i=r.getNextSet(n),i=r.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(r,n,i){var o=n.length%2===0;this.startFromEven&&(o=!o);var a,s=!0,u=-1;do this.findNextPair(r,n,u),a=this.parseFoundFinderPattern(r,i,o),a===null?u=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var l=this.decodeDataCharacter(r,a,o,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new V;var f;try{f=this.decodeDataCharacter(r,a,o,!1)}catch(h){f=null,console.log(h)}return new eg(l,f,a,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var a=r.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(n))s=0;else{var u=n[n.length-1];s=u.getFinderPattern().getStartEnd()[1]}var l=n.length%2!==0;this.startFromEven&&(l=!l);for(var f=!1;s<a&&(f=!r.get(s),!!f);)s++;for(var h=0,d=s,p=s;p<a;p++)if(r.get(p)!==f)o[h]++;else{if(h===3){if(l&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=d,this.startEnd[1]=p;return}l&&e.reverseCounters(o),d+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,f=!f}throw new V},e.reverseCounters=function(r){for(var n=r.length,i=0;i<n/2;++i){var o=r[i];r[i]=r[n-i-1],r[n-i-1]=o}},e.prototype.parseFoundFinderPattern=function(r,n,i){var o,a,s;if(i){for(var u=this.startEnd[0]-1;u>=0&&!r.get(u);)u--;u++,o=this.startEnd[0]-u,a=u,s=this.startEnd[1]}else a=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),o=s-this.startEnd[1];var l=this.getDecodeFinderCounters();be.arraycopy(l,0,l,1,l.length-1),l[0]=o;var f;try{f=this.parseFinderValue(l,e.FINDER_PATTERNS)}catch{return null}return new Z_(f,[a,s],a,s,n)},e.prototype.decodeDataCharacter=function(r,n,i,o){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(o)e.recordPatternInReverse(r,n.getStartEnd()[0],a);else{e.recordPattern(r,n.getStartEnd()[1],a);for(var u=0,l=a.length-1;u<l;u++,l--){var f=a[u];a[u]=a[l],a[l]=f}}var h=17,d=we.sum(new Int32Array(a))/h,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-p)/p>.3)throw new V;for(var g=this.getOddCounts(),w=this.getEvenCounts(),I=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),u=0;u<a.length;u++){var m=1*a[u]/d,x=m+.5;if(x<1){if(m<.3)throw new V;x=1}else if(x>8){if(m>8.7)throw new V;x=8}var P=u/2;u&1?(w[P]=x,_[P]=m-x):(g[P]=x,I[P]=m-x)}this.adjustOddEvenCounts(h);for(var k=4*n.getValue()+(i?0:2)+(o?0:1)-1,M=0,A=0,u=g.length-1;u>=0;u--){if(e.isNotA1left(n,i,o)){var E=e.WEIGHTS[k][2*u];A+=g[u]*E}M+=g[u]}for(var S=0,u=w.length-1;u>=0;u--)if(e.isNotA1left(n,i,o)){var E=e.WEIGHTS[k][2*u+1];S+=w[u]*E}var R=A+S;if(M&1||M>13||M<4)throw new V;var D=(13-M)/2,N=e.SYMBOL_WIDEST[D],O=9-N,fe=Io.getRSSvalue(g,N,!0),Ue=Io.getRSSvalue(w,O,!1),mr=e.EVEN_TOTAL_SUBSET[D],Wt=e.GSUM[D],$=fe*mr+Ue+Wt;return new Wl($,R)},e.isNotA1left=function(r,n,i){return!(r.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(r){var n=we.sum(new Int32Array(this.getOddCounts())),i=we.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;n>13?a=!0:n<4&&(o=!0);var s=!1,u=!1;i>13?u=!0:i<4&&(s=!0);var l=n+i-r,f=(n&1)===1,h=(i&1)===0;if(l===1)if(f){if(h)throw new V;a=!0}else{if(!h)throw new V;u=!0}else if(l===-1)if(f){if(h)throw new V;o=!0}else{if(!h)throw new V;s=!0}else if(l===0){if(f){if(!h)throw new V;n<i?(o=!0,u=!0):(a=!0,s=!0)}else if(h)throw new V}else throw new V;if(o){if(a)throw new V;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(u)throw new V;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Oi),cS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fS=function(t){cS(e,t);function e(r,n,i){var o=t.call(this,r,n)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Wl),hS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tg=function(t){hS(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,i){var o,a,s,u,l=this.decodePair(n,!1,r,i);e.addOrTally(this.possibleLeftPairs,l),n.reverse();var f=this.decodePair(n,!0,r,i);e.addOrTally(this.possibleRightPairs,f),n.reverse();try{for(var h=Kf(this.possibleLeftPairs),d=h.next();!d.done;d=h.next()){var p=d.value;if(p.getCount()>1)try{for(var g=(s=void 0,Kf(this.possibleRightPairs)),w=g.next();!w.done;w=g.next()){var I=w.value;if(I.getCount()>1&&e.checkChecksum(p,I))return e.constructResult(p,I)}}catch(_){s={error:_}}finally{try{w&&!w.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}}}catch(_){o={error:_}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}throw new V},e.addOrTally=function(r,n){var i,o;if(n!=null){var a=!1;try{for(var s=Kf(r),u=s.next();!u.done;u=s.next()){var l=u.value;if(l.getValue()===n.getValue()){l.incrementCount(),a=!0;break}}}catch(f){i={error:f}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}a||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var i=4537077*r.getValue()+n.getValue(),o=new String(i).toString(),a=new ue,s=13-o.length;s>0;s--)a.append("0");a.append(o);for(var u=0,s=0;s<13;s++){var l=a.charAt(s).charCodeAt(0)-48;u+=s&1?l:3*l}u=10-u%10,u===10&&(u=0),a.append(u.toString());var f=r.getFinderPattern().getResultPoints(),h=n.getFinderPattern().getResultPoints();return new Ht(a.toString(),null,0,[f[0],f[1],h[0],h[1]],Z.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var i=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,o=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(r,n,i,o){try{var a=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,i,n,a),u=o==null?null:o.get(ke.NEED_RESULT_POINT_CALLBACK);if(u!=null){var l=(a[0]+a[1])/2;n&&(l=r.getSize()-1-l),u.foundPossibleResultPoint(new Y(l,i))}var f=this.decodeDataCharacter(r,s,!0),h=this.decodeDataCharacter(r,s,!1);return new fS(1597*f.getValue()+h.getValue(),f.getChecksumPortion()+4*h.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,i){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(i)ft.recordPatternInReverse(r,n.getStartEnd()[0],o);else{ft.recordPattern(r,n.getStartEnd()[1]+1,o);for(var s=0,u=o.length-1;s<u;s++,u--){var l=o[s];o[s]=o[u],o[u]=l}}for(var f=i?16:15,h=we.sum(new Int32Array(o))/f,d=this.getOddCounts(),p=this.getEvenCounts(),g=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),s=0;s<o.length;s++){var I=o[s]/h,_=Math.floor(I+.5);_<1?_=1:_>8&&(_=8);var m=Math.floor(s/2);s&1?(p[m]=_,w[m]=I-_):(d[m]=_,g[m]=I-_)}this.adjustOddEvenCounts(i,f);for(var x=0,P=0,s=d.length-1;s>=0;s--)P*=9,P+=d[s],x+=d[s];for(var k=0,M=0,s=p.length-1;s>=0;s--)k*=9,k+=p[s],M+=p[s];var A=P+3*k;if(i){if(x&1||x>12||x<4)throw new V;var E=(12-x)/2,S=e.OUTSIDE_ODD_WIDEST[E],R=9-S,D=Io.getRSSvalue(d,S,!1),N=Io.getRSSvalue(p,R,!0),O=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],fe=e.OUTSIDE_GSUM[E];return new Wl(D*O+N+fe,A)}else{if(M&1||M>10||M<4)throw new V;var E=(10-M)/2,S=e.INSIDE_ODD_WIDEST[E],R=9-S,D=Io.getRSSvalue(d,S,!0),N=Io.getRSSvalue(p,R,!1),Ue=e.INSIDE_ODD_TOTAL_SUBSET[E],fe=e.INSIDE_GSUM[E];return new Wl(N*Ue+D+fe,A)}},e.prototype.findFinderPattern=function(r,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=r.getSize(),a=!1,s=0;s<o&&(a=!r.get(s),n!==a);)s++;for(var u=0,l=s,f=s;f<o;f++)if(r.get(f)!==a)i[u]++;else{if(u===3){if(Oi.isFinderPattern(i))return[l,f];l+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,a=!a}throw new V},e.prototype.parseFoundFinderPattern=function(r,n,i,o){for(var a=r.get(o[0]),s=o[0]-1;s>=0&&a!==r.get(s);)s--;s++;var u=o[0]-s,l=this.getDecodeFinderCounters(),f=new Int32Array(l.length);be.arraycopy(l,0,f,1,l.length-1),f[0]=u;var h=this.parseFinderValue(f,e.FINDER_PATTERNS),d=s,p=o[1];return i&&(d=r.getSize()-1-d,p=r.getSize()-1-p),new Z_(h,[s,o[1]],d,p,n)},e.prototype.adjustOddEvenCounts=function(r,n){var i=we.sum(new Int32Array(this.getOddCounts())),o=we.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1,u=!1,l=!1;r?(i>12?s=!0:i<4&&(a=!0),o>12?l=!0:o<4&&(u=!0)):(i>11?s=!0:i<5&&(a=!0),o>10?l=!0:o<4&&(u=!0));var f=i+o-n,h=(i&1)===(r?1:0),d=(o&1)===1;if(f===1)if(h){if(d)throw new V;s=!0}else{if(!d)throw new V;l=!0}else if(f===-1)if(h){if(d)throw new V;a=!0}else{if(!d)throw new V;u=!0}else if(f===0){if(h){if(!d)throw new V;i<o?(a=!0,l=!0):(s=!0,u=!0)}else if(d)throw new V}else throw new V;if(a){if(s)throw new V;Oi.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Oi.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(l)throw new V;Oi.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&Oi.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Oi),dS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Co=function(t){dS(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var i=r?r.get(ke.POSSIBLE_FORMATS):null,o=r&&r.get(ke.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,a=r&&r.get(ke.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Z.EAN_13)||i.includes(Z.UPC_A)||i.includes(Z.EAN_8)||i.includes(Z.UPC_E))&&n.readers.push(new Xf(r)),i.includes(Z.CODE_39)&&n.readers.push(new Gv(o,a)),i.includes(Z.CODE_93)&&n.readers.push(new $v),i.includes(Z.CODE_128)&&n.readers.push(new Wv),i.includes(Z.ITF)&&n.readers.push(new Xv),i.includes(Z.CODABAR)&&n.readers.push(new MC),i.includes(Z.RSS_14)&&n.readers.push(new tg),i.includes(Z.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new lS))),n.readers.length===0&&(n.readers.push(new Xf(r)),n.readers.push(new Gv),n.readers.push(new $v),n.readers.push(new Xf(r)),n.readers.push(new Wv),n.readers.push(new Xv),n.readers.push(new tg)),n}return e.prototype.decodeRow=function(r,n,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(r,n,i)}catch{}throw new V},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(ft),pS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){pS(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Co(n),r,n)||this}return e})(oa);var rg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ie=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Ee=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),vS=function(){function t(e,r,n,i,o,a){var s,u;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=a;var l=0,f=a.getECCodewords(),h=a.getECBlocks();try{for(var d=rg(h),p=d.next();!p.done;p=d.next()){var g=p.value;l+=g.getCount()*(g.getDataCodewords()+f)}}catch(w){s={error:w}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(s)throw s.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,i;if(e&1||r&1)throw new W;try{for(var o=rg(t.VERSIONS),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}throw new W},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Ie(5,new Ee(1,3))),new t(2,12,12,10,10,new Ie(7,new Ee(1,5))),new t(3,14,14,12,12,new Ie(10,new Ee(1,8))),new t(4,16,16,14,14,new Ie(12,new Ee(1,12))),new t(5,18,18,16,16,new Ie(14,new Ee(1,18))),new t(6,20,20,18,18,new Ie(18,new Ee(1,22))),new t(7,22,22,20,20,new Ie(20,new Ee(1,30))),new t(8,24,24,22,22,new Ie(24,new Ee(1,36))),new t(9,26,26,24,24,new Ie(28,new Ee(1,44))),new t(10,32,32,14,14,new Ie(36,new Ee(1,62))),new t(11,36,36,16,16,new Ie(42,new Ee(1,86))),new t(12,40,40,18,18,new Ie(48,new Ee(1,114))),new t(13,44,44,20,20,new Ie(56,new Ee(1,144))),new t(14,48,48,22,22,new Ie(68,new Ee(1,174))),new t(15,52,52,24,24,new Ie(42,new Ee(2,102))),new t(16,64,64,14,14,new Ie(56,new Ee(2,140))),new t(17,72,72,16,16,new Ie(36,new Ee(4,92))),new t(18,80,80,18,18,new Ie(48,new Ee(4,114))),new t(19,88,88,20,20,new Ie(56,new Ee(4,144))),new t(20,96,96,22,22,new Ie(68,new Ee(4,174))),new t(21,104,104,24,24,new Ie(56,new Ee(6,136))),new t(22,120,120,18,18,new Ie(68,new Ee(6,175))),new t(23,132,132,20,20,new Ie(62,new Ee(8,163))),new t(24,144,144,22,22,new Ie(62,new Ee(8,156),new Ee(2,155))),new t(25,8,18,6,16,new Ie(7,new Ee(1,5))),new t(26,8,32,6,14,new Ie(11,new Ee(1,10))),new t(27,12,26,10,24,new Ie(14,new Ee(1,16))),new t(28,12,36,10,16,new Ie(18,new Ee(1,22))),new t(29,16,36,14,16,new Ie(24,new Ee(1,32))),new t(30,16,48,14,22,new Ie(28,new Ee(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),gS=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new W;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new tn(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return vS.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,i=0,o=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),s=!1,u=!1,l=!1,f=!1;do if(n===o&&i===0&&!s)e[r++]=this.readCorner1(o,a)&255,n-=2,i+=2,s=!0;else if(n===o-2&&i===0&&a&3&&!u)e[r++]=this.readCorner2(o,a)&255,n-=2,i+=2,u=!0;else if(n===o+4&&i===2&&!(a&7)&&!l)e[r++]=this.readCorner3(o,a)&255,n-=2,i+=2,l=!0;else if(n===o-2&&i===0&&(a&7)===4&&!f)e[r++]=this.readCorner4(o,a)&255,n-=2,i+=2,f=!0;else{do n<o&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,o,a)&255),n-=2,i+=2;while(n>=0&&i<a);n+=1,i+=3;do n>=0&&i<a&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,o,a)&255),n+=2,i-=2;while(n<o&&i>=0);n+=3,i+=1}while(n<o||i<a);if(r!==this.version.getTotalCodewords())throw new W;return e},t.prototype.readModule=function(e,r,n,i){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,i){var o=0;return this.readModule(e-2,r-2,n,i)&&(o|=1),o<<=1,this.readModule(e-2,r-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,r-2,n,i)&&(o|=1),o<<=1,this.readModule(e-1,r-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,r,n,i)&&(o|=1),o<<=1,this.readModule(e,r-2,n,i)&&(o|=1),o<<=1,this.readModule(e,r-1,n,i)&&(o|=1),o<<=1,this.readModule(e,r,n,i)&&(o|=1),o},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new J("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),a=r/i|0,s=n/o|0,u=a*i,l=s*o,f=new tn(l,u),h=0;h<a;++h)for(var d=h*i,p=0;p<s;++p)for(var g=p*o,w=0;w<i;++w)for(var I=h*(i+2)+1+w,_=d+w,m=0;m<o;++m){var x=p*(o+2)+1+m;if(e.get(x,I)){var P=g+m;f.set(P,_)}}return f},t}(),ng=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yS=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,i,o,a,s=r.getECBlocks(),u=0,l=s.getECBlocks();try{for(var f=ng(l),h=f.next();!h.done;h=f.next()){var d=h.value;u+=d.getCount()}}catch(fe){n={error:fe}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}var p=new Array(u),g=0;try{for(var w=ng(l),I=w.next();!I.done;I=w.next())for(var d=I.value,_=0;_<d.getCount();_++){var m=d.getDataCodewords(),x=s.getECCodewords()+m;p[g++]=new t(m,new Uint8Array(x))}}catch(fe){o={error:fe}}finally{try{I&&!I.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}for(var P=p[0].codewords.length,k=P-s.getECCodewords(),M=k-1,A=0,_=0;_<M;_++)for(var E=0;E<g;E++)p[E].codewords[_]=e[A++];for(var S=r.getVersionNumber()===24,R=S?8:g,E=0;E<R;E++)p[E].codewords[k-1]=e[A++];for(var D=p[0].codewords.length,_=k;_<D;_++)for(var E=0;E<g;E++){var N=S?(E+8)%g:E,O=S&&N>7?_-1:_;p[N].codewords[O]=e[A++]}if(A!==e.length)throw new J;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),t2=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new J(""+e);var r=0,n=this.bitOffset,i=this.byteOffset,o=this.bytes;if(n>0){var a=8-n,s=e<a?e:a,u=a-s,l=255>>8-s<<u;r=(o[i]&l)>>u,e-=s,n+=s,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)r=r<<8|o[i]&255,i++,e-=8;if(e>0){var u=8-e,l=255>>u<<u;r=r<<e|(o[i]&l)>>u,n+=e}}return this.bitOffset=n,this.byteOffset=i,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),nt;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(nt||(nt={}));var mS=function(){function t(){}return t.decode=function(e){var r=new t2(e),n=new ue,i=new ue,o=new Array,a=nt.ASCII_ENCODE;do if(a===nt.ASCII_ENCODE)a=this.decodeAsciiSegment(r,n,i);else{switch(a){case nt.C40_ENCODE:this.decodeC40Segment(r,n);break;case nt.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case nt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case nt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case nt.BASE256_ENCODE:this.decodeBase256Segment(r,n,o);break;default:throw new W}a=nt.ASCII_ENCODE}while(a!==nt.PAD_ENCODE&&r.available()>0);return i.length()>0&&n.append(i.toString()),new Oc(e,n.toString(),o.length===0?null:o,null)},t.decodeAsciiSegment=function(e,r,n){var i=!1;do{var o=e.readBits(8);if(o===0)throw new W;if(o<=128)return i&&(o+=128),r.append(String.fromCharCode(o-1)),nt.ASCII_ENCODE;if(o===129)return nt.PAD_ENCODE;if(o<=229){var a=o-130;a<10&&r.append("0"),r.append(""+a)}else switch(o){case 230:return nt.C40_ENCODE;case 231:return nt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return nt.ANSIX12_ENCODE;case 239:return nt.TEXT_ENCODE;case 240:return nt.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new W;break}}while(e.available()>0);return nt.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var s=0;s<3;s++){var u=i[s];switch(o){case 0:if(u<3)o=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var l=this.C40_BASIC_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else throw new W;break;case 1:n?(r.append(String.fromCharCode(u+128)),n=!1):r.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var l=this.C40_SHIFT2_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else switch(u){case 27:r.append("");break;case 30:n=!0;break;default:throw new W}o=0;break;case 3:n?(r.append(String.fromCharCode(u+224)),n=!1):r.append(String.fromCharCode(u+96)),o=0;break;default:throw new W}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,i=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(var s=0;s<3;s++){var u=i[s];switch(o){case 0:if(u<3)o=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var l=this.TEXT_BASIC_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else throw new W;break;case 1:n?(r.append(String.fromCharCode(u+128)),n=!1):r.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var l=this.TEXT_SHIFT2_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else switch(u){case 27:r.append("");break;case 30:n=!0;break;default:throw new W}o=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var l=this.TEXT_SHIFT3_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l),o=0}else throw new W;break;default:throw new W}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var o=0;o<3;o++){var a=n[o];switch(a){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(a<14)r.append(String.fromCharCode(a+44));else if(a<40)r.append(String.fromCharCode(a+51));else throw new W;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var i=(e<<8)+r-1,o=Math.floor(i/1600);n[0]=o,i-=o*1600,o=Math.floor(i/40),n[1]=o,n[2]=i-o*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}i&32||(i|=64),r.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),a;if(o===0?a=e.available()/8|0:o<250?a=o:a=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),a<0)throw new W;for(var s=new Uint8Array(a),u=0;u<a;u++){if(e.available()<8)throw new W;s[u]=this.unrandomize255State(e.readBits(8),i++)}n.push(s);try{r.append(Tr.decode(s,ge.ISO88591))}catch(l){throw new Hs("Platform does not support required encoding: "+l.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,i=e-n;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),_S=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wS=function(){function t(){this.rsDecoder=new Pc(nr.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,i=new gS(e),o=i.getVersion(),a=i.readCodewords(),s=yS.getDataBlocks(a,o),u=0;try{for(var l=_S(s),f=l.next();!f.done;f=l.next()){var h=f.value;u+=h.getNumDataCodewords()}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=new Uint8Array(u),p=s.length,g=0;g<p;g++){var w=s[g],I=w.getCodewords(),_=w.getNumDataCodewords();this.correctErrors(I,_);for(var m=0;m<_;m++)d[m*p+g]=I[m]}return mS.decode(d)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new rt}for(var i=0;i<r;i++)e[i]=n[i]},t}(),xS=function(){function t(e){this.image=e,this.rectangleDetector=new ld(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new V;r=this.shiftToModuleCenter(r);var n=r[0],i=r[1],o=r[2],a=r[3],s=this.transitionsBetween(n,a)+1,u=this.transitionsBetween(o,a)+1;(s&1)===1&&(s+=1),(u&1)===1&&(u+=1),4*s<7*u&&4*u<7*s&&(s=u=Math.max(s,u));var l=t.sampleGrid(this.image,n,i,o,a,s,u);return new M0(l,[n,i,o,a])},t.shiftPoint=function(e,r,n){var i=(r.getX()-e.getX())/(n+1),o=(r.getY()-e.getY())/(n+1);return new Y(e.getX()+i,e.getY()+o)},t.moveAway=function(e,r,n){var i=e.getX(),o=e.getY();return i<r?i-=1:i+=1,o<n?o-=1:o+=1,new Y(i,o)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],i=e[3],o=e[2],a=this.transitionsBetween(r,n),s=this.transitionsBetween(n,i),u=this.transitionsBetween(i,o),l=this.transitionsBetween(o,r),f=a,h=[o,r,n,i];return f>s&&(f=s,h[0]=r,h[1]=n,h[2]=i,h[3]=o),f>u&&(f=u,h[0]=n,h[1]=i,h[2]=o,h[3]=r),f>l&&(h[0]=i,h[1]=o,h[2]=r,h[3]=n),h},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(r,o),s=t.shiftPoint(n,i,(a+1)*4),u=t.shiftPoint(i,n,(a+1)*4),l=this.transitionsBetween(s,r),f=this.transitionsBetween(u,o);return l<f?(e[0]=r,e[1]=n,e[2]=i,e[3]=o):(e[0]=n,e[1]=i,e[2]=o,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(r,o),s=this.transitionsBetween(n,o),u=t.shiftPoint(r,n,(s+1)*4),l=t.shiftPoint(i,n,(a+1)*4);a=this.transitionsBetween(u,o),s=this.transitionsBetween(l,o);var f=new Y(o.getX()+(i.getX()-n.getX())/(a+1),o.getY()+(i.getY()-n.getY())/(a+1)),h=new Y(o.getX()+(r.getX()-n.getX())/(s+1),o.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(f))return this.isValid(h)?h:null;if(!this.isValid(h))return f;var d=this.transitionsBetween(u,f)+this.transitionsBetween(l,f),p=this.transitionsBetween(u,h)+this.transitionsBetween(l,h);return d>p?f:h},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],i=e[2],o=e[3],a=this.transitionsBetween(r,o)+1,s=this.transitionsBetween(i,o)+1,u=t.shiftPoint(r,n,s*4),l=t.shiftPoint(i,n,a*4);a=this.transitionsBetween(u,o)+1,s=this.transitionsBetween(l,o)+1,(a&1)===1&&(a+=1),(s&1)===1&&(s+=1);var f=(r.getX()+n.getX()+i.getX()+o.getX())/4,h=(r.getY()+n.getY()+i.getY()+o.getY())/4;r=t.moveAway(r,f,h),n=t.moveAway(n,f,h),i=t.moveAway(i,f,h),o=t.moveAway(o,f,h);var d,p;return u=t.shiftPoint(r,n,s*4),u=t.shiftPoint(u,o,a*4),d=t.shiftPoint(n,r,s*4),d=t.shiftPoint(d,i,a*4),l=t.shiftPoint(i,o,s*4),l=t.shiftPoint(l,n,a*4),p=t.shiftPoint(o,i,s*4),p=t.shiftPoint(p,r,a*4),[u,d,l,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,i,o,a,s){var u=L0.getInstance();return u.sampleGrid(e,a,s,.5,.5,a-.5,.5,a-.5,s-.5,.5,s-.5,r.getX(),r.getY(),o.getX(),o.getY(),i.getX(),i.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(r.getX()),a=Math.trunc(r.getY()),s=Math.abs(a-i)>Math.abs(o-n);if(s){var u=n;n=i,i=u,u=o,o=a,a=u}for(var l=Math.abs(o-n),f=Math.abs(a-i),h=-l/2,d=i<a?1:-1,p=n<o?1:-1,g=0,w=this.image.get(s?i:n,s?n:i),I=n,_=i;I!==o;I+=p){var m=this.image.get(s?_:I,s?I:_);if(m!==w&&(g++,w=m),h+=f,h>0){if(_===a)break;_+=d,h-=l}}return g},t}(),Gl=function(){function t(){this.decoder=new wS}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,i;if(r!=null&&r.has(ke.PURE_BARCODE)){var o=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(o),i=t.NO_POINTS}else{var a=new xS(e.getBlackMatrix()).detect();n=this.decoder.decode(a.getBits()),i=a.getPoints()}var s=n.getRawBytes(),u=new Ht(n.getText(),s,8*s.length,i,Z.DATA_MATRIX,be.currentTimeMillis()),l=n.getByteSegments();l!=null&&u.putMetadata(Ct.BYTE_SEGMENTS,l);var f=n.getECLevel();return f!=null&&u.putMetadata(Ct.ERROR_CORRECTION_LEVEL,f),u},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new V;var i=this.moduleSize(r,e),o=r[1],a=n[1],s=r[0],u=n[0],l=(u-s+1)/i,f=(a-o+1)/i;if(l<=0||f<=0)throw new V;var h=i/2;o+=h,s+=h;for(var d=new tn(l,f),p=0;p<f;p++)for(var g=o+p*i,w=0;w<l;w++)e.get(s+w*i,g)&&d.set(w,p);return d},t.moduleSize=function(e,r){for(var n=r.getWidth(),i=e[0],o=e[1];i<n&&r.get(i,o);)i++;if(i===n)throw new V;var a=i-e[0];if(a===0)throw new V;return a},t.NO_POINTS=[],t}(),ES=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){ES(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Gl,r)||this}return e})(oa);var So;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(So||(So={}));var AS=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Qe(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new J;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(So.L,"L",1),t.M=new t(So.M,"M",0),t.Q=new t(So.Q,"Q",3),t.H=new t(So.H,"H",2),t}(),IS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r2=function(){function t(e){this.errorCorrectionLevel=AS.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return le.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,i,o=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=IS(t.FORMAT_INFO_DECODE_LOOKUP),u=s.next();!u.done;u=s.next()){var l=u.value,f=l[0];if(f===e||f===r)return new t(l[1]);var h=t.numBitsDiffering(e,f);h<o&&(a=l[1],o=h),e!==r&&(h=t.numBitsDiffering(r,f),h<o&&(a=l[1],o=h))}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o<=3?new t(a):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),CS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,i=this.ecBlocks;try{for(var o=CS(i),a=o.next();!a.done;a=o.next()){var s=a.value;n+=s.getCount()}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),T=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),SS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bi=function(){function t(e,r){for(var n,i,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=o;var s=0,u=o[0].getECCodewordsPerBlock(),l=o[0].getECBlocks();try{for(var f=SS(l),h=f.next();!h.done;h=f.next()){var d=h.value;s+=d.getCount()*(d.getDataCodewords()+u)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new W;try{return this.getVersionForNumber((e-17)/4)}catch{throw new W}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new J;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var o=t.VERSION_DECODE_INFO[i];if(o===e)return t.getVersionForNumber(i+7);var a=r2.numBitsDiffering(e,o);a<r&&(n=i+7,r=a)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new tn(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var o=this.alignmentPatternCenters[i]-2,a=0;a<n;a++)i===0&&(a===0||a===n-1)||i===n-1&&a===0||r.setRegion(this.alignmentPatternCenters[a]-2,o,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new F(7,new T(1,19)),new F(10,new T(1,16)),new F(13,new T(1,13)),new F(17,new T(1,9))),new t(2,Int32Array.from([6,18]),new F(10,new T(1,34)),new F(16,new T(1,28)),new F(22,new T(1,22)),new F(28,new T(1,16))),new t(3,Int32Array.from([6,22]),new F(15,new T(1,55)),new F(26,new T(1,44)),new F(18,new T(2,17)),new F(22,new T(2,13))),new t(4,Int32Array.from([6,26]),new F(20,new T(1,80)),new F(18,new T(2,32)),new F(26,new T(2,24)),new F(16,new T(4,9))),new t(5,Int32Array.from([6,30]),new F(26,new T(1,108)),new F(24,new T(2,43)),new F(18,new T(2,15),new T(2,16)),new F(22,new T(2,11),new T(2,12))),new t(6,Int32Array.from([6,34]),new F(18,new T(2,68)),new F(16,new T(4,27)),new F(24,new T(4,19)),new F(28,new T(4,15))),new t(7,Int32Array.from([6,22,38]),new F(20,new T(2,78)),new F(18,new T(4,31)),new F(18,new T(2,14),new T(4,15)),new F(26,new T(4,13),new T(1,14))),new t(8,Int32Array.from([6,24,42]),new F(24,new T(2,97)),new F(22,new T(2,38),new T(2,39)),new F(22,new T(4,18),new T(2,19)),new F(26,new T(4,14),new T(2,15))),new t(9,Int32Array.from([6,26,46]),new F(30,new T(2,116)),new F(22,new T(3,36),new T(2,37)),new F(20,new T(4,16),new T(4,17)),new F(24,new T(4,12),new T(4,13))),new t(10,Int32Array.from([6,28,50]),new F(18,new T(2,68),new T(2,69)),new F(26,new T(4,43),new T(1,44)),new F(24,new T(6,19),new T(2,20)),new F(28,new T(6,15),new T(2,16))),new t(11,Int32Array.from([6,30,54]),new F(20,new T(4,81)),new F(30,new T(1,50),new T(4,51)),new F(28,new T(4,22),new T(4,23)),new F(24,new T(3,12),new T(8,13))),new t(12,Int32Array.from([6,32,58]),new F(24,new T(2,92),new T(2,93)),new F(22,new T(6,36),new T(2,37)),new F(26,new T(4,20),new T(6,21)),new F(28,new T(7,14),new T(4,15))),new t(13,Int32Array.from([6,34,62]),new F(26,new T(4,107)),new F(22,new T(8,37),new T(1,38)),new F(24,new T(8,20),new T(4,21)),new F(22,new T(12,11),new T(4,12))),new t(14,Int32Array.from([6,26,46,66]),new F(30,new T(3,115),new T(1,116)),new F(24,new T(4,40),new T(5,41)),new F(20,new T(11,16),new T(5,17)),new F(24,new T(11,12),new T(5,13))),new t(15,Int32Array.from([6,26,48,70]),new F(22,new T(5,87),new T(1,88)),new F(24,new T(5,41),new T(5,42)),new F(30,new T(5,24),new T(7,25)),new F(24,new T(11,12),new T(7,13))),new t(16,Int32Array.from([6,26,50,74]),new F(24,new T(5,98),new T(1,99)),new F(28,new T(7,45),new T(3,46)),new F(24,new T(15,19),new T(2,20)),new F(30,new T(3,15),new T(13,16))),new t(17,Int32Array.from([6,30,54,78]),new F(28,new T(1,107),new T(5,108)),new F(28,new T(10,46),new T(1,47)),new F(28,new T(1,22),new T(15,23)),new F(28,new T(2,14),new T(17,15))),new t(18,Int32Array.from([6,30,56,82]),new F(30,new T(5,120),new T(1,121)),new F(26,new T(9,43),new T(4,44)),new F(28,new T(17,22),new T(1,23)),new F(28,new T(2,14),new T(19,15))),new t(19,Int32Array.from([6,30,58,86]),new F(28,new T(3,113),new T(4,114)),new F(26,new T(3,44),new T(11,45)),new F(26,new T(17,21),new T(4,22)),new F(26,new T(9,13),new T(16,14))),new t(20,Int32Array.from([6,34,62,90]),new F(28,new T(3,107),new T(5,108)),new F(26,new T(3,41),new T(13,42)),new F(30,new T(15,24),new T(5,25)),new F(28,new T(15,15),new T(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new F(28,new T(4,116),new T(4,117)),new F(26,new T(17,42)),new F(28,new T(17,22),new T(6,23)),new F(30,new T(19,16),new T(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new F(28,new T(2,111),new T(7,112)),new F(28,new T(17,46)),new F(30,new T(7,24),new T(16,25)),new F(24,new T(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new F(30,new T(4,121),new T(5,122)),new F(28,new T(4,47),new T(14,48)),new F(30,new T(11,24),new T(14,25)),new F(30,new T(16,15),new T(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new F(30,new T(6,117),new T(4,118)),new F(28,new T(6,45),new T(14,46)),new F(30,new T(11,24),new T(16,25)),new F(30,new T(30,16),new T(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new F(26,new T(8,106),new T(4,107)),new F(28,new T(8,47),new T(13,48)),new F(30,new T(7,24),new T(22,25)),new F(30,new T(22,15),new T(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new F(28,new T(10,114),new T(2,115)),new F(28,new T(19,46),new T(4,47)),new F(28,new T(28,22),new T(6,23)),new F(30,new T(33,16),new T(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new F(30,new T(8,122),new T(4,123)),new F(28,new T(22,45),new T(3,46)),new F(30,new T(8,23),new T(26,24)),new F(30,new T(12,15),new T(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new T(3,117),new T(10,118)),new F(28,new T(3,45),new T(23,46)),new F(30,new T(4,24),new T(31,25)),new F(30,new T(11,15),new T(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new T(7,116),new T(7,117)),new F(28,new T(21,45),new T(7,46)),new F(30,new T(1,23),new T(37,24)),new F(30,new T(19,15),new T(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new T(5,115),new T(10,116)),new F(28,new T(19,47),new T(10,48)),new F(30,new T(15,24),new T(25,25)),new F(30,new T(23,15),new T(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new T(13,115),new T(3,116)),new F(28,new T(2,46),new T(29,47)),new F(30,new T(42,24),new T(1,25)),new F(30,new T(23,15),new T(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new T(17,115)),new F(28,new T(10,46),new T(23,47)),new F(30,new T(10,24),new T(35,25)),new F(30,new T(19,15),new T(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new T(17,115),new T(1,116)),new F(28,new T(14,46),new T(21,47)),new F(30,new T(29,24),new T(19,25)),new F(30,new T(11,15),new T(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new T(13,115),new T(6,116)),new F(28,new T(14,46),new T(23,47)),new F(30,new T(44,24),new T(7,25)),new F(30,new T(59,16),new T(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new T(12,121),new T(7,122)),new F(28,new T(12,47),new T(26,48)),new F(30,new T(39,24),new T(14,25)),new F(30,new T(22,15),new T(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new T(6,121),new T(14,122)),new F(28,new T(6,47),new T(34,48)),new F(30,new T(46,24),new T(10,25)),new F(30,new T(2,15),new T(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new T(17,122),new T(4,123)),new F(28,new T(29,46),new T(14,47)),new F(30,new T(49,24),new T(10,25)),new F(30,new T(24,15),new T(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new T(4,122),new T(18,123)),new F(28,new T(13,46),new T(32,47)),new F(30,new T(48,24),new T(14,25)),new F(30,new T(42,15),new T(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new T(20,117),new T(4,118)),new F(28,new T(40,47),new T(7,48)),new F(30,new T(43,24),new T(22,25)),new F(30,new T(10,15),new T(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new T(19,118),new T(6,119)),new F(28,new T(18,47),new T(31,48)),new F(30,new T(34,24),new T(34,25)),new F(30,new T(20,15),new T(61,16)))],t}(),dt;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(dt||(dt={}));var ig=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var i=0;i<r;i++)this.isMasked(n,i)&&e.flip(i,n)},t.values=new Map([[dt.DATA_MASK_000,new t(dt.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[dt.DATA_MASK_001,new t(dt.DATA_MASK_001,function(e,r){return(e&1)===0})],[dt.DATA_MASK_010,new t(dt.DATA_MASK_010,function(e,r){return r%3===0})],[dt.DATA_MASK_011,new t(dt.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[dt.DATA_MASK_100,new t(dt.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[dt.DATA_MASK_101,new t(dt.DATA_MASK_101,function(e,r){return e*r%6===0})],[dt.DATA_MASK_110,new t(dt.DATA_MASK_110,function(e,r){return e*r%6<3})],[dt.DATA_MASK_111,new t(dt.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),TS=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new W;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),o=0,a=i-7,n=i-1;n>=a;n--)o=this.copyBit(8,n,o);for(var r=i-8;r<i;r++)o=this.copyBit(r,8,o);if(this.parsedFormatInfo=r2.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Bi.getVersionForNumber(r);for(var n=0,i=e-11,o=5;o>=0;o--)for(var a=e-9;a>=i;a--)n=this.copyBit(a,o,n);var s=Bi.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var a=5;a>=0;a--)for(var o=e-9;o>=i;o--)n=this.copyBit(a,o,n);if(s=Bi.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new W},t.prototype.copyBit=function(e,r,n){var i=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return i?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=ig.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var o=r.buildFunctionPattern(),a=!0,s=new Uint8Array(r.getTotalCodewords()),u=0,l=0,f=0,h=i-1;h>0;h-=2){h===6&&h--;for(var d=0;d<i;d++)for(var p=a?i-1-d:d,g=0;g<2;g++)o.get(h-g,p)||(f++,l<<=1,this.bitMatrix.get(h-g,p)&&(l|=1),f===8&&(s[u++]=l,f=0,l=0));a=!a}if(u!==r.getTotalCodewords())throw new W;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=ig.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var i=r+1,o=e.getHeight();i<o;i++)e.get(r,i)!==e.get(i,r)&&(e.flip(i,r),e.flip(r,i))},t}(),og=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RS=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var i,o,a,s;if(e.length!==r.getTotalCodewords())throw new J;var u=r.getECBlocksForLevel(n),l=0,f=u.getECBlocks();try{for(var h=og(f),d=h.next();!d.done;d=h.next()){var p=d.value;l+=p.getCount()}}catch(O){i={error:O}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var g=new Array(l),w=0;try{for(var I=og(f),_=I.next();!_.done;_=I.next())for(var p=_.value,m=0;m<p.getCount();m++){var x=p.getDataCodewords(),P=u.getECCodewordsPerBlock()+x;g[w++]=new t(x,new Uint8Array(P))}}catch(O){a={error:O}}finally{try{_&&!_.done&&(s=I.return)&&s.call(I)}finally{if(a)throw a.error}}for(var k=g[0].codewords.length,M=g.length-1;M>=0;){var A=g[M].codewords.length;if(A===k)break;M--}M++;for(var E=k-u.getECCodewordsPerBlock(),S=0,m=0;m<E;m++)for(var R=0;R<w;R++)g[R].codewords[m]=e[S++];for(var R=M;R<w;R++)g[R].codewords[E]=e[S++];for(var D=g[0].codewords.length,m=E;m<D;m++)for(var R=0;R<w;R++){var N=R<M?m:m+1;g[R].codewords[N]=e[S++]}return g},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),wr;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(wr||(wr={}));var Be=function(){function t(e,r,n,i){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new J;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(wr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(wr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(wr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(wr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(wr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(wr.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(wr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(wr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(wr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(wr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),OS=function(){function t(){}return t.decode=function(e,r,n,i){var o=new t2(e),a=new ue,s=new Array,u=-1,l=-1;try{var f=null,h=!1,d=void 0;do{if(o.available()<4)d=Be.TERMINATOR;else{var p=o.readBits(4);d=Be.forBits(p)}switch(d){case Be.TERMINATOR:break;case Be.FNC1_FIRST_POSITION:case Be.FNC1_SECOND_POSITION:h=!0;break;case Be.STRUCTURED_APPEND:if(o.available()<16)throw new W;u=o.readBits(8),l=o.readBits(8);break;case Be.ECI:var g=t.parseECIValue(o);if(f=st.getCharacterSetECIByValue(g),f===null)throw new W;break;case Be.HANZI:var w=o.readBits(4),I=o.readBits(d.getCharacterCountBits(r));w===t.GB2312_SUBSET&&t.decodeHanziSegment(o,a,I);break;default:var _=o.readBits(d.getCharacterCountBits(r));switch(d){case Be.NUMERIC:t.decodeNumericSegment(o,a,_);break;case Be.ALPHANUMERIC:t.decodeAlphanumericSegment(o,a,_,h);break;case Be.BYTE:t.decodeByteSegment(o,a,_,f,s,i);break;case Be.KANJI:t.decodeKanjiSegment(o,a,_);break;default:throw new W}break}}while(d!==Be.TERMINATOR)}catch{throw new W}return new Oc(e,a.toString(),s.length===0?null:s,n===null?null:n.toString(),u,l)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new W;for(var i=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),s=a/96<<8&4294967295|a%96;s<959?s+=41377:s+=42657,i[o]=s>>8&255,i[o+1]=s&255,o+=2,n--}try{r.append(Tr.decode(i,ge.GB2312))}catch(u){throw new W(u)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new W;for(var i=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),s=a/192<<8&4294967295|a%192;s<7936?s+=33088:s+=49472,i[o]=s>>8,i[o+1]=s,o+=2,n--}try{r.append(Tr.decode(i,ge.SHIFT_JIS))}catch(u){throw new W(u)}},t.decodeByteSegment=function(e,r,n,i,o,a){if(8*n>e.available())throw new W;for(var s=new Uint8Array(n),u=0;u<n;u++)s[u]=e.readBits(8);var l;i===null?l=ge.guessEncoding(s,a):l=i.getName();try{r.append(Tr.decode(s,l))}catch(f){throw new W(f)}o.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new W;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,i){for(var o=r.length();n>1;){if(e.available()<11)throw new W;var a=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(a/45))),r.append(t.toAlphaNumericChar(a%45)),n-=2}if(n===1){if(e.available()<6)throw new W;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=o;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new W;var i=e.readBits(10);if(i>=1e3)throw new W;r.append(t.toAlphaNumericChar(Math.floor(i/100))),r.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),r.append(t.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new W;var o=e.readBits(7);if(o>=100)throw new W;r.append(t.toAlphaNumericChar(Math.floor(o/10))),r.append(t.toAlphaNumericChar(o%10))}else if(n===1){if(e.available()<4)throw new W;var a=e.readBits(4);if(a>=10)throw new W;r.append(t.toAlphaNumericChar(a))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new W},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),n2=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),ag=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PS=function(){function t(){this.rsDecoder=new Pc(nr.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(tn.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new TS(e),i=null;try{return this.decodeBitMatrixParser(n,r)}catch(a){i=a}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var o=this.decodeBitMatrixParser(n,r);return o.setOther(new n2(!0)),o}catch(a){throw i!==null?i:a}},t.prototype.decodeBitMatrixParser=function(e,r){var n,i,o,a,s=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),f=RS.getDataBlocks(l,s,u),h=0;try{for(var d=ag(f),p=d.next();!p.done;p=d.next()){var g=p.value;h+=g.getNumDataCodewords()}}catch(M){n={error:M}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var w=new Uint8Array(h),I=0;try{for(var _=ag(f),m=_.next();!m.done;m=_.next()){var g=m.value,x=g.getCodewords(),P=g.getNumDataCodewords();this.correctErrors(x,P);for(var k=0;k<P;k++)w[I++]=x[k]}}catch(M){o={error:M}}finally{try{m&&!m.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}return OS.decode(w,s,u,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new rt}for(var i=0;i<r;i++)e[i]=n[i]},t}(),DS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NS=function(t){DS(e,t);function e(r,n,i){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var o=Math.abs(r-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var o=(this.getX()+n)/2,a=(this.getY()+r)/2,s=(this.estimatedModuleSize+i)/2;return new e(o,a,s)},e}(Y),bS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kS=function(){function t(e,r,n,i,o,a,s){this.image=e,this.startX=r,this.startY=n,this.width=i,this.height=o,this.moduleSize=a,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,i=e+n,o=this.startY+r/2,a=new Int32Array(3),s=this.image,u=0;u<r;u++){var l=o+(u&1?-Math.floor((u+1)/2):Math.floor((u+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var f=e;f<i&&!s.get(f,l);)f++;for(var h=0;f<i;){if(s.get(f,l))if(h===1)a[1]++;else if(h===2){if(this.foundPatternCross(a)){var d=this.handlePossibleCenter(a,l,f);if(d!==null)return d}a[0]=a[2],a[1]=1,a[2]=0,h=1}else a[++h]++;else h===1&&h++,a[h]++;f++}if(this.foundPatternCross(a)){var d=this.handlePossibleCenter(a,l,i);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,i=0;i<3;i++)if(Math.abs(r-e[i])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,i){var o=this.image,a=o.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var u=e;u>=0&&o.get(r,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&!o.get(r,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&o.get(r,u)&&s[1]<=n;)s[1]++,u++;if(u===a||s[1]>n)return NaN;for(;u<a&&!o.get(r,u)&&s[2]<=n;)s[2]++,u++;if(s[2]>n)return NaN;var l=s[0]+s[1]+s[2];return 5*Math.abs(l-i)>=2*i?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var i,o,a=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),u=this.crossCheckVertical(r,s,2*e[1],a);if(!isNaN(u)){var l=(e[0]+e[1]+e[2])/3;try{for(var f=bS(this.possibleCenters),h=f.next();!h.done;h=f.next()){var d=h.value;if(d.aboutEquals(l,u,s))return d.combineEstimate(u,s,l)}}catch(g){i={error:g}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}var p=new NS(s,u,l);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),MS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LS=function(t){MS(e,t);function e(r,n,i,o){var a=t.call(this,r,n)||this;return a.estimatedModuleSize=i,a.count=o,o===void 0&&(a.count=1),a}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var o=Math.abs(r-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var o=this.count+1,a=(this.count*this.getX()+n)/o,s=(this.count*this.getY()+r)/o,u=(this.count*this.estimatedModuleSize+i)/o;return new e(a,s,u,o)},e}(Y),FS=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),ka=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BS=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(ke.TRY_HARDER)!==void 0,n=e!=null&&e.get(ke.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),a=i.getWidth(),s=Math.floor(3*o/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var u=!1,l=new Int32Array(5),f=s-1;f<o&&!u;f+=s){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;for(var h=0,d=0;d<a;d++)if(i.get(d,f))(h&1)===1&&h++,l[h]++;else if(h&1)l[h]++;else if(h===4)if(t.foundPatternCross(l)){var p=this.handlePossibleCenter(l,f,d,n);if(p===!0)if(s=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var g=this.findRowSkip();g>l[2]&&(f+=g-l[2]-s,d=a-1)}else{l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,h=3;continue}h=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,h=3;else l[++h]++;if(t.foundPatternCross(l)){var p=this.handlePossibleCenter(l,f,a,n);p===!0&&(s=l[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var w=this.selectBestPatterns();return Y.orderBestPatterns(w),new FS(w)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;r+=i}if(r<7)return!1;var o=r/7,a=o/2;return Math.abs(o-e[0])<a&&Math.abs(o-e[1])<a&&Math.abs(3*o-e[2])<3*a&&Math.abs(o-e[3])<a&&Math.abs(o-e[4])<a},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,i){for(var o=this.getCrossCheckStateCount(),a=0,s=this.image;e>=a&&r>=a&&s.get(r-a,e-a);)o[2]++,a++;if(e<a||r<a)return!1;for(;e>=a&&r>=a&&!s.get(r-a,e-a)&&o[1]<=n;)o[1]++,a++;if(e<a||r<a||o[1]>n)return!1;for(;e>=a&&r>=a&&s.get(r-a,e-a)&&o[0]<=n;)o[0]++,a++;if(o[0]>n)return!1;var u=s.getHeight(),l=s.getWidth();for(a=1;e+a<u&&r+a<l&&s.get(r+a,e+a);)o[2]++,a++;if(e+a>=u||r+a>=l)return!1;for(;e+a<u&&r+a<l&&!s.get(r+a,e+a)&&o[3]<n;)o[3]++,a++;if(e+a>=u||r+a>=l||o[3]>=n)return!1;for(;e+a<u&&r+a<l&&s.get(r+a,e+a)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return!1;var f=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(f-i)<2*i&&t.foundPatternCross(o)},t.prototype.crossCheckVertical=function(e,r,n,i){for(var o=this.image,a=o.getHeight(),s=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(r,u);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(r,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&o.get(r,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&o.get(r,u);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!o.get(r,u)&&s[3]<n;)s[3]++,u++;if(u===a||s[3]>=n)return NaN;for(;u<a&&o.get(r,u)&&s[4]<n;)s[4]++,u++;if(s[4]>=n)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-i)>=2*i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,i){for(var o=this.image,a=o.getWidth(),s=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(u,r);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(u,r)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&o.get(u,r)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<a&&o.get(u,r);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!o.get(u,r)&&s[3]<n;)s[3]++,u++;if(u===a||s[3]>=n)return NaN;for(;u<a&&o.get(u,r)&&s[4]<n;)s[4]++,u++;if(s[4]>=n)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-i)>=i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],a=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(a),e[2],o);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),e[2],o),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),e[2],o)))){for(var u=o/7,l=!1,f=this.possibleCenters,h=0,d=f.length;h<d;h++){var p=f[h];if(p.aboutEquals(u,s,a)){f[h]=p.combineEstimate(s,a,u),l=!0;break}}if(!l){var g=new LS(a,s,u);f.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var o=ka(this.possibleCenters),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.getCount()>=t.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,i,o=0,a=0,s=this.possibleCenters.length;try{for(var u=ka(this.possibleCenters),l=u.next();!l.done;l=u.next()){var f=l.value;f.getCount()>=t.CENTER_QUORUM&&(o++,a+=f.getEstimatedModuleSize())}}catch(w){e={error:w}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}if(o<3)return!1;var h=a/s,d=0;try{for(var p=ka(this.possibleCenters),g=p.next();!g.done;g=p.next()){var f=g.value;d+=Math.abs(f.getEstimatedModuleSize()-h)}}catch(w){n={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return d<=.05*a},t.prototype.selectBestPatterns=function(){var e,r,n,i,o=this.possibleCenters.length;if(o<3)throw new V;var a=this.possibleCenters,s;if(o>3){var u=0,l=0;try{for(var f=ka(this.possibleCenters),h=f.next();!h.done;h=f.next()){var d=h.value,p=d.getEstimatedModuleSize();u+=p,l+=p*p}}catch(k){e={error:k}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}s=u/o;var g=Math.sqrt(l/o-s*s);a.sort(function(k,M){var A=Math.abs(M.getEstimatedModuleSize()-s),E=Math.abs(k.getEstimatedModuleSize()-s);return A<E?-1:A>E?1:0});for(var w=Math.max(.2*s,g),I=0;I<a.length&&a.length>3;I++){var _=a[I];Math.abs(_.getEstimatedModuleSize()-s)>w&&(a.splice(I,1),I--)}}if(a.length>3){var u=0;try{for(var m=ka(a),x=m.next();!x.done;x=m.next()){var P=x.value;u+=P.getEstimatedModuleSize()}}catch(M){n={error:M}}finally{try{x&&!x.done&&(i=m.return)&&i.call(m)}finally{if(n)throw n.error}}s=u/a.length,a.sort(function(M,A){if(A.getCount()===M.getCount()){var E=Math.abs(A.getEstimatedModuleSize()-s),S=Math.abs(M.getEstimatedModuleSize()-s);return E<S?1:E>S?-1:0}else return A.getCount()-M.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),VS=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(ke.NEED_RESULT_POINT_CALLBACK);var r=new BS(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(r,n,i);if(o<1)throw new V("No pattern found in proccess finder.");var a=t.computeDimension(r,n,i,o),s=Bi.getProvisionalVersionForDimension(a),u=s.getDimensionForVersion()-7,l=null;if(s.getAlignmentPatternCenters().length>0)for(var f=n.getX()-r.getX()+i.getX(),h=n.getY()-r.getY()+i.getY(),d=1-3/u,p=Math.floor(r.getX()+d*(f-r.getX())),g=Math.floor(r.getY()+d*(h-r.getY())),w=4;w<=16;w<<=1)try{l=this.findAlignmentInRegion(o,p,g,w);break}catch(x){if(!(x instanceof V))throw x}var I=t.createTransform(r,n,i,l,a),_=t.sampleGrid(this.image,I,a),m;return l===null?m=[i,r,n]:m=[i,r,n,l],new M0(_,m)},t.createTransform=function(e,r,n,i,o){var a=o-3.5,s,u,l,f;return i!==null?(s=i.getX(),u=i.getY(),l=a-3,f=l):(s=r.getX()-e.getX()+n.getX(),u=r.getY()-e.getY()+n.getY(),l=a,f=a),Q_.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,l,f,3.5,a,e.getX(),e.getY(),r.getX(),r.getY(),s,u,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var i=L0.getInstance();return i.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,i){var o=we.round(Y.distance(e,r)/i),a=we.round(Y.distance(e,n)/i),s=Math.floor((o+a)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new V("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,i){var o=this.sizeOfBlackWhiteBlackRun(e,r,n,i),a=1,s=e-(n-e);s<0?(a=e/(e-s),s=0):s>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var u=Math.floor(r-(i-r)*a);return a=1,u<0?(a=r/(r-u),u=0):u>=this.image.getHeight()&&(a=(this.image.getHeight()-1-r)/(u-r),u=this.image.getHeight()-1),s=Math.floor(e+(s-e)*a),o+=this.sizeOfBlackWhiteBlackRun(e,r,s,u),o-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,i){var o=Math.abs(i-r)>Math.abs(n-e);if(o){var a=e;e=r,r=a,a=n,n=i,i=a}for(var s=Math.abs(n-e),u=Math.abs(i-r),l=-s/2,f=e<n?1:-1,h=r<i?1:-1,d=0,p=n+f,g=e,w=r;g!==p;g+=f){var I=o?w:g,_=o?g:w;if(d===1===this.image.get(I,_)){if(d===2)return we.distance(g,w,e,r);d++}if(l+=u,l>0){if(w===i)break;w+=h,l-=s}}return d===2?we.distance(n+f,i,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,i){var o=Math.floor(i*e),a=Math.max(0,r-o),s=Math.min(this.image.getWidth()-1,r+o);if(s-a<e*3)throw new V("Alignment top exceeds estimated module size.");var u=Math.max(0,n-o),l=Math.min(this.image.getHeight()-1,n+o);if(l-u<e*3)throw new V("Alignment bottom exceeds estimated module size.");var f=new kS(this.image,a,u,s-a,l-u,e,this.resultPointCallback);return f.find()},t}(),$l=function(){function t(){this.decoder=new PS}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,i;if(r!=null&&r.get(ke.PURE_BARCODE)!==void 0){var o=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(o,r),i=t.NO_POINTS}else{var a=new VS(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(a.getBits(),r),i=a.getPoints()}n.getOther()instanceof n2&&n.getOther().applyMirroredCorrection(i);var s=new Ht(n.getText(),n.getRawBytes(),void 0,i,Z.QR_CODE,void 0),u=n.getByteSegments();u!==null&&s.putMetadata(Ct.BYTE_SEGMENTS,u);var l=n.getECLevel();return l!==null&&s.putMetadata(Ct.ERROR_CORRECTION_LEVEL,l),n.hasStructuredAppend()&&(s.putMetadata(Ct.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Ct.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new V;var i=this.moduleSize(r,e),o=r[1],a=n[1],s=r[0],u=n[0];if(s>=u||o>=a)throw new V;if(a-o!==u-s&&(u=s+(a-o),u>=e.getWidth()))throw new V;var l=Math.round((u-s+1)/i),f=Math.round((a-o+1)/i);if(l<=0||f<=0)throw new V;if(f!==l)throw new V;var h=Math.floor(i/2);o+=h,s+=h;var d=s+Math.floor((l-1)*i)-u;if(d>0){if(d>h)throw new V;s-=d}var p=o+Math.floor((f-1)*i)-a;if(p>0){if(p>h)throw new V;o-=p}for(var g=new tn(l,f),w=0;w<f;w++)for(var I=o+Math.floor(w*i),_=0;_<l;_++)e.get(s+Math.floor(_*i),I)&&g.set(_,w);return g},t.moduleSize=function(e,r){for(var n=r.getHeight(),i=r.getWidth(),o=e[0],a=e[1],s=!0,u=0;o<i&&a<n;){if(s!==r.get(o,a)){if(++u===5)break;s=!s}o++,a++}if(o===i||a===n)throw new V;return(o-e[0])/7},t.NO_POINTS=new Array,t}(),US=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ye=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return we.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var a=US(e),s=a.next();!s.done;s=a.next()){var u=s.value;i[o++]=u}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.getCodeword=function(e){var r=ut.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),jS=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),zS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HS=function(){function t(){}return t.detectMultiple=function(e,r,n){var i=e.getBlackMatrix(),o=t.detect(n,i);return o.length||(i=i.clone(),i.rotate180(),o=t.detect(n,i)),new jS(i,o)},t.detect=function(e,r){for(var n,i,o=new Array,a=0,s=0,u=!1;a<r.getHeight();){var l=t.findVertices(r,a,s);if(l[0]==null&&l[3]==null){if(!u)break;u=!1,s=0;try{for(var f=(n=void 0,zS(o)),h=f.next();!h.done;h=f.next()){var d=h.value;d[1]!=null&&(a=Math.trunc(Math.max(a,d[1].getY()))),d[3]!=null&&(a=Math.max(a,Math.trunc(d[3].getY())))}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}a+=t.ROW_STEP;continue}if(u=!0,o.push(l),!e)break;l[2]!=null?(s=Math.trunc(l[2].getX()),a=Math.trunc(l[2].getY())):(s=Math.trunc(l[4].getX()),a=Math.trunc(l[4].getY()))}return o},t.findVertices=function(e,r,n){var i=e.getHeight(),o=e.getWidth(),a=new Array(8);return t.copyToResult(a,t.findRowsWithPattern(e,i,o,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),a[4]!=null&&(n=Math.trunc(a[4].getX()),r=Math.trunc(a[4].getY())),t.copyToResult(a,t.findRowsWithPattern(e,i,o,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),a},t.copyToResult=function(e,r,n){for(var i=0;i<n.length;i++)e[n[i]]=r[i]},t.findRowsWithPattern=function(e,r,n,i,o,a){for(var s=new Array(4),u=!1,l=new Int32Array(a.length);i<r;i+=t.ROW_STEP){var f=t.findGuardPattern(e,o,i,n,!1,a,l);if(f!=null){for(;i>0;){var h=t.findGuardPattern(e,o,--i,n,!1,a,l);if(h!=null)f=h;else{i++;break}}s[0]=new Y(f[0],i),s[1]=new Y(f[1],i),u=!0;break}}var d=i+1;if(u){for(var p=0,h=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);d<r;d++){var f=t.findGuardPattern(e,h[0],d,n,!1,a,l);if(f!=null&&Math.abs(h[0]-f[0])<t.MAX_PATTERN_DRIFT&&Math.abs(h[1]-f[1])<t.MAX_PATTERN_DRIFT)h=f,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}d-=p+1,s[2]=new Y(h[0],d),s[3]=new Y(h[1],d)}return d-i<t.BARCODE_MIN_HEIGHT&&ut.fill(s,null),s},t.findGuardPattern=function(e,r,n,i,o,a,s){ut.fillWithin(s,0,s.length,0);for(var u=r,l=0;e.get(u,n)&&u>0&&l++<t.MAX_PIXEL_DRIFT;)u--;for(var f=u,h=0,d=a.length,p=o;f<i;f++){var g=e.get(f,n);if(g!==p)s[h]++;else{if(h===d-1){if(t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([u,f]);u+=s[0]+s[1],be.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,p=!p}}return h===d-1&&t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([u,f-1]):null},t.patternMatchVariance=function(e,r,n){for(var i=e.length,o=0,a=0,s=0;s<i;s++)o+=e[s],a+=r[s];if(o<a)return 1/0;var u=o/a;n*=u;for(var l=0,f=0;f<i;f++){var h=e[f],d=r[f]*u,p=h>d?h-d:d-h;if(p>n)return 1/0;l+=p}return l/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),WS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ki=function(){function t(e,r){if(r.length===0)throw new J;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),be.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=WS(this.coefficients),a=o.next();!a.done;a=o.next()){var s=a.value;i=this.field.add(i,s)}}catch(h){r={error:h}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}for(var u=this.coefficients[0],l=this.coefficients.length,f=1;f<l;f++)u=this.field.add(this.field.multiply(e,u),this.coefficients[f]);return u},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new J("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var o=new Int32Array(n.length),a=n.length-r.length;be.arraycopy(n,0,o,0,a);for(var s=a;s<n.length;s++)o[s]=this.field.add(r[s-a],n[s]);return new t(this.field,o)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new J("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new J("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,i=e.coefficients,o=i.length,a=new Int32Array(n+o-1),s=0;s<n;s++)for(var u=r[s],l=0;l<o;l++)a[s+l]=this.field.add(a[s+l],this.field.multiply(u,i[l]));return new t(this.field,a)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new J;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],r);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new ue,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),GS=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new J;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Y_;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),$S=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XS=function(t){$S(e,t);function e(r,n){var i=t.call(this)||this;i.modulus=r,i.expTable=new Int32Array(r),i.logTable=new Int32Array(r);for(var o=1,a=0;a<r;a++)i.expTable[a]=o,o=o*n%r;for(var a=0;a<r-1;a++)i.logTable[i.expTable[a]]=a;return i.zero=new ki(i,new Int32Array([0])),i.one=new ki(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new J;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new ki(this,i)},e.PDF417_GF=new e(ye.NUMBER_OF_CODEWORDS,3),e}(GS),KS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qS=function(){function t(){this.field=XS.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var i,o,a=new ki(this.field,e),s=new Int32Array(r),u=!1,l=r;l>0;l--){var f=a.evaluateAt(this.field.exp(l));s[r-l]=f,f!==0&&(u=!0)}if(!u)return 0;var h=this.field.getOne();if(n!=null)try{for(var d=KS(n),p=d.next();!p.done;p=d.next()){var g=p.value,w=this.field.exp(e.length-1-g),I=new ki(this.field,new Int32Array([this.field.subtract(0,w),1]));h=h.multiply(I)}}catch(E){i={error:E}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}for(var _=new ki(this.field,s),m=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),_,r),x=m[0],P=m[1],k=this.findErrorLocations(x),M=this.findErrorMagnitudes(P,x,k),l=0;l<k.length;l++){var A=e.length-1-this.field.log(k[l]);if(A<0)throw rt.getChecksumInstance();e[A]=this.field.subtract(e[A],M[l])}return k.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var o=e,a=r,s=this.field.getZero(),u=this.field.getOne();a.getDegree()>=Math.round(n/2);){var l=o,f=s;if(o=a,s=u,o.isZero())throw rt.getChecksumInstance();a=l;for(var h=this.field.getZero(),d=o.getCoefficient(o.getDegree()),p=this.field.inverse(d);a.getDegree()>=o.getDegree()&&!a.isZero();){var g=a.getDegree()-o.getDegree(),w=this.field.multiply(a.getCoefficient(a.getDegree()),p);h=h.add(this.field.buildMonomial(g,w)),a=a.subtract(o.multiplyByMonomial(g,w))}u=h.multiply(s).subtract(f).negative()}var I=u.getCoefficient(0);if(I===0)throw rt.getChecksumInstance();var _=this.field.inverse(I),m=u.multiply(_),x=a.multiply(_);return[m,x]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),i=0,o=1;o<this.field.getSize()&&i<r;o++)e.evaluateAt(o)===0&&(n[i]=this.field.inverse(o),i++);if(i!==r)throw rt.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var i=r.getDegree(),o=new Int32Array(i),a=1;a<=i;a++)o[i-a]=this.field.multiply(a,r.getCoefficient(a));for(var s=new ki(this.field,o),u=n.length,l=new Int32Array(u),a=0;a<u;a++){var f=this.field.inverse(n[a]),h=this.field.subtract(0,e.evaluateAt(f)),d=this.field.inverse(s.evaluateAt(f));l[a]=this.field.multiply(h,d)}return l},t}(),fd=function(){function t(e,r,n,i,o){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,i,o)}return t.prototype.constructor_1=function(e,r,n,i,o){var a=r==null||n==null,s=i==null||o==null;if(a&&s)throw new V;a?(r=new Y(0,i.getY()),n=new Y(0,o.getY())):s&&(i=new Y(e.getWidth()-1,r.getY()),o=new Y(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(r.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var i=this.topLeft,o=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(e>0){var u=n?this.topLeft:this.topRight,l=Math.trunc(u.getY()-e);l<0&&(l=0);var f=new Y(u.getX(),l);n?i=f:a=f}if(r>0){var h=n?this.bottomLeft:this.bottomRight,d=Math.trunc(h.getY()+r);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var p=new Y(h.getX(),d);n?o=p:s=p}return new t(this.image,i,o,a,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),YS=function(){function t(e,r,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),B0=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function i(a,s,u,l,f,h){if(a==="%%")return"%";if(r[++n]!==void 0){a=l?parseInt(l.substr(1)):void 0;var d=f?parseInt(f.substr(1)):void 0,p;switch(h){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(a);break;case"p":p=parseFloat(r[n]).toPrecision(a);break;case"e":p=parseFloat(r[n]).toExponential(a);break;case"x":p=parseInt(r[n]).toString(d||16);break;case"d":p=parseFloat(parseInt(r[n],d||10).toPrecision(a)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(d);for(var g=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";p.length<g;)p=s!==void 0?p+w:w+p;return p}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),QS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i2=function(){function t(e){this.boundingBox=new fd(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(r=this.codewords[i],r!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(r=this.codewords[i],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new B0,i=0;try{for(var o=QS(this.codewords),a=o.next();!a.done;a=o.next()){var s=a.value;if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),ZS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JS=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Ha=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,i=new Array,o=function(h,d){var p={getKey:function(){return h},getValue:function(){return d}};p.getValue()>n?(n=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===n&&i.push(p.getKey())};try{for(var a=ZS(this.values.entries()),s=a.next();!s.done;s=a.next()){var u=JS(s.value,2),l=u[0],f=u[1];o(l,f)}}catch(h){e={error:h}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return ye.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),e3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sg=function(t){e3(e,t);function e(r,n){var i=t.call(this,r)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var r,n;try{for(var i=qf(this.getCodewords()),o=i.next();!o.done;o=i.next()){var a=o.value;a!=null&&a.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=-1,f=1,h=0,d=s;d<u;d++)if(n[d]!=null){var p=n[d],g=p.getRowNumber()-l;if(g===0)h++;else if(g===1)f=Math.max(f,h),h=1,l=p.getRowNumber();else if(g<0||p.getRowNumber()>=r.getRowCount()||g>d)n[d]=null;else{var w=void 0;f>2?w=(f-2)*g:w=g;for(var I=w>=d,_=1;_<=w&&!I;_++)I=n[d-_]!=null;I?n[d]=null:(l=p.getRowNumber(),h=1)}}},e.prototype.getRowHeights=function(){var r,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var a=qf(this.getCodewords()),s=a.next();!s.done;s=a.next()){var u=s.value;if(u!=null){var l=u.getRowNumber();if(l>=o.length)continue;o[l]++}}}catch(f){r={error:f}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.getCodewords(),l=-1,f=a;f<s;f++)if(u[f]!=null){var h=u[f];h.setRowNumberAsRowIndicatorColumn();var d=h.getRowNumber()-l;d===0||(d===1?l=h.getRowNumber():h.getRowNumber()>=r.getRowCount()?u[f]=null:l=h.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,i=this.getCodewords(),o=new Ha,a=new Ha,s=new Ha,u=new Ha;try{for(var l=qf(i),f=l.next();!f.done;f=l.next()){var h=f.value;if(h!=null){h.setRowNumberAsRowIndicatorColumn();var d=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:a.setValue(d*3+1);break;case 1:u.setValue(d/3),s.setValue(d%3);break;case 2:o.setValue(d+1);break}}}}catch(w){r={error:w}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}if(o.getValue().length===0||a.getValue().length===0||s.getValue().length===0||u.getValue().length===0||o.getValue()[0]<1||a.getValue()[0]+s.getValue()[0]<ye.MIN_ROWS_IN_BARCODE||a.getValue()[0]+s.getValue()[0]>ye.MAX_ROWS_IN_BARCODE)return null;var g=new YS(o.getValue()[0],a.getValue()[0],s.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,g),g},e.prototype.removeIncorrectCodewords=function(r,n){for(var i=0;i<r.length;i++){var o=r[i];if(r[i]!=null){var a=o.getValue()%30,s=o.getRowNumber();if(s>n.getRowCount()){r[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:a*3+1!==n.getRowCountUpperPart()&&(r[i]=null);break;case 1:(Math.trunc(a/3)!==n.getErrorCorrectionLevel()||a%3!==n.getRowCountLowerPart())&&(r[i]=null);break;case 2:a+1!==n.getColumnCount()&&(r[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(i2),t3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r3=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=ye.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(r,i,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[n];o!=null&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),o=0,a=this.barcodeColumnCount+1;a>0&&o<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(o=t.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),o=0,a=1;a<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(o=t.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var i,o;if(this.detectionResultColumns[e-1]!=null){var a=n[r],s=this.detectionResultColumns[e-1].getCodewords(),u=s;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var l=new Array(14);l[2]=s[r],l[3]=u[r],r>0&&(l[0]=n[r-1],l[4]=s[r-1],l[5]=u[r-1]),r>1&&(l[8]=n[r-2],l[10]=s[r-2],l[11]=u[r-2]),r<n.length-1&&(l[1]=n[r+1],l[6]=s[r+1],l[7]=u[r+1]),r<n.length-2&&(l[9]=n[r+2],l[12]=s[r+2],l[13]=u[r+2]);try{for(var f=t3(l),h=f.next();!h.done;h=f.next()){var d=h.value;if(t.adjustRowNumber(a,d))return}}catch(p){i={error:p}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new B0,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){r.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[n];if(o==null){r.format("    |   ");continue}r.format(" %3d|%3d",o.getRowNumber(),o.getValue())}r.format("%n")}return r.toString()},t}(),n3=function(){function t(e,r,n,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),i3=function(){function t(){}return t.initialize=function(){for(var e=0;e<ye.SYMBOL_TABLE.length;e++)for(var r=ye.SYMBOL_TABLE[e],n=r&1,i=0;i<ye.BARS_IN_MODULE;i++){for(var o=0;(r&1)===n;)o+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(ye.BARS_IN_MODULE)),t.RATIOS_TABLE[e][ye.BARS_IN_MODULE-i-1]=Math.fround(o/ye.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=we.sum(e),n=new Int32Array(ye.BARS_IN_MODULE),i=0,o=0,a=0;a<ye.MODULES_IN_CODEWORD;a++){var s=r/(2*ye.MODULES_IN_CODEWORD)+a*r/ye.MODULES_IN_CODEWORD;o+e[i]<=s&&(o+=e[i],i++),n[i]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return ye.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=we.sum(e),n=new Array(ye.BARS_IN_MODULE);if(r>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/r);var o=ud.MAX_VALUE,a=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var u=0,l=t.RATIOS_TABLE[s],f=0;f<ye.BARS_IN_MODULE;f++){var h=Math.fround(l[f]-n[f]);if(u+=Math.fround(h*h),u>=o)break}u<o&&(o=u,a=ye.SYMBOL_TABLE[s])}return a},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(ye.SYMBOL_TABLE.length).map(function(e){return new Array(ye.BARS_IN_MODULE)}),t}(),o3=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),ug=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),a3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s3=function(t){a3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(lr),u3=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new s3;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new k0;if(n===0)return;for(var i=0;i<n;i++)this.write(e[r+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),l3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),c3=function(t){l3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(lr),f3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),h3=function(t){f3(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new J("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,i=n<<1;if(i-r<0&&(i=r),i<0){if(r<0)throw new c3;i=le.MAX_VALUE}this.buf=ut.copyOfUint8Array(this.buf,i)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,i){if(n<0||n>r.length||i<0||n+i-r.length>0)throw new k0;this.ensureCapacity(this.count+i),be.arraycopy(r,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ut.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(u3),Pe;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pe||(Pe={}));function o2(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var ju;function Bn(t){if(typeof ju>"u"&&(ju=o2()),ju===null)throw new Error("BigInt is not supported!");return ju(t)}function d3(){var t=[];t[0]=Bn(1);var e=Bn(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var p3=function(){function t(){}return t.decode=function(e,r){var n=new ue(""),i=st.ISO8859_1;n.enableDecoding(i);for(var o=1,a=e[o++],s=new o3;o<e[0];){switch(a){case t.TEXT_COMPACTION_MODE_LATCH:o=t.textCompaction(e,o,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:o=t.byteCompaction(a,e,i,o,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:o=t.numericCompaction(e,o,n);break;case t.ECI_CHARSET:st.getCharacterSetECIByValue(e[o++]);break;case t.ECI_GENERAL_PURPOSE:o+=2;break;case t.ECI_USER_DEFINED:o++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=t.decodeMacroBlock(e,o,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new W;default:o--,o=t.textCompaction(e,o,n);break}if(o<e.length)a=e[o++];else throw W.getFormatInstance()}if(n.length()===0)throw W.getFormatInstance();var u=new Oc(null,n.toString(),null,r);return u.setOther(s),u},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw W.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<t.NUMBER_OF_SEQUENCE_CODEWORDS;o++,r++)i[o]=e[r];n.setSegmentIndex(le.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new ue;r=t.textCompaction(e,r,a),n.setFileId(a.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new ue;r=t.textCompaction(e,r+1,u),n.setFileName(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var l=new ue;r=t.textCompaction(e,r+1,l),n.setSender(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var f=new ue;r=t.textCompaction(e,r+1,f),n.setAddressee(f.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new ue;r=t.numericCompaction(e,r+1,h),n.setSegmentCount(le.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new ue;r=t.numericCompaction(e,r+1,d),n.setTimestamp(ug.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new ue;r=t.numericCompaction(e,r+1,p),n.setChecksum(le.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var g=new ue;r=t.numericCompaction(e,r+1,g),n.setFileSize(ug.parseLong(g.toString()));break;default:throw W.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(s!==-1){var w=r-s;n.isLastSegment()&&w--,n.setOptionalData(ut.copyOfRange(e,s,s+w))}return r},t.textCompaction=function(e,r,n){for(var i=new Int32Array((e[0]-r)*2),o=new Int32Array((e[0]-r)*2),a=0,s=!1;r<e[0]&&!s;){var u=e[r++];if(u<t.TEXT_COMPACTION_MODE_LATCH)i[a]=u/30,i[a+1]=u%30,a+=2;else switch(u){case t.TEXT_COMPACTION_MODE_LATCH:i[a++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[r++],o[a]=u,a++;break}}return t.decodeTextCompaction(i,o,a,n),r},t.decodeTextCompaction=function(e,r,n,i){for(var o=Pe.ALPHA,a=Pe.ALPHA,s=0;s<n;){var u=e[s],l="";switch(o){case Pe.ALPHA:if(u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case t.LL:o=Pe.LOWER;break;case t.ML:o=Pe.MIXED;break;case t.PS:a=o,o=Pe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break;case Pe.LOWER:if(u<26)l=String.fromCharCode(97+u);else switch(u){case 26:l=" ";break;case t.AS:a=o,o=Pe.ALPHA_SHIFT;break;case t.ML:o=Pe.MIXED;break;case t.PS:a=o,o=Pe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break;case Pe.MIXED:if(u<t.PL)l=t.MIXED_CHARS[u];else switch(u){case t.PL:o=Pe.PUNCT;break;case 26:l=" ";break;case t.LL:o=Pe.LOWER;break;case t.AL:o=Pe.ALPHA;break;case t.PS:a=o,o=Pe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break;case Pe.PUNCT:if(u<t.PAL)l=t.PUNCT_CHARS[u];else switch(u){case t.PAL:o=Pe.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break;case Pe.ALPHA_SHIFT:if(o=a,u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break;case Pe.PUNCT_SHIFT:if(o=a,u<t.PAL)l=t.PUNCT_CHARS[u];else switch(u){case t.PAL:o=Pe.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break}l!==""&&i.append(l),s++}},t.byteCompaction=function(e,r,n,i,o){var a=new h3,s=0,u=0,l=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var f=new Int32Array(6),h=r[i++];i<r[0]&&!l;)switch(f[s++]=h,u=900*u+h,h=r[i++],h){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0;break;default:if(s%5===0&&s>0){for(var d=0;d<6;++d)a.write(Number(Bn(u)>>Bn(8*(5-d))));u=0,s=0}break}i===r[0]&&h<t.TEXT_COMPACTION_MODE_LATCH&&(f[s++]=h);for(var p=0;p<s;p++)a.write(f[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<r[0]&&!l;){var g=r[i++];if(g<t.TEXT_COMPACTION_MODE_LATCH)s++,u=900*u+g;else switch(g){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0;break}if(s%5===0&&s>0){for(var d=0;d<6;++d)a.write(Number(Bn(u)>>Bn(8*(5-d))));u=0,s=0}}break}return o.append(Tr.decode(a.toByteArray(),n)),i},t.numericCompaction=function(e,r,n){for(var i=0,o=!1,a=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!o;){var s=e[r++];if(r===e[0]&&(o=!0),s<t.TEXT_COMPACTION_MODE_LATCH)a[i]=s,i++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,o=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(n.append(t.decodeBase900toBase10(a,i)),i=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Bn(0),i=0;i<r;i++)n+=t.EXP900[r-i-1]*Bn(e[i]);var o=n.toString();if(o.charAt(0)!=="1")throw new W;return o.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=o2()?d3():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),Ma=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v3=function(){function t(){}return t.decode=function(e,r,n,i,o,a,s){for(var u=new fd(e,r,n,i,o),l=null,f=null,h,d=!0;;d=!1){if(r!=null&&(l=t.getRowIndicatorColumn(e,u,r,!0,a,s)),i!=null&&(f=t.getRowIndicatorColumn(e,u,i,!1,a,s)),h=t.merge(l,f),h==null)throw V.getNotFoundInstance();var p=h.getBoundingBox();if(d&&p!=null&&(p.getMinY()<u.getMinY()||p.getMaxY()>u.getMaxY()))u=p;else break}h.setBoundingBox(u);var g=h.getBarcodeColumnCount()+1;h.setDetectionResultColumn(0,l),h.setDetectionResultColumn(g,f);for(var w=l!=null,I=1;I<=g;I++){var _=w?I:g-I;if(h.getDetectionResultColumn(_)===void 0){var m=void 0;_===0||_===g?m=new sg(u,_===0):m=new i2(u),h.setDetectionResultColumn(_,m);for(var x=-1,P=x,k=u.getMinY();k<=u.getMaxY();k++){if(x=t.getStartColumn(h,_,k,w),x<0||x>u.getMaxX()){if(P===-1)continue;x=P}var M=t.detectCodeword(e,u.getMinX(),u.getMaxX(),w,x,k,a,s);M!=null&&(m.setCodeword(k,M),P=x,a=Math.min(a,M.getWidth()),s=Math.max(s,M.getWidth()))}}}return t.createDecoderResult(h)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var i=fd.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new r3(n,i)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=t.getMax(i),a=0;try{for(var s=Ma(i),u=s.next();!u.done;u=s.next()){var l=u.value;if(a+=o-l,l>0)break}}catch(p){r={error:p}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var f=e.getCodewords(),h=0;a>0&&f[h]==null;h++)a--;for(var d=0,h=i.length-1;h>=0&&(d+=o-i[h],!(i[h]>0));h--);for(var h=f.length-1;d>0&&f[h]==null;h--)d--;return e.getBoundingBox().addMissingRows(a,d,e.isLeft())},t.getMax=function(e){var r,n,i=-1;try{for(var o=Ma(e),a=o.next();!a.done;a=o.next()){var s=a.value;i=Math.max(i,s)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var i;return r==null||(i=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,i,o,a){for(var s=new sg(r,i),u=0;u<2;u++)for(var l=u===0?1:-1,f=Math.trunc(Math.trunc(n.getX())),h=Math.trunc(Math.trunc(n.getY()));h<=r.getMaxY()&&h>=r.getMinY();h+=l){var d=t.detectCodeword(e,0,e.getWidth(),i,f,h,o,a);d!=null&&(s.setCodeword(h,d),i?f=d.getStartX():f=d.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],i=n.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>ye.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();n.setValue(o)}else i[0]!==o&&n.setValue(o)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],a=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var u=0;u<e.getBarcodeColumnCount();u++){var l=r[s][u+1].getValue(),f=s*e.getBarcodeColumnCount()+u;l.length===0?n.push(f):l.length===1?i[f]=l[0]:(a.push(f),o.push(l))}for(var h=new Array(o.length),d=0;d<h.length;d++)h[d]=o[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,ye.toIntArray(n),ye.toIntArray(a),h)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,i,o){for(var a=new Int32Array(i.length),s=100;s-- >0;){for(var u=0;u<a.length;u++)r[i[u]]=o[u][a[u]];try{return t.decodeCodewords(r,e,n)}catch(f){var l=f instanceof rt;if(!l)throw f}if(a.length===0)throw rt.getChecksumInstance();for(var u=0;u<a.length;u++)if(a[u]<o[u].length-1){a[u]++;break}else if(a[u]=0,u===a.length-1)throw rt.getChecksumInstance()}throw rt.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,i,o,a=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<a.length;s++)for(var u=0;u<a[s].length;u++)a[s][u]=new Ha;var l=0;try{for(var f=Ma(e.getDetectionResultColumns()),h=f.next();!h.done;h=f.next()){var d=h.value;if(d!=null)try{for(var p=(i=void 0,Ma(d.getCodewords())),g=p.next();!g.done;g=p.next()){var w=g.value;if(w!=null){var I=w.getRowNumber();if(I>=0){if(I>=a.length)continue;a[I][l].setValue(w.getValue())}}}}catch(_){i={error:_}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}l++}}catch(_){r={error:_}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}return a},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,i){var o,a,s=i?1:-1,u=null;if(t.isValidBarcodeColumn(e,r-s)&&(u=e.getDetectionResultColumn(r-s).getCodeword(n)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(r).getCodewordNearby(n),u!=null)return i?u.getStartX():u.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(u=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),u!=null)return i?u.getEndX():u.getStartX();for(var l=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var f=(o=void 0,Ma(e.getDetectionResultColumn(r).getCodewords())),h=f.next();!h.done;h=f.next()){var d=h.value;if(d!=null)return(i?d.getEndX():d.getStartX())+s*l*(d.getEndX()-d.getStartX())}}catch(p){o={error:p}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}l++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,i,o,a,s,u){o=t.adjustCodewordStartColumn(e,r,n,i,o,a);var l=t.getModuleBitCount(e,r,n,i,o,a);if(l==null)return null;var f,h=we.sum(l);if(i)f=o+h;else{for(var d=0;d<l.length/2;d++){var p=l[d];l[d]=l[l.length-1-d],l[l.length-1-d]=p}f=o,o=f-h}if(!t.checkCodewordSkew(h,s,u))return null;var g=i3.getDecodedValue(l),w=ye.getCodeword(g);return w===-1?null:new n3(o,f,t.getCodewordBucketNumber(g),w)},t.getModuleBitCount=function(e,r,n,i,o,a){for(var s=o,u=new Int32Array(8),l=0,f=i?1:-1,h=i;(i?s<n:s>=r)&&l<u.length;)e.get(s,a)===h?(u[l]++,s+=f):(l++,h=!h);return l===u.length||s===(i?n:r)&&l===u.length-1?u:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,i,o,a){for(var s=o,u=i?-1:1,l=0;l<2;l++){for(;(i?s>=r:s<n)&&i===e.get(s,a);){if(Math.abs(o-s)>t.CODEWORD_SKEW_SIZE)return o;s+=u}u=-u,i=!i}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw W.getFormatInstance();var i=1<<r+1,o=t.correctErrors(e,n,i);t.verifyCodewordCount(e,i);var a=p3.decode(e,""+r);return a.setErrorsCorrected(o),a.setErasures(n.length),a},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw rt.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw W.getFormatInstance();var n=e[0];if(n>e.length)throw W.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw W.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,i=r.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)r[i]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new B0,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var o=e[n][i];o.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new qS,t}(),g3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xl=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw V.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof W||n instanceof rt?V.getNotFoundInstance():n}},t.decode=function(e,r,n){var i,o,a=new Array,s=HS.detectMultiple(e,r,n);try{for(var u=g3(s.getPoints()),l=u.next();!l.done;l=u.next()){var f=l.value,h=v3.decode(s.getBits(),f[4],f[5],f[6],f[7],t.getMinCodewordWidth(f),t.getMaxCodewordWidth(f)),d=new Ht(h.getText(),h.getRawBytes(),void 0,f,Z.PDF_417);d.putMetadata(Ct.ERROR_CORRECTION_LEVEL,h.getECLevel());var p=h.getOther();p!=null&&d.putMetadata(Ct.PDF417_EXTRA_METADATA,p),a.push(d)}}catch(g){i={error:g}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return a.map(function(g){return g})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?le.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),y3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lg=function(t){y3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(lr),cg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a2=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(ke.TRY_HARDER)!==void 0,n=e==null?null:e.get(ke.POSSIBLE_FORMATS),i=new Array;if(n!=null){var o=n.some(function(a){return a===Z.UPC_A||a===Z.UPC_E||a===Z.EAN_13||a===Z.EAN_8||a===Z.CODABAR||a===Z.CODE_39||a===Z.CODE_93||a===Z.CODE_128||a===Z.ITF||a===Z.RSS_14||a===Z.RSS_EXPANDED});o&&!r&&i.push(new Co(e)),n.includes(Z.QR_CODE)&&i.push(new $l),n.includes(Z.DATA_MATRIX)&&i.push(new Gl),n.includes(Z.AZTEC)&&i.push(new Hl),n.includes(Z.PDF_417)&&i.push(new Xl),o&&r&&i.push(new Co(e))}i.length===0&&(r||i.push(new Co(e)),i.push(new $l),i.push(new Gl),i.push(new Hl),i.push(new Xl),r&&i.push(new Co(e))),this.readers=i},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=cg(this.readers),i=n.next();!i.done;i=n.next()){var o=i.value;o.reset()}}catch(a){e={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new lg("No readers where selected, nothing can be read.");try{for(var i=cg(this.readers),o=i.next();!o.done;o=i.next()){var a=o.value;try{return a.decode(e,this.hints)}catch(s){if(s instanceof lg)continue}}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}throw new V("No MultiFormat Readers were able to detect the code.")},t}(),m3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){m3(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var i=this,o=new a2;return o.setHints(r),i=t.call(this,o,n)||this,i}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(oa);var _3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){_3(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Xl,r)||this}return e})(oa);var w3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){w3(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new $l,r)||this}return e})(oa);var hd;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(hd||(hd={}));const zu=hd;var s2=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ni(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],i=this.field,o=r.length;o<=e;o++){var a=n.multiply(new ni(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));r.push(a),n=a}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new J("No error correction bytes");var n=e.length-r;if(n<=0)throw new J("No data bytes provided");var i=this.buildGenerator(r),o=new Int32Array(n);be.arraycopy(e,0,o,0,n);var a=new ni(this.field,o);a=a.multiplyByMonomial(r,1);for(var s=a.divide(i)[1],u=s.getCoefficients(),l=r-u.length,f=0;f<l;f++)e[n+f]=0;be.arraycopy(u,0,e,n+l,u.length)},t}(),Wa=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o-1;a++)for(var s=n[a],u=0;u<i-1;u++){var l=s[u];l===s[u+1]&&l===n[a+1][u]&&l===n[a+1][u+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=0;s<i;s++){var u=n[a];s+6<i&&u[s]===1&&u[s+1]===0&&u[s+2]===1&&u[s+3]===1&&u[s+4]===1&&u[s+5]===0&&u[s+6]===1&&(t.isWhiteHorizontal(u,s-4,s)||t.isWhiteHorizontal(u,s+7,s+11))&&r++,a+6<o&&n[a][s]===1&&n[a+1][s]===0&&n[a+2][s]===1&&n[a+3][s]===1&&n[a+4][s]===1&&n[a+5][s]===0&&n[a+6][s]===1&&(t.isWhiteVertical(n,s,a-4,a)||t.isWhiteVertical(n,s,a+7,a+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var i=r;i<n;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var o=n;o<i;o++)if(e[o][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=n[a],u=0;u<i;u++)s[u]===1&&r++;var l=e.getHeight()*e.getWidth(),f=Math.floor(Math.abs(r*2-l)*10/l);return f*t.N4},t.getDataMaskBit=function(e,r,n){var i,o;switch(e){case 0:i=n+r&1;break;case 1:i=n&1;break;case 2:i=r%3;break;case 3:i=(n+r)%3;break;case 4:i=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:o=n*r,i=(o&1)+o%3;break;case 6:o=n*r,i=(o&1)+o%3&1;break;case 7:o=n*r,i=o%3+(n+r&1)&1;break;default:throw new J("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,i=r?e.getHeight():e.getWidth(),o=r?e.getWidth():e.getHeight(),a=e.getArray(),s=0;s<i;s++){for(var u=0,l=-1,f=0;f<o;f++){var h=r?a[s][f]:a[f][s];h===l?u++:(u>=5&&(n+=t.N1+(u-5)),u=1,l=h)}u>=5&&(n+=t.N1+(u-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),x3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E3=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),i=0;i!==r;i++)n[i]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var i=x3(this.bytes),o=i.next();!o.done;o=i.next()){var a=o.value;ut.fill(a,e)}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var o=this.bytes[n],a=r.bytes[n],s=0,u=this.width;s<u;++s)if(o[s]!==a[s])return!1;return!0},t.prototype.toString=function(){for(var e=new ue,r=0,n=this.height;r<n;++r){for(var i=this.bytes[r],o=0,a=this.width;o<a;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),dd=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new ue;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),A3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fe=function(t){A3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(lr),fg=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,i,o){t.clearMatrix(o),t.embedBasicPatterns(n,o),t.embedTypeInfo(r,i,o),t.maybeEmbedVersionInfo(n,o),t.embedDataBits(e,i,o)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var i=new yt;t.makeTypeInfoBits(e,r,i);for(var o=0,a=i.getSize();o<a;++o){var s=i.get(i.getSize()-1-o),u=t.TYPE_INFO_COORDINATES[o],l=u[0],f=u[1];if(n.setBoolean(l,f,s),o<8){var h=n.getWidth()-o-1,d=8;n.setBoolean(h,d,s)}else{var h=8,d=n.getHeight()-7+(o-8);n.setBoolean(h,d,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new yt;t.makeVersionInfoBits(e,n);for(var i=6*3-1,o=0;o<6;++o)for(var a=0;a<3;++a){var s=n.get(i);i--,r.setBoolean(o,r.getHeight()-11+a,s),r.setBoolean(r.getHeight()-11+a,o,s)}}},t.embedDataBits=function(e,r,n){for(var i=0,o=-1,a=n.getWidth()-1,s=n.getHeight()-1;a>0;){for(a===6&&(a-=1);s>=0&&s<n.getHeight();){for(var u=0;u<2;++u){var l=a-u;if(t.isEmpty(n.get(l,s))){var f=void 0;i<e.getSize()?(f=e.get(i),++i):f=!1,r!==255&&Wa.getDataMaskBit(r,l,s)&&(f=!f),n.setBoolean(l,s,f)}}s+=o}o=-o,s+=o,a-=2}if(i!==e.getSize())throw new Fe("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-le.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new J("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!dd.isValidMaskPattern(r))throw new Fe("Invalid mask pattern");var i=e.getBits()<<3|r;n.appendBits(i,5);var o=t.calculateBCHCode(i,t.TYPE_INFO_POLY);n.appendBits(o,10);var a=new yt;if(a.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(a),n.getSize()!==15)throw new Fe("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Fe("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Fe;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var i=0;i<8;++i){if(!t.isEmpty(n.get(e+i,r)))throw new Fe;n.setNumber(e+i,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var i=0;i<7;++i){if(!t.isEmpty(n.get(e,r+i)))throw new Fe;n.setNumber(e,r+i,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var i=0;i<5;++i)for(var o=t.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)n.setNumber(e+a,r+i,o[a])},t.embedPositionDetectionPattern=function(e,r,n){for(var i=0;i<7;++i)for(var o=t.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)n.setNumber(e+a,r+i,o[a])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],o=0,a=i.length;o!==a;o++){var s=i[o];if(s>=0)for(var u=0;u!==a;u++){var l=i[u];l>=0&&t.isEmpty(r.get(l,s))&&t.embedPositionAdjustmentPattern(l-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),I3=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),hg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Wa.applyMaskPenaltyRule1(e)+Wa.applyMaskPenaltyRule2(e)+Wa.applyMaskPenaltyRule3(e)+Wa.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,o=n!==null&&n.get(zu.CHARACTER_SET)!==void 0;o&&(i=n.get(zu.CHARACTER_SET).toString());var a=this.chooseMode(e,i),s=new yt;if(a===Be.BYTE&&(o||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=st.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,s)}this.appendModeInfo(a,s);var l=new yt;this.appendBytes(e,a,l,i);var f;if(n!==null&&n.get(zu.QR_VERSION)!==void 0){var h=Number.parseInt(n.get(zu.QR_VERSION).toString(),10);f=Bi.getVersionForNumber(h);var d=this.calculateBitsNeeded(a,s,l,f);if(!this.willFit(d,f,r))throw new Fe("Data too big for requested version")}else f=this.recommendVersion(r,a,s,l);var p=new yt;p.appendBitArray(s);var g=a===Be.BYTE?l.getSizeInBytes():e.length;this.appendLengthInfo(g,f,a,p),p.appendBitArray(l);var w=f.getECBlocksForLevel(r),I=f.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(I,p);var _=this.interleaveWithECBytes(p,f.getTotalCodewords(),I,w.getNumBlocks()),m=new dd;m.setECLevel(r),m.setMode(a),m.setVersion(f);var x=f.getDimensionForVersion(),P=new E3(x,x),k=this.chooseMaskPattern(_,r,f,P);return m.setMaskPattern(k),fg.buildMatrix(_,r,f,k,P),m.setMatrix(P),m},t.recommendVersion=function(e,r,n,i){var o=this.calculateBitsNeeded(r,n,i,Bi.getVersionForNumber(1)),a=this.chooseVersion(o,e),s=this.calculateBitsNeeded(r,n,i,a);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,i){return r.getSize()+e.getCharacterCountBits(i)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),st.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Be.KANJI;for(var n=!1,i=!1,o=0,a=e.length;o<a;++o){var s=e.charAt(o);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Be.BYTE}return i?Be.ALPHANUMERIC:n?Be.NUMERIC:Be.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=Tr.encode(e,st.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var o=r[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,i){for(var o=Number.MAX_SAFE_INTEGER,a=-1,s=0;s<dd.NUM_MASK_PATTERNS;s++){fg.buildMatrix(e,r,n,s,i);var u=this.calculateMaskPenalty(i);u<o&&(o=u,a=s)}return a},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var i=Bi.getVersionForNumber(n);if(t.willFit(e,i,r))return i}throw new Fe("Data too big")},t.willFit=function(e,r,n){var i=r.getTotalCodewords(),o=r.getECBlocksForLevel(n),a=o.getTotalECCodewords(),s=i-a,u=(e+7)/8;return s>=u},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Fe("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var i=0;i<4&&r.getSize()<n;++i)r.appendBit(!1);var o=r.getSize()&7;if(o>0)for(var i=o;i<8;i++)r.appendBit(!1);for(var a=e-r.getSizeInBytes(),i=0;i<a;++i)r.appendBits(i&1?17:236,8);if(r.getSize()!==n)throw new Fe("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,i,o,a){if(i>=n)throw new Fe("Block ID too large");var s=e%n,u=n-s,l=Math.floor(e/n),f=l+1,h=Math.floor(r/n),d=h+1,p=l-h,g=f-d;if(p!==g)throw new Fe("EC bytes mismatch");if(n!==u+s)throw new Fe("RS blocks mismatch");if(e!==(h+p)*u+(d+g)*s)throw new Fe("Total bytes mismatch");i<u?(o[0]=h,a[0]=p):(o[0]=d,a[0]=g)},t.interleaveWithECBytes=function(e,r,n,i){var o,a,s,u;if(e.getSizeInBytes()!==n)throw new Fe("Number of bits and data bytes does not match");for(var l=0,f=0,h=0,d=new Array,p=0;p<i;++p){var g=new Int32Array(1),w=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,i,p,g,w);var I=g[0],_=new Uint8Array(I);e.toBytes(8*l,_,0,I);var m=t.generateECBytes(_,w[0]);d.push(new I3(_,m)),f=Math.max(f,I),h=Math.max(h,m.length),l+=g[0]}if(n!==l)throw new Fe("Data bytes does not match offset");for(var x=new yt,p=0;p<f;++p)try{for(var P=(o=void 0,hg(d)),k=P.next();!k.done;k=P.next()){var M=k.value,_=M.getDataBytes();p<_.length&&x.appendBits(_[p],8)}}catch(R){o={error:R}}finally{try{k&&!k.done&&(a=P.return)&&a.call(P)}finally{if(o)throw o.error}}for(var p=0;p<h;++p)try{for(var A=(s=void 0,hg(d)),E=A.next();!E.done;E=A.next()){var M=E.value,m=M.getErrorCorrectionBytes();p<m.length&&x.appendBits(m[p],8)}}catch(R){s={error:R}}finally{try{E&&!E.done&&(u=A.return)&&u.call(A)}finally{if(s)throw s.error}}if(r!==x.getSizeInBytes())throw new Fe("Interleaving error: "+r+" and "+x.getSizeInBytes()+" differ.");return x},t.generateECBytes=function(e,r){for(var n=e.length,i=new Int32Array(n+r),o=0;o<n;o++)i[o]=e[o]&255;new s2(nr.QR_CODE_FIELD_256).encode(i,r);for(var a=new Uint8Array(r),o=0;o<r;o++)a[o]=i[n+o];return a},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,i){var o=n.getCharacterCountBits(r);if(e>=1<<o)throw new Fe(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},t.appendBytes=function(e,r,n,i){switch(r){case Be.NUMERIC:t.appendNumericBytes(e,n);break;case Be.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Be.BYTE:t.append8BitBytes(e,n,i);break;case Be.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Fe("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var o=t.getDigit(e.charAt(i));if(i+2<n){var a=t.getDigit(e.charAt(i+1)),s=t.getDigit(e.charAt(i+2));r.appendBits(o*100+a*10+s,10),i+=3}else if(i+1<n){var a=t.getDigit(e.charAt(i+1));r.appendBits(o*10+a,7),i+=2}else r.appendBits(o,4),i++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var o=t.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Fe;if(i+1<n){var a=t.getAlphanumericCode(e.charCodeAt(i+1));if(a===-1)throw new Fe;r.appendBits(o*45+a,11),i+=2}else r.appendBits(o,6),i++}},t.append8BitBytes=function(e,r,n){var i;try{i=Tr.encode(e,n)}catch(u){throw new Fe(u)}for(var o=0,a=i.length;o!==a;o++){var s=i[o];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=Tr.encode(e,st.SJIS)}catch(h){throw new Fe(h)}for(var i=n.length,o=0;o<i;o+=2){var a=n[o]&255,s=n[o+1]&255,u=a<<8&4294967295|s,l=-1;if(u>=33088&&u<=40956?l=u-33088:u>=57408&&u<=60351&&(l=u-49472),l===-1)throw new Fe("Invalid byte sequence");var f=(l>>8)*192+(l&255);r.appendBits(f,13)}},t.appendECI=function(e,r){r.appendBits(Be.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=st.UTF8.getName(),t})();var C3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){C3(e,t);function e(r,n,i,o,a,s,u,l){var f=t.call(this,s,u)||this;if(f.yuvData=r,f.dataWidth=n,f.dataHeight=i,f.left=o,f.top=a,o+s>n||a+u>i)throw new J("Crop rectangle does not fit within image data.");return l&&f.reverseHorizontal(s,u),f}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new J("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(r+this.top)*this.dataWidth+this.left;return be.arraycopy(this.yuvData,o,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=r*n,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return be.arraycopy(this.yuvData,a,o,0,i),o;for(var s=0;s<n;s++){var u=s*r;be.arraycopy(this.yuvData,a,o,u,r),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,i,o,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(r*n),o=this.yuvData,a=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var u=s*r,l=0;l<r;l++){var f=o[a+l*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+l]=4278190080|f*65793}a+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var i=this.yuvData,o=0,a=this.top*this.dataWidth+this.left;o<n;o++,a+=this.dataWidth)for(var s=a+r/2,u=a,l=a+r-1;u<s;u++,l--){var f=i[u];i[u]=i[l],i[l]=f}},e.prototype.invert=function(){return new Rc(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(zs);var S3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){S3(e,t);function e(r,n,i,o,a,s,u){var l=t.call(this,n,i)||this;if(l.dataWidth=o,l.dataHeight=a,l.left=s,l.top=u,r.BYTES_PER_ELEMENT===4){for(var f=n*i,h=new Uint8ClampedArray(f),d=0;d<f;d++){var p=r[d],g=p>>16&255,w=p>>7&510,I=p&255;h[d]=(g+w+I)/4&255}l.luminances=h}else l.luminances=r;if(o===void 0&&(l.dataWidth=n),a===void 0&&(l.dataHeight=i),s===void 0&&(l.left=0),u===void 0&&(l.top=0),l.left+n>l.dataWidth||l.top+i>l.dataHeight)throw new J("Crop rectangle does not fit within image data.");return l}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new J("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(r+this.top)*this.dataWidth+this.left;return be.arraycopy(this.luminances,o,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=r*n,o=new Uint8ClampedArray(i),a=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return be.arraycopy(this.luminances,a,o,0,i),o;for(var s=0;s<n;s++){var u=s*r;be.arraycopy(this.luminances,a,o,u,r),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new Rc(this)},e})(zs);var T3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R3=function(t){T3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(st),O3=function(){function t(){}return t.ISO_8859_1=st.ISO8859_1,t}(),pd,P3=301,D3=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=P3);return{LOG:t,ALOG:e}};pd=D3([],[]),pd.LOG;pd.ALOG;var dg;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(dg||(dg={}));var pg=129,u2=230,N3=231,b3=235,k3=236,M3=237,L3=238,F3=239,B3=240,Yf=254,V3=254,vg="[)>05",gg="[)>06",yg="",Se=0,xt=1,qt=2,it=3,pt=4,Lt=5,U3=function(){function t(){}return t.prototype.getEncodingMode=function(){return Se},t.prototype.encode=function(e){var r=Fr.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=Fr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Lt:e.writeCodeword(N3),e.signalEncoderChange(Lt);return;case xt:e.writeCodeword(u2),e.signalEncoderChange(xt);return;case it:e.writeCodeword(L3),e.signalEncoderChange(it);break;case qt:e.writeCodeword(F3),e.signalEncoderChange(qt);break;case pt:e.writeCodeword(B3),e.signalEncoderChange(pt);break;default:throw new Error("Illegal mode: "+i)}else Fr.isExtendedASCII(n)?(e.writeCodeword(b3),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Fr.isDigit(e)&&Fr.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),j3=function(){function t(){}return t.prototype.getEncodingMode=function(){return Lt},t.prototype.encode=function(e){var r=new ue;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var i=Fr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Se);break}}var o=r.length()-1,a=1,s=e.getCodewordCount()+o+a;e.updateSymbolInfo(s);var u=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||u)if(o<=249)r.setCharAt(0,ge.getCharAt(o));else if(o<=1555)r.setCharAt(0,ge.getCharAt(Math.floor(o/250)+249)),r.insert(1,ge.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var l=0,n=r.length();l<n;l++)e.writeCodeword(this.randomize255State(r.charAt(l).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,i=e+n;return i<=255?i:i-256},t}(),V0=function(){function t(){}return t.prototype.getEncodingMode=function(){return xt},t.prototype.encodeMaximal=function(e){for(var r=new ue,n=0,i=e.pos,o=0;e.hasMoreCharacters();){var a=e.getCurrentChar();e.pos++,n=this.encodeChar(a,r),r.length()%3===0&&(i=e.pos,o=r.length())}if(o!==r.length()){var s=Math.floor(r.length()/3*2),u=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(u);var l=e.getSymbolInfo().getDataCapacity()-u,f=Math.floor(r.length()%3);(f===2&&l!==2||f===1&&(n>3||l!==1))&&(e.pos=i)}r.length()>0&&e.writeCodeword(u2),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new ue;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,r),o=Math.floor(r.length()/3)*2,a=e.getCodewordCount()+o;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(!e.hasMoreCharacters()){var u=new ue;for(r.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,r,u,i));r.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,r,u,i);break}var l=r.length();if(l%3===0){var f=Fr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(f!==this.getEncodingMode()){e.signalEncoderChange(Se);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,i){var o=r.length(),a=r.toString().substring(0,o-i);r.setLengthToZero(),r.append(a),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,n),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),i=r.length()%3,o=e.getCodewordCount()+n;e.updateSymbolInfo(o);var a=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(Yf)}else if(a===1&&i===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(Yf),e.pos--}else if(i===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(a>0||e.hasMoreCharacters())&&e.writeCodeword(Yf)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Se)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,i=r%256,o=new ue;return o.append(n),o.append(i),o.toString()},t}(),z3=function(){function t(){}return t.prototype.getEncodingMode=function(){return pt},t.prototype.encode=function(e){for(var r=new ue;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var i=r.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var o=r.toString().substring(4);r.setLengthToZero(),r.append(o);var a=Fr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Se);break}}}r.append(ge.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var a=n-1,s=this.encodeToCodewords(r.toString()),u=!e.hasMoreCharacters(),l=u&&a<=2;if(a<=2){e.updateSymbolInfo(e.getCodewordCount()+a);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(l=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}l?(e.resetSymbolInfo(),e.pos-=a):e.writeCodewords(s)}finally{e.signalEncoderChange(Se)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(ge.getCharAt(e-64)):Fr.illegalCharacter(ge.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=r>=2?e.charAt(1).charCodeAt(0):0,o=r>=3?e.charAt(2).charCodeAt(0):0,a=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(i<<12)+(o<<6)+a,u=s>>16&255,l=s>>8&255,f=s&255,h=new ue;return h.append(u),r>=2&&h.append(l),r>=3&&h.append(f),h.toString()},t}(),H3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W3=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ae=function(){function t(e,r,n,i,o,a,s,u){s===void 0&&(s=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=a,this.rsBlockData=s,this.rsBlockError=u}return t.lookup=function(e,r,n,i,o){var a,s;r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var u=W3($3),l=u.next();!l.done;l=u.next()){var f=l.value;if(!(r===1&&f.rectangular)&&!(r===2&&!f.rectangular)&&!(n!=null&&(f.getSymbolWidth()<n.getWidth()||f.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(f.getSymbolWidth()>i.getWidth()||f.getSymbolHeight()>i.getHeight()))&&e<=f.dataCapacity)return f}}catch(h){a={error:h}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),G3=function(t){H3(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(Ae),$3=[new Ae(!1,3,5,8,8,1),new Ae(!1,5,7,10,10,1),new Ae(!0,5,7,16,6,1),new Ae(!1,8,10,12,12,1),new Ae(!0,10,11,14,6,2),new Ae(!1,12,12,14,14,1),new Ae(!0,16,14,24,10,1),new Ae(!1,18,14,16,16,1),new Ae(!1,22,18,18,18,1),new Ae(!0,22,18,16,10,2),new Ae(!1,30,20,20,20,1),new Ae(!0,32,24,16,14,2),new Ae(!1,36,24,22,22,1),new Ae(!1,44,28,24,24,1),new Ae(!0,49,28,22,14,2),new Ae(!1,62,36,14,14,4),new Ae(!1,86,42,16,16,4),new Ae(!1,114,48,18,18,4),new Ae(!1,144,56,20,20,4),new Ae(!1,174,68,22,22,4),new Ae(!1,204,84,24,24,4,102,42),new Ae(!1,280,112,14,14,16,140,56),new Ae(!1,368,144,16,16,16,92,36),new Ae(!1,456,192,18,18,16,114,48),new Ae(!1,576,224,20,20,16,144,56),new Ae(!1,696,272,22,22,16,174,68),new Ae(!1,816,336,24,24,16,136,56),new Ae(!1,1050,408,18,18,36,175,68),new Ae(!1,1304,496,20,20,36,163,62),new G3],X3=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new ue,i=0,o=r.length;i<o;i++){var a=String.fromCharCode(r[i]&255);if(a==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(a)}this.msg=n.toString(),this.shape=0,this.codewords=new ue,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ae.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),K3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q3=function(t){K3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return it},e.prototype.encode=function(r){for(var n=new ue;r.hasMoreCharacters();){var i=r.getCurrentChar();r.pos++,this.encodeChar(i,n);var o=n.length();if(o%3===0){this.writeNextTriplet(r,n);var a=Fr.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){r.signalEncoderChange(Se);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):Fr.illegalCharacter(ge.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var i=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),o=n.length();r.pos-=o,(r.getRemainingCharacters()>1||i>1||r.getRemainingCharacters()!==i)&&r.writeCodeword(V3),r.getNewEncoding()<0&&r.signalEncoderChange(Se)},e}(V0),Y3=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q3=function(t){Y3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return qt},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(r-128,n),i},e}(V0),Fr=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=pg+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,i,o){r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!1);var a=new V0,s=[new U3,a,new Q3,new q3,new z3,new j3],u=new X3(e);u.setSymbolShape(r),u.setSizeConstraints(n,i),e.startsWith(vg)&&e.endsWith(yg)?(u.writeCodeword(k3),u.setSkipAtEnd(2),u.pos+=vg.length):e.startsWith(gg)&&e.endsWith(yg)&&(u.writeCodeword(M3),u.setSkipAtEnd(2),u.pos+=gg.length);var l=Se;for(o&&(a.encodeMaximal(u),l=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)s[l].encode(u),u.getNewEncoding()>=0&&(l=u.getNewEncoding(),u.resetEncoderSignal());var f=u.getCodewordCount();u.updateSymbolInfo();var h=u.getSymbolInfo().getDataCapacity();f<h&&l!==Se&&l!==Lt&&l!==pt&&u.writeCodeword("");var d=u.getCodewords();for(d.length()<h&&d.append(pg);d.length()<h;)d.append(this.randomize253State(d.length()+1));return u.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var i=this.lookAheadTestIntern(e,r,n);if(n===it&&i===it){for(var o=Math.min(r+3,e.length),a=r;a<o;a++)if(!this.isNativeX12(e.charCodeAt(a)))return Se}else if(n===pt&&i===pt){for(var o=Math.min(r+4,e.length),a=r;a<o;a++)if(!this.isNativeEDIFACT(e.charCodeAt(a)))return Se}return i},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var i;n===Se?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var o=0,a=new Uint8Array(6),s=[];;){if(r+o===e.length){ut.fill(a,0),ut.fill(s,0);var u=this.findMinimums(i,s,le.MAX_VALUE,a),l=this.getMinimumCount(a);if(s[Se]===u)return Se;if(l===1){if(a[Lt]>0)return Lt;if(a[pt]>0)return pt;if(a[qt]>0)return qt;if(a[it]>0)return it}return xt}var f=e.charCodeAt(r+o);if(o++,this.isDigit(f)?i[Se]+=.5:this.isExtendedASCII(f)?(i[Se]=Math.ceil(i[Se]),i[Se]+=2):(i[Se]=Math.ceil(i[Se]),i[Se]++),this.isNativeC40(f)?i[xt]+=2/3:this.isExtendedASCII(f)?i[xt]+=8/3:i[xt]+=4/3,this.isNativeText(f)?i[qt]+=2/3:this.isExtendedASCII(f)?i[qt]+=8/3:i[qt]+=4/3,this.isNativeX12(f)?i[it]+=2/3:this.isExtendedASCII(f)?i[it]+=13/3:i[it]+=10/3,this.isNativeEDIFACT(f)?i[pt]+=3/4:this.isExtendedASCII(f)?i[pt]+=17/4:i[pt]+=13/4,this.isSpecialB256(f)?i[Lt]+=4:i[Lt]++,o>=4){if(ut.fill(a,0),ut.fill(s,0),this.findMinimums(i,s,le.MAX_VALUE,a),s[Se]<this.min(s[Lt],s[xt],s[qt],s[it],s[pt]))return Se;if(s[Lt]<s[Se]||s[Lt]+1<this.min(s[xt],s[qt],s[it],s[pt]))return Lt;if(s[pt]+1<this.min(s[Lt],s[xt],s[qt],s[it],s[Se]))return pt;if(s[qt]+1<this.min(s[Lt],s[xt],s[pt],s[it],s[Se]))return qt;if(s[it]+1<this.min(s[Lt],s[xt],s[pt],s[qt],s[Se]))return it;if(s[xt]+1<this.min(s[Se],s[Lt],s[pt],s[qt])){if(s[xt]<s[it])return xt;if(s[xt]===s[it]){for(var h=r+o+1;h<e.length;){var d=e.charCodeAt(h);if(this.isX12TermSep(d))return it;if(!this.isNativeX12(d))break;h++}return xt}}}}},t.min=function(e,r,n,i,o){var a=Math.min(e,Math.min(r,Math.min(n,i)));return o===void 0?a:Math.min(a,o)},t.findMinimums=function(e,r,n,i){for(var o=0;o<6;o++){var a=r[o]=Math.ceil(e[o]);n>a&&(n=a,ut.fill(i,0)),n===a&&(i[o]=i[o]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,i=r;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-r},t.illegalCharacter=function(e){var r=le.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),Qf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mg=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Tr.encode(e,this.charset)!=null}catch{return!1}},t}(),Z3=function(){function t(e,r,n){var i,o,a,s,u,l;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(S){return new mg(R3.forName(S))}),this.encoders=[];var f=[];f.push(new mg(O3.ISO_8859_1));for(var h=r!=null&&r.name.startsWith("UTF"),d=0;d<e.length;d++){var p=!1;try{for(var g=(i=void 0,Qf(f)),w=g.next();!w.done;w=g.next()){var I=w.value,_=e.charAt(d),m=_.charCodeAt(0);if(m===n||I.canEncode(_)){p=!0;break}}}catch(S){i={error:S}}finally{try{w&&!w.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}if(!p)try{for(var x=(a=void 0,Qf(this.ENCODERS)),P=x.next();!P.done;P=x.next()){var I=P.value;if(I.canEncode(e.charAt(d))){f.push(I),p=!0;break}}}catch(S){a={error:S}}finally{try{P&&!P.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}p||(h=!0)}if(f.length===1&&!h)this.encoders=[f[0]];else{this.encoders=[];var k=0;try{for(var M=Qf(f),A=M.next();!A.done;A=M.next()){var I=A.value;this.encoders[k++]=I}}catch(S){u={error:S}}finally{try{A&&!A.done&&(l=M.return)&&l.call(M)}finally{if(u)throw u.error}}}var E=-1;if(r!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&r.name===this.encoders[d].name){E=d;break}}this.priorityEncoderIndex=E}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return Tr.encode(ge.getCharAt(e),this.encoders[r].name)},t}(),J3=3,eT=function(){function t(e,r,n){this.fnc1=n;var i=new Z3(e,r,n);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var a=e.charAt(o).charCodeAt(0);this.bytes[o]=a===n?1e3:a}else this.bytes=this.encodeMinimally(e,i,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new ue,i=e;i<r;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,i,o,a){var s=e.charAt(i).charCodeAt(0),u=0,l=r.length();r.getPriorityEncoderIndex()>=0&&(s===a||r.canEncode(s,r.getPriorityEncoderIndex()))&&(u=r.getPriorityEncoderIndex(),l=u+1);for(var f=u;f<l;f++)(s===a||r.canEncode(s,f))&&this.addEdge(n,i+1,new _g(s,r,f,o,a))},t.prototype.encodeMinimally=function(e,r,n){var i=e.length,o=new _g[i+1][r.length()];this.addEdges(e,r,o,0,null,n);for(var a=1;a<=i;a++){for(var s=0;s<r.length();s++)o[a][s]!=null&&a<i&&this.addEdges(e,r,o,a,o[a][s],n);for(var s=0;s<r.length();s++)o[a-1][s]=null}for(var u=-1,l=le.MAX_VALUE,s=0;s<r.length();s++)if(o[i][s]!=null){var f=o[i][s];f.cachedTotalSize<l&&(l=f.cachedTotalSize,u=s)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var h=[],d=o[i][u];d!=null;){if(d.isFNC1())h.unshift(1e3);else for(var p=r.encode(d.c,d.encoderIndex),a=p.length-1;a>=0;a--)h.unshift(p[a]&255);var g=d.previous===null?0:d.previous.encoderIndex;g!==d.encoderIndex&&h.unshift(256+r.getECIValue(d.encoderIndex)),d=d.previous}for(var w=[],a=0;a<w.length;a++)w[a]=h[a];return w},t}(),_g=function(){function t(e,r,n,i,o){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var a=this.isFNC1()?1:r.encode(e,n).length,s=i===null?0:i.encoderIndex;s!==n&&(a+=J3),i!=null&&(a+=i.cachedTotalSize),this.cachedTotalSize=a}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),tT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var wg;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(wg||(wg={}));(function(t){tT(e,t);function e(r,n,i,o,a){var s=t.call(this,r,n,i)||this;return s.shape=o,s.macroId=a,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(eT);var rT=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),xg=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),nT=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),iT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U0=function(t){iT(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.value=n,o.bitCount=i,o}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+le.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(nT),oT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aT=function(t){oT(e,t);function e(r,n,i){var o=t.call(this,r,0,0)||this;return o.binaryShiftStart=n,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(r,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):i===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(U0);function sT(t,e,r){return new aT(t,e,r)}function La(t,e,r){return new U0(t,e,r)}var uT=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ii=0,Kl=1,Cr=2,l2=3,$r=4,lT=new U0(null,0,0),Zf=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],cT=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function fT(t){var e,r;try{for(var n=cT(t),i=n.next();!i.done;i=n.next()){var o=i.value;ut.fill(o,-1)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[ii][$r]=0,t[Kl][$r]=0,t[Kl][ii]=28,t[l2][$r]=0,t[Cr][$r]=0,t[Cr][ii]=15,t}var c2=fT(ut.createInt32Array(6,6)),hT=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dT=function(){function t(e,r,n,i){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,i=this.token;if(e!==this.mode){var o=Zf[this.mode][e];i=La(i,o&65535,o>>16),n+=o>>16}var a=e===Cr?4:5;return i=La(i,r,a),new t(i,e,0,n+a)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,i=this.mode===Cr?4:5;return n=La(n,c2[this.mode][e],i),n=La(n,r,5),new t(n,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,i=this.bitCount;if(this.mode===$r||this.mode===Cr){var o=Zf[n][ii];r=La(r,o&65535,o>>16),i+=o>>16,n=ii}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(r,n,this.binaryShiftByteCount+1,i+a);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=sT(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(Zf[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var a=new yt;try{for(var s=hT(i),u=s.next();!u.done;u=s.next()){var l=u.value;l.appendTo(a,e)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.prototype.toString=function(){return ge.format("%s bits=%d bytes=%d",uT[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(lT,ii,0,0),t}();function pT(t){var e=ge.getCharCode(" "),r=ge.getCharCode("."),n=ge.getCharCode(",");t[ii][e]=1;for(var i=ge.getCharCode("Z"),o=ge.getCharCode("A"),a=o;a<=i;a++)t[ii][a]=a-o+2;t[Kl][e]=1;for(var s=ge.getCharCode("z"),u=ge.getCharCode("a"),a=u;a<=s;a++)t[Kl][a]=a-u+2;t[Cr][e]=1;for(var l=ge.getCharCode("9"),f=ge.getCharCode("0"),a=f;a<=l;a++)t[Cr][a]=a-f+2;t[Cr][n]=12,t[Cr][r]=13;for(var h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<h.length;d++)t[l2][ge.getCharCode(h[d])]=d;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<p.length;d++)ge.getCharCode(p[d])>0&&(t[$r][ge.getCharCode(p[d])]=d);return t}var Jf=pT(ut.createInt32Array(5,256)),Hu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vT=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=ge.getCharCode(" "),r=ge.getCharCode(`
`),n=xg.singletonList(dT.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ge.getCharCode("\r"):o=a===r?2:0;break;case ge.getCharCode("."):o=a===e?3:0;break;case ge.getCharCode(","):o=a===e?4:0;break;case ge.getCharCode(":"):o=a===e?5:0;break;default:o=0}o>0?(n=t.updateStateListForPair(n,i,o),i++):n=this.updateStateListForChar(n,i)}var s=xg.min(n,function(u,l){return u.getBitCount()-l.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,i,o=[];try{for(var a=Hu(e),s=a.next();!s.done;s=a.next()){var u=s.value;this.updateStateForChar(u,r,o)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return t.simplifyStates(o)},t.prototype.updateStateForChar=function(e,r,n){for(var i=this.text[r]&255,o=Jf[e.getMode()][i]>0,a=null,s=0;s<=$r;s++){var u=Jf[s][i];if(u>0){if(a==null&&(a=e.endBinaryShift(r)),!o||s===e.getMode()||s===Cr){var l=a.latchAndAppend(s,u);n.push(l)}if(!o&&c2[e.getMode()][s]>=0){var f=a.shiftAndAppend(s,u);n.push(f)}}}if(e.getBinaryShiftByteCount()>0||Jf[e.getMode()][i]===0){var h=e.addBinaryShiftChar(r);n.push(h)}},t.updateStateListForPair=function(e,r,n){var i,o,a=[];try{for(var s=Hu(e),u=s.next();!u.done;u=s.next()){var l=u.value;this.updateStateForPair(l,r,n,a)}}catch(f){i={error:f}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(a)},t.updateStateForPair=function(e,r,n,i){var o=e.endBinaryShift(r);if(i.push(o.latchAndAppend($r,n)),e.getMode()!==$r&&i.push(o.shiftAndAppend($r,n)),n===3||n===4){var a=o.latchAndAppend(Cr,16-n).latchAndAppend(Cr,1);i.push(a)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);i.push(s)}},t.simplifyStates=function(e){var r,n,i,o,a=[];try{for(var s=Hu(e),u=s.next();!u.done;u=s.next()){var l=u.value,f=!0,h=function(I){if(I.isBetterThanOrEqualTo(l))return f=!1,"break";l.isBetterThanOrEqualTo(I)&&(a=a.filter(function(_){return _!==I}))};try{for(var d=(i=void 0,Hu(a)),p=d.next();!p.done;p=d.next()){var g=p.value,w=h(g);if(w==="break")break}}catch(I){i={error:I}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}f&&a.push(l)}}catch(I){r={error:I}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t}(),gT=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var i=new vT(e).encode(),o=le.truncDivision(i.getSize()*r,100)+11,a=i.getSize()+o,s,u,l,f,h;if(n!==t.DEFAULT_AZTEC_LAYERS){if(s=n<0,u=Math.abs(n),u>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new J(ge.format("Illegal value %s for layers",n));l=t.totalBitsInLayer(u,s),f=t.WORD_SIZE[u];var d=l-l%f;if(h=t.stuffBits(i,f),h.getSize()+o>d)throw new J("Data to large for user specified layer");if(s&&h.getSize()>f*64)throw new J("Data to large for user specified layer")}else{f=0,h=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new J("Data too large for an Aztec code");if(s=p<=3,u=s?p+1:p,l=t.totalBitsInLayer(u,s),!(a>l)){(h==null||f!==t.WORD_SIZE[u])&&(f=t.WORD_SIZE[u],h=t.stuffBits(i,f));var d=l-l%f;if(!(s&&h.getSize()>f*64)&&h.getSize()+o<=d)break}}}var g=t.generateCheckWords(h,l,f),w=h.getSize()/f,I=t.generateModeMessage(s,u,w),_=(s?11:14)+u*4,m=new Int32Array(_),x;if(s){x=_;for(var p=0;p<m.length;p++)m[p]=p}else{x=_+1+2*le.truncDivision(le.truncDivision(_,2)-1,15);for(var P=le.truncDivision(_,2),k=le.truncDivision(x,2),p=0;p<P;p++){var M=p+le.truncDivision(p,15);m[P-p-1]=k-M-1,m[P+p]=k+M+1}}for(var A=new tn(x),p=0,E=0;p<u;p++){for(var S=(u-p)*4+(s?9:12),R=0;R<S;R++)for(var D=R*2,N=0;N<2;N++)g.get(E+D+N)&&A.set(m[p*2+N],m[p*2+R]),g.get(E+S*2+D+N)&&A.set(m[p*2+R],m[_-1-p*2-N]),g.get(E+S*4+D+N)&&A.set(m[_-1-p*2-N],m[_-1-p*2-R]),g.get(E+S*6+D+N)&&A.set(m[_-1-p*2-R],m[p*2+N]);E+=S*8}if(t.drawModeMessage(A,s,x,I),s)t.drawBullsEye(A,le.truncDivision(x,2),5);else{t.drawBullsEye(A,le.truncDivision(x,2),7);for(var p=0,R=0;p<le.truncDivision(_,2)-1;p+=15,R+=16)for(var N=le.truncDivision(x,2)&1;N<x;N+=2)A.set(le.truncDivision(x,2)-R,N),A.set(le.truncDivision(x,2)+R,N),A.set(N,le.truncDivision(x,2)-R),A.set(N,le.truncDivision(x,2)+R)}var O=new rT;return O.setCompact(s),O.setSize(x),O.setLayers(u),O.setCodeWords(w),O.setMatrix(A),O},t.drawBullsEye=function(e,r,n){for(var i=0;i<n;i+=2)for(var o=r-i;o<=r+i;o++)e.set(o,r-i),e.set(o,r+i),e.set(r-i,o),e.set(r+i,o);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var i=new yt;return e?(i.appendBits(r-1,2),i.appendBits(n-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(r-1,5),i.appendBits(n-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,r,n,i){var o=le.truncDivision(n,2);if(r)for(var a=0;a<7;a++){var s=o-3+a;i.get(a)&&e.set(s,o-5),i.get(a+7)&&e.set(o+5,s),i.get(20-a)&&e.set(s,o+5),i.get(27-a)&&e.set(o-5,s)}else for(var a=0;a<10;a++){var s=o-5+a+le.truncDivision(a,5);i.get(a)&&e.set(s,o-7),i.get(a+10)&&e.set(o+7,s),i.get(29-a)&&e.set(s,o+7),i.get(39-a)&&e.set(o-7,s)}},t.generateCheckWords=function(e,r,n){var i,o,a=e.getSize()/n,s=new s2(t.getGF(n)),u=le.truncDivision(r,n),l=t.bitsToWords(e,n,u);s.encode(l,u-a);var f=r%n,h=new yt;h.appendBits(0,f);try{for(var d=gT(Array.from(l)),p=d.next();!p.done;p=d.next()){var g=p.value;h.appendBits(g,n)}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return h},t.bitsToWords=function(e,r,n){var i=new Int32Array(n),o,a;for(o=0,a=e.getSize()/r;o<a;o++){for(var s=0,u=0;u<r;u++)s|=e.get(o*r+u)?1<<r-u-1:0;i[o]=s}return i},t.getGF=function(e){switch(e){case 4:return nr.AZTEC_PARAM;case 6:return nr.AZTEC_DATA_6;case 8:return nr.AZTEC_DATA_8;case 10:return nr.AZTEC_DATA_10;case 12:return nr.AZTEC_DATA_12;default:throw new J("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new yt,i=e.getSize(),o=(1<<r)-2,a=0;a<i;a+=r){for(var s=0,u=0;u<r;u++)(a+u>=i||e.get(a+u))&&(s|=1<<r-1-u);(s&o)===o?(n.appendBits(s&o,r),a--):s&o?n.appendBits(s,r):(n.appendBits(s|1,r),a--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var yT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mT=function(t){yT(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var i=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,i){for(var o=new Uint8ClampedArray(n*i),a=0,s=0,u=r.length;a<u;a+=4,s++){var l=void 0,f=r[a+3];if(f===0)l=255;else{var h=r[a],d=r[a+1],p=r[a+2];l=306*h+601*d+117*p+512>>10}o[s]=l}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new J("Requested row is outside the image: "+r);var i=this.getWidth(),o=r*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,o){return t.prototype.crop.call(this,r,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Rc(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var i=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*a),u=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*a);n.width=s,n.height=u;var l=n.getContext("2d");if(!l)throw new Error("Could not create a Canvas Context element.");return l.translate(s/2,u/2),l.rotate(i),l.drawImage(this.canvas,o/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(zs);function f2(){return typeof navigator<"u"}function _T(){return f2()&&!!navigator.mediaDevices}function wT(){return!!(_T()&&navigator.mediaDevices.enumerateDevices)}var To=function(){return To=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},To.apply(this,arguments)},He=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(f){try{l(n.next(f))}catch(h){a(h)}}function u(f){try{l(n.throw(f))}catch(h){a(h)}}function l(f){f.done?o(f.value):i(f.value).then(s,u)}l((n=n.apply(t,e||[])).next())})},We=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(f){return u([l,f])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},eh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xT={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},aa=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=To(To({},xT),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(ke.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return He(this,void 0,void 0,function(){return We(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,i=e.getVideoTracks();try{for(var o=eh(i),a=o.next();!a.done;a=o.next()){var s=a.value;if(t.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Qe("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Qe("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new mT(e),n=new q_(r);return new K_(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new Qe("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),i=n.width,o=n.height;return r.style.width=i+"px",r.style.height=o+"px",r.width=i,r.height=o,r},t.tryPlayVideo=function(e){return He(this,void 0,void 0,function(){var r;return We(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return He(this,void 0,void 0,function(){var e,r,n,i,o,a,s,u,l,f,h,d;return We(this,function(p){switch(p.label){case 0:if(!f2())throw new Error("Can't enumerate devices, navigator is not present.");if(!wT())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=eh(e),i=n.next();!i.done;i=n.next())o=i.value,a=o.kind==="video"?"videoinput":o.kind,a==="videoinput"&&(s=o.deviceId||o.id,u=o.label||"Video device ".concat(r.length+1),l=o.groupId,f={deviceId:s,label:u,kind:a,groupId:l},r.push(f))}catch(g){h={error:g}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(h)throw h.error}}return[2,r]}})})},t.findDeviceById=function(e){return He(this,void 0,void 0,function(){var r;return We(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return He(this,void 0,void 0,function(){var n;return We(this,function(i){switch(i.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=i.sent(),n?[2,!0]:[2,new Promise(function(o,a){var s=setTimeout(function(){t.isVideoPlaying(e)||(a(!1),e.removeEventListener("canplay",u))},r),u=function(){t.tryPlayVideo(e).then(function(l){clearTimeout(s),e.removeEventListener("canplay",u),o(l)})};e.addEventListener("canplay",u)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),He(this,void 0,void 0,function(){var i;return We(this,function(o){switch(o.label){case 0:return i=t.prepareVideoElement(r),t.addVideoSource(i,e),[4,t.playVideoOnLoadAsync(i,n)];case 1:return o.sent(),[2,i]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var i=1e4,o=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",a),n())},i),a=function(){clearTimeout(o),e.removeEventListener("load",a),r()};e.addEventListener("load",a)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new Qe("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return He(this,void 0,void 0,function(){var r;return We(this,function(n){switch(n.label){case 0:if(!e)throw new Qe("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return He(this,void 0,void 0,function(){var r;return We(this,function(n){switch(n.label){case 0:if(!e)throw new Qe("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return He(this,void 0,void 0,function(){var i,o;return We(this,function(a){switch(a.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.decodeFromStream(i,r,n)];case 3:return[2,a.sent()];case 4:throw o=a.sent(),t.disposeMediaStream(i),o;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return He(this,void 0,void 0,function(){var i,o,a,s,u,l,f,h,d,p=this;return We(this,function(g){switch(g.label){case 0:return t.checkCallbackFnOrThrow(n),i=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,i)];case 1:return o=g.sent(),a=function(){t.disposeMediaStream(e),t.cleanVideoSource(o)},s=this.scan(o,n,a),u=e.getVideoTracks(),l=To(To({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(w,I){return He(this,void 0,void 0,function(){var _,m,x,P,k,M,A;return We(this,function(E){switch(E.label){case 0:_=I?u.filter(I):u,E.label=1;case 1:E.trys.push([1,6,7,8]),m=eh(_),x=m.next(),E.label=2;case 2:return x.done?[3,5]:(P=x.value,[4,P.applyConstraints(w)]);case 3:E.sent(),E.label=4;case 4:return x=m.next(),[3,2];case 5:return[3,8];case 6:return k=E.sent(),M={error:k},[3,8];case 7:try{x&&!x.done&&(A=m.return)&&A.call(m)}finally{if(M)throw M.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(w){return u.find(w).getConstraints()},streamVideoSettingsGet:function(w){return u.find(w).getSettings()},streamVideoCapabilitiesGet:function(w){return u.find(w).getCapabilities()}}),f=t.mediaStreamIsTorchCompatible(e),f&&(h=u==null?void 0:u.find(function(w){return t.mediaStreamIsTorchCompatibleTrack(w)}),d=function(w){return He(p,void 0,void 0,function(){return We(this,function(I){switch(I.label){case 0:return[4,t.mediaStreamSetTorch(h,w)];case 1:return I.sent(),[2]}})})},l.switchTorch=d,l.stop=function(){return He(p,void 0,void 0,function(){return We(this,function(w){switch(w.label){case 0:return s.stop(),[4,d(!1)];case 1:return w.sent(),[2]}})})}),[2,l]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return He(this,void 0,void 0,function(){var i,o;return We(this,function(a){switch(a.label){case 0:return t.checkCallbackFnOrThrow(n),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return He(this,void 0,void 0,function(){var n,i;return We(this,function(o){switch(o.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Qe("A video element must be provided.");return n=t.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,i)];case 1:return o.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return He(this,void 0,void 0,function(){var n,i,o,a;return We(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Qe("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,i=function(){t.cleanVideoSource(n)},o=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,o)];case 1:return s.sent(),a=this.scan(n,r,i),[2,a]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return He(this,void 0,void 0,function(){var n;return We(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return He(this,void 0,void 0,function(){var n,i,o;return We(this,function(a){switch(a.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return o=a.sent(),[2,o];case 4:return n||t.cleanVideoSource(i),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return He(this,void 0,void 0,function(){var n,i;return We(this,function(o){switch(o.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return He(this,void 0,void 0,function(){var r,n;return We(this,function(i){switch(i.label){case 0:if(!e)throw new Qe("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return i.sent(),[4,this.scanOneResult(r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return He(this,void 0,void 0,function(){var r,n;return We(this,function(i){switch(i.label){case 0:if(!e)throw new Qe("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,n];case 2:return[2,i.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,i){var o=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),i===void 0&&(i=!0),new Promise(function(a,s){o.scan(e,function(u,l,f){if(u){a(u),f.stop();return}if(l){if(l instanceof V&&r||l instanceof rt&&n||l instanceof W&&i)return;f.stop(),s(l)}})})},t.prototype.scan=function(e,r,n){var i=this;t.checkCallbackFnOrThrow(r);var o=t.createCaptureCanvas(e),a;try{a=o.getContext("2d",{willReadFrequently:!0})}catch{a=o.getContext("2d")}if(!a)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){a=void 0,o=void 0},u=!1,l,f=function(){u=!0,clearTimeout(l),s(),n&&n()},h={stop:f},d=function(){if(!u)try{t.drawImageOnCanvas(a,e);var p=i.decodeFromCanvas(o);r(p,void 0,h),l=setTimeout(d,i.options.delayBetweenScanSuccess)}catch(_){r(void 0,_,h);var g=_ instanceof rt,w=_ instanceof W,I=_ instanceof V;if(g||w||I){l=setTimeout(d,i.options.delayBetweenScanAttempts);return}s(),n&&n(_)}};return d(),h},t.prototype._decodeOnLoadImage=function(e){return He(this,void 0,void 0,function(){var r;return We(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return He(this,void 0,void 0,function(){var r;return We(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),ET=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){ET(e,t);function e(r,n){return t.call(this,new Hl,r,n)||this}return e})(aa);var AT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){AT(e,t);function e(r,n){return t.call(this,new Co(r),r,n)||this}return e})(aa);var IT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){IT(e,t);function e(r,n){return t.call(this,new Gl,r,n)||this}return e})(aa);var CT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ST=function(t){CT(e,t);function e(r,n){var i=this,o=new a2;return o.setHints(r),i=t.call(this,o,r,n)||this,i.reader=o,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(ke.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(aa),TT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){TT(e,t);function e(r,n){return t.call(this,new Xl,r,n)||this}return e})(aa);var RT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){RT(e,t);function e(r,n){return t.call(this,new $l,r,n)||this}return e})(aa);const U={app:{fontFamily:"system-ui",padding:16,maxWidth:900,margin:"0 auto"},topbar:{display:"flex",alignItems:"center",gap:12,marginBottom:12},h1:{fontSize:22,margin:0},input:{padding:"10px 12px",borderRadius:10,border:"1px solid #ddd",width:"100%"},row:{display:"flex",gap:10,alignItems:"center"},btn:{padding:"10px 12px",borderRadius:12,border:"1px solid #ddd",background:"#fff",cursor:"pointer",fontWeight:600},btnPrimary:{padding:"10px 12px",borderRadius:12,border:"1px solid #111",background:"#111",color:"#fff",cursor:"pointer",fontWeight:700},card:{border:"1px solid #e5e5e5",borderRadius:14,padding:12,background:"#fff"},list:{display:"grid",gap:10},bookRow:{display:"grid",gridTemplateColumns:"56px 1fr",gap:12,alignItems:"center"},cover:{width:56,height:72,borderRadius:10,border:"1px solid #eee",objectFit:"cover",background:"#fafafa"},meta:{fontSize:12,color:"#666",marginTop:2},label:{fontSize:12,color:"#444",marginBottom:6},select:{padding:"10px 12px",borderRadius:10,border:"1px solid #ddd",width:"100%"},divider:{height:1,background:"#eee",margin:"12px 0"},link:{color:"#111",textDecoration:"underline",cursor:"pointer"},small:{fontSize:12,color:"#666"}};var Eg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},OT=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[r++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[r++],a=t[r++],s=t[r++],u=((i&7)<<18|(o&63)<<12|(a&63)<<6|s&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const o=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},d2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,h=(o&3)<<4|s>>4;let d=(s&15)<<2|l>>6,p=l&63;u||(p=64,a||(d=64)),n.push(r[f],r[h],r[d],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const o=r[t.charAt(i++)],s=i<t.length?r[t.charAt(i)]:0;++i;const l=i<t.length?r[t.charAt(i)]:64;++i;const h=i<t.length?r[t.charAt(i)]:64;if(++i,o==null||s==null||l==null||h==null)throw new PT;const d=o<<2|s>>4;if(n.push(d),l!==64){const p=s<<4&240|l>>2;if(n.push(p),h!==64){const g=l<<6&192|h;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DT=function(t){const e=h2(t);return d2.encodeByteArray(e,!0)},ql=function(t){return DT(t).replace(/\./g,"")},p2=function(t){try{return d2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=()=>NT().__FIREBASE_DEFAULTS__,kT=()=>{if(typeof process>"u"||typeof Eg>"u")return;const t=Eg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&p2(t[1]);return e&&JSON.parse(e)},Dc=()=>{try{return bT()||kT()||MT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},v2=t=>{var e,r;return(r=(e=Dc())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},LT=t=>{const e=v2(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},g2=()=>{var t;return(t=Dc())===null||t===void 0?void 0:t.config},y2=t=>{var e;return(e=Dc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ql(JSON.stringify(r)),ql(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function UT(){var t;const e=(t=Dc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WT(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function GT(){return!UT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $T(){try{return typeof indexedDB=="object"}catch{return!1}}function XT(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="FirebaseError";class Rn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=KT,Object.setPrototypeOf(this,Rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ws.prototype.create)}}class Ws{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?qT(o,n):"Error",s=`${this.serviceName}: ${a} (${i}).`;return new Rn(i,s,n)}}function qT(t,e){return t.replace(YT,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const YT=/\{\$([^}]+)}/g;function QT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yl(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const o=t[i],a=e[i];if(Ag(o)&&Ag(a)){if(!Yl(o,a))return!1}else if(o!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function Ag(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ga(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,o]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function $a(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function ZT(t,e){const r=new JT(t,e);return r.subscribe.bind(r)}class JT{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");e4(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=th),i.error===void 0&&(i.error=th),i.complete===void 0&&(i.complete=th);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e4(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function th(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t){return t&&t._delegate?t._delegate:t}class Gi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new FT;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n4(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(o);n===s&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),o=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:r4(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r4(t){return t===Pi?void 0:t}function n4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new t4(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const o4={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},a4=pe.INFO,s4={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},u4=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=s4[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class j0{constructor(e){this.name=e,this._logLevel=a4,this._logHandler=u4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const l4=(t,e)=>e.some(r=>t instanceof r);let Ig,Cg;function c4(){return Ig||(Ig=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f4(){return Cg||(Cg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m2=new WeakMap,vd=new WeakMap,_2=new WeakMap,rh=new WeakMap,z0=new WeakMap;function h4(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{r(oi(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&m2.set(r,t)}).catch(()=>{}),z0.set(e,t),e}function d4(t){if(vd.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});vd.set(t,e)}let gd={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return vd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_2.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return oi(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function p4(t){gd=t(gd)}function v4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(nh(this),e,...r);return _2.set(n,e.sort?e.sort():[e]),oi(n)}:f4().includes(t)?function(...e){return t.apply(nh(this),e),oi(m2.get(this))}:function(...e){return oi(t.apply(nh(this),e))}}function g4(t){return typeof t=="function"?v4(t):(t instanceof IDBTransaction&&d4(t),l4(t,c4())?new Proxy(t,gd):t)}function oi(t){if(t instanceof IDBRequest)return h4(t);if(rh.has(t))return rh.get(t);const e=g4(t);return e!==t&&(rh.set(t,e),z0.set(e,t)),e}const nh=t=>z0.get(t);function y4(t,e,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=oi(a);return n&&a.addEventListener("upgradeneeded",u=>{n(oi(a.result),u.oldVersion,u.newVersion,oi(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),s.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),s}const m4=["get","getKey","getAll","getAllKeys","count"],_4=["put","add","delete","clear"],ih=new Map;function Sg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ih.get(e))return ih.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=_4.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||m4.includes(r)))return;const o=async function(a,...s){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return n&&(l=l.index(s.shift())),(await Promise.all([l[r](...s),i&&u.done]))[0]};return ih.set(e,o),o}p4(t=>({...t,get:(e,r,n)=>Sg(e,r)||t.get(e,r,n),has:(e,r)=>!!Sg(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(x4(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function x4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yd="@firebase/app",Tg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new j0("@firebase/app"),E4="@firebase/app-compat",A4="@firebase/analytics-compat",I4="@firebase/analytics",C4="@firebase/app-check-compat",S4="@firebase/app-check",T4="@firebase/auth",R4="@firebase/auth-compat",O4="@firebase/database",P4="@firebase/data-connect",D4="@firebase/database-compat",N4="@firebase/functions",b4="@firebase/functions-compat",k4="@firebase/installations",M4="@firebase/installations-compat",L4="@firebase/messaging",F4="@firebase/messaging-compat",B4="@firebase/performance",V4="@firebase/performance-compat",U4="@firebase/remote-config",j4="@firebase/remote-config-compat",z4="@firebase/storage",H4="@firebase/storage-compat",W4="@firebase/firestore",G4="@firebase/vertexai-preview",$4="@firebase/firestore-compat",X4="firebase",K4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="[DEFAULT]",q4={[yd]:"fire-core",[E4]:"fire-core-compat",[I4]:"fire-analytics",[A4]:"fire-analytics-compat",[S4]:"fire-app-check",[C4]:"fire-app-check-compat",[T4]:"fire-auth",[R4]:"fire-auth-compat",[O4]:"fire-rtdb",[P4]:"fire-data-connect",[D4]:"fire-rtdb-compat",[N4]:"fire-fn",[b4]:"fire-fn-compat",[k4]:"fire-iid",[M4]:"fire-iid-compat",[L4]:"fire-fcm",[F4]:"fire-fcm-compat",[B4]:"fire-perf",[V4]:"fire-perf-compat",[U4]:"fire-rc",[j4]:"fire-rc-compat",[z4]:"fire-gcs",[H4]:"fire-gcs-compat",[W4]:"fire-fst",[$4]:"fire-fst-compat",[G4]:"fire-vertex","fire-js":"fire-js",[X4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new Map,Y4=new Map,_d=new Map;function Rg(t,e){try{t.container.addComponent(e)}catch(r){An.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ko(t){const e=t.name;if(_d.has(e))return An.debug(`There were multiple attempts to register component ${e}.`),!1;_d.set(e,t);for(const r of Ql.values())Rg(r,t);for(const r of Y4.values())Rg(r,t);return!0}function H0(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Xr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ai=new Ws("app","Firebase",Q4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=K4;function w2(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:md,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw ai.create("bad-app-name",{appName:String(i)});if(r||(r=g2()),!r)throw ai.create("no-options");const o=Ql.get(i);if(o){if(Yl(r,o.options)&&Yl(n,o.config))return o;throw ai.create("duplicate-app",{appName:i})}const a=new i4(i);for(const u of _d.values())a.addComponent(u);const s=new Z4(r,n,a);return Ql.set(i,s),s}function x2(t=md){const e=Ql.get(t);if(!e&&t===md&&g2())return w2();if(!e)throw ai.create("no-app",{appName:t});return e}function si(t,e,r){var n;let i=(n=q4[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const s=[`Unable to register library "${i}" with version "${e}":`];o&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),An.warn(s.join(" "));return}Ko(new Gi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="firebase-heartbeat-database",e8=1,Rs="firebase-heartbeat-store";let oh=null;function E2(){return oh||(oh=y4(J4,e8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rs)}catch(r){console.warn(r)}}}}).catch(t=>{throw ai.create("idb-open",{originalErrorMessage:t.message})})),oh}async function t8(t){try{const r=(await E2()).transaction(Rs),n=await r.objectStore(Rs).get(A2(t));return await r.done,n}catch(e){if(e instanceof Rn)An.warn(e.message);else{const r=ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});An.warn(r.message)}}}async function Og(t,e){try{const n=(await E2()).transaction(Rs,"readwrite");await n.objectStore(Rs).put(e,A2(t)),await n.done}catch(r){if(r instanceof Rn)An.warn(r.message);else{const n=ai.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});An.warn(n.message)}}}function A2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=1024,n8=30*24*60*60*1e3;class i8{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new a8(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Pg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const s=new Date(a.date).valueOf();return Date.now()-s<=n8}),this._storage.overwrite(this._heartbeatsCache))}catch(n){An.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Pg(),{heartbeatsToSend:n,unsentEntries:i}=o8(this._heartbeatsCache.heartbeats),o=ql(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return An.warn(r),""}}}function Pg(){return new Date().toISOString().substring(0,10)}function o8(t,e=r8){const r=[];let n=t.slice();for(const i of t){const o=r.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),Dg(r)>e){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Dg(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class a8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $T()?XT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await t8(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Og(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Og(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Dg(t){return ql(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t){Ko(new Gi("platform-logger",e=>new w4(e),"PRIVATE")),Ko(new Gi("heartbeat",e=>new i8(e),"PRIVATE")),si(yd,Tg,t),si(yd,Tg,"esm2017"),si("fire-js","")}s8("");var Ng=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vi,I2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function S(){}S.prototype=E.prototype,A.D=E.prototype,A.prototype=new S,A.prototype.constructor=A,A.C=function(R,D,N){for(var O=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)O[fe-2]=arguments[fe];return E.prototype[D].apply(R,O)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,E,S){S||(S=0);var R=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)R[D]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(D=0;16>D;++D)R[D]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=A.g[0],S=A.g[1],D=A.g[2];var N=A.g[3],O=E+(N^S&(D^N))+R[0]+3614090360&4294967295;E=S+(O<<7&4294967295|O>>>25),O=N+(D^E&(S^D))+R[1]+3905402710&4294967295,N=E+(O<<12&4294967295|O>>>20),O=D+(S^N&(E^S))+R[2]+606105819&4294967295,D=N+(O<<17&4294967295|O>>>15),O=S+(E^D&(N^E))+R[3]+3250441966&4294967295,S=D+(O<<22&4294967295|O>>>10),O=E+(N^S&(D^N))+R[4]+4118548399&4294967295,E=S+(O<<7&4294967295|O>>>25),O=N+(D^E&(S^D))+R[5]+1200080426&4294967295,N=E+(O<<12&4294967295|O>>>20),O=D+(S^N&(E^S))+R[6]+2821735955&4294967295,D=N+(O<<17&4294967295|O>>>15),O=S+(E^D&(N^E))+R[7]+4249261313&4294967295,S=D+(O<<22&4294967295|O>>>10),O=E+(N^S&(D^N))+R[8]+1770035416&4294967295,E=S+(O<<7&4294967295|O>>>25),O=N+(D^E&(S^D))+R[9]+2336552879&4294967295,N=E+(O<<12&4294967295|O>>>20),O=D+(S^N&(E^S))+R[10]+4294925233&4294967295,D=N+(O<<17&4294967295|O>>>15),O=S+(E^D&(N^E))+R[11]+2304563134&4294967295,S=D+(O<<22&4294967295|O>>>10),O=E+(N^S&(D^N))+R[12]+1804603682&4294967295,E=S+(O<<7&4294967295|O>>>25),O=N+(D^E&(S^D))+R[13]+4254626195&4294967295,N=E+(O<<12&4294967295|O>>>20),O=D+(S^N&(E^S))+R[14]+2792965006&4294967295,D=N+(O<<17&4294967295|O>>>15),O=S+(E^D&(N^E))+R[15]+1236535329&4294967295,S=D+(O<<22&4294967295|O>>>10),O=E+(D^N&(S^D))+R[1]+4129170786&4294967295,E=S+(O<<5&4294967295|O>>>27),O=N+(S^D&(E^S))+R[6]+3225465664&4294967295,N=E+(O<<9&4294967295|O>>>23),O=D+(E^S&(N^E))+R[11]+643717713&4294967295,D=N+(O<<14&4294967295|O>>>18),O=S+(N^E&(D^N))+R[0]+3921069994&4294967295,S=D+(O<<20&4294967295|O>>>12),O=E+(D^N&(S^D))+R[5]+3593408605&4294967295,E=S+(O<<5&4294967295|O>>>27),O=N+(S^D&(E^S))+R[10]+38016083&4294967295,N=E+(O<<9&4294967295|O>>>23),O=D+(E^S&(N^E))+R[15]+3634488961&4294967295,D=N+(O<<14&4294967295|O>>>18),O=S+(N^E&(D^N))+R[4]+3889429448&4294967295,S=D+(O<<20&4294967295|O>>>12),O=E+(D^N&(S^D))+R[9]+568446438&4294967295,E=S+(O<<5&4294967295|O>>>27),O=N+(S^D&(E^S))+R[14]+3275163606&4294967295,N=E+(O<<9&4294967295|O>>>23),O=D+(E^S&(N^E))+R[3]+4107603335&4294967295,D=N+(O<<14&4294967295|O>>>18),O=S+(N^E&(D^N))+R[8]+1163531501&4294967295,S=D+(O<<20&4294967295|O>>>12),O=E+(D^N&(S^D))+R[13]+2850285829&4294967295,E=S+(O<<5&4294967295|O>>>27),O=N+(S^D&(E^S))+R[2]+4243563512&4294967295,N=E+(O<<9&4294967295|O>>>23),O=D+(E^S&(N^E))+R[7]+1735328473&4294967295,D=N+(O<<14&4294967295|O>>>18),O=S+(N^E&(D^N))+R[12]+2368359562&4294967295,S=D+(O<<20&4294967295|O>>>12),O=E+(S^D^N)+R[5]+4294588738&4294967295,E=S+(O<<4&4294967295|O>>>28),O=N+(E^S^D)+R[8]+2272392833&4294967295,N=E+(O<<11&4294967295|O>>>21),O=D+(N^E^S)+R[11]+1839030562&4294967295,D=N+(O<<16&4294967295|O>>>16),O=S+(D^N^E)+R[14]+4259657740&4294967295,S=D+(O<<23&4294967295|O>>>9),O=E+(S^D^N)+R[1]+2763975236&4294967295,E=S+(O<<4&4294967295|O>>>28),O=N+(E^S^D)+R[4]+1272893353&4294967295,N=E+(O<<11&4294967295|O>>>21),O=D+(N^E^S)+R[7]+4139469664&4294967295,D=N+(O<<16&4294967295|O>>>16),O=S+(D^N^E)+R[10]+3200236656&4294967295,S=D+(O<<23&4294967295|O>>>9),O=E+(S^D^N)+R[13]+681279174&4294967295,E=S+(O<<4&4294967295|O>>>28),O=N+(E^S^D)+R[0]+3936430074&4294967295,N=E+(O<<11&4294967295|O>>>21),O=D+(N^E^S)+R[3]+3572445317&4294967295,D=N+(O<<16&4294967295|O>>>16),O=S+(D^N^E)+R[6]+76029189&4294967295,S=D+(O<<23&4294967295|O>>>9),O=E+(S^D^N)+R[9]+3654602809&4294967295,E=S+(O<<4&4294967295|O>>>28),O=N+(E^S^D)+R[12]+3873151461&4294967295,N=E+(O<<11&4294967295|O>>>21),O=D+(N^E^S)+R[15]+530742520&4294967295,D=N+(O<<16&4294967295|O>>>16),O=S+(D^N^E)+R[2]+3299628645&4294967295,S=D+(O<<23&4294967295|O>>>9),O=E+(D^(S|~N))+R[0]+4096336452&4294967295,E=S+(O<<6&4294967295|O>>>26),O=N+(S^(E|~D))+R[7]+1126891415&4294967295,N=E+(O<<10&4294967295|O>>>22),O=D+(E^(N|~S))+R[14]+2878612391&4294967295,D=N+(O<<15&4294967295|O>>>17),O=S+(N^(D|~E))+R[5]+4237533241&4294967295,S=D+(O<<21&4294967295|O>>>11),O=E+(D^(S|~N))+R[12]+1700485571&4294967295,E=S+(O<<6&4294967295|O>>>26),O=N+(S^(E|~D))+R[3]+2399980690&4294967295,N=E+(O<<10&4294967295|O>>>22),O=D+(E^(N|~S))+R[10]+4293915773&4294967295,D=N+(O<<15&4294967295|O>>>17),O=S+(N^(D|~E))+R[1]+2240044497&4294967295,S=D+(O<<21&4294967295|O>>>11),O=E+(D^(S|~N))+R[8]+1873313359&4294967295,E=S+(O<<6&4294967295|O>>>26),O=N+(S^(E|~D))+R[15]+4264355552&4294967295,N=E+(O<<10&4294967295|O>>>22),O=D+(E^(N|~S))+R[6]+2734768916&4294967295,D=N+(O<<15&4294967295|O>>>17),O=S+(N^(D|~E))+R[13]+1309151649&4294967295,S=D+(O<<21&4294967295|O>>>11),O=E+(D^(S|~N))+R[4]+4149444226&4294967295,E=S+(O<<6&4294967295|O>>>26),O=N+(S^(E|~D))+R[11]+3174756917&4294967295,N=E+(O<<10&4294967295|O>>>22),O=D+(E^(N|~S))+R[2]+718787259&4294967295,D=N+(O<<15&4294967295|O>>>17),O=S+(N^(D|~E))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+N&4294967295}n.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var S=E-this.blockSize,R=this.B,D=this.h,N=0;N<E;){if(D==0)for(;N<=S;)i(this,A,N),N+=this.blockSize;if(typeof A=="string"){for(;N<E;)if(R[D++]=A.charCodeAt(N++),D==this.blockSize){i(this,R),D=0;break}}else for(;N<E;)if(R[D++]=A[N++],D==this.blockSize){i(this,R),D=0;break}}this.h=D,this.o+=E},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var S=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=S&255,S/=256;for(this.u(A),A=Array(16),E=S=0;4>E;++E)for(var R=0;32>R;R+=8)A[S++]=this.g[E]>>>R&255;return A};function o(A,E){var S=s;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=E(A)}function a(A,E){this.h=E;for(var S=[],R=!0,D=A.length-1;0<=D;D--){var N=A[D]|0;R&&N==E||(S[D]=N,R=!1)}this.g=S}var s={};function u(A){return-128<=A&&128>A?o(A,function(E){return new a([E|0],0>E?-1:0)}):new a([A|0],0>A?-1:0)}function l(A){if(isNaN(A)||!isFinite(A))return h;if(0>A)return I(l(-A));for(var E=[],S=1,R=0;A>=S;R++)E[R]=A/S|0,S*=4294967296;return new a(E,0)}function f(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return I(f(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=l(Math.pow(E,8)),R=h,D=0;D<A.length;D+=8){var N=Math.min(8,A.length-D),O=parseInt(A.substring(D,D+N),E);8>N?(N=l(Math.pow(E,N)),R=R.j(N).add(l(O))):(R=R.j(S),R=R.add(l(O)))}return R}var h=u(0),d=u(1),p=u(16777216);t=a.prototype,t.m=function(){if(w(this))return-I(this).m();for(var A=0,E=1,S=0;S<this.g.length;S++){var R=this.i(S);A+=(0<=R?R:4294967296+R)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(g(this))return"0";if(w(this))return"-"+I(this).toString(A);for(var E=l(Math.pow(A,6)),S=this,R="";;){var D=P(S,E).g;S=_(S,D.j(E));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(A);if(S=D,g(S))return N+R;for(;6>N.length;)N="0"+N;R=N+R}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function g(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function w(A){return A.h==-1}t.l=function(A){return A=_(this,A),w(A)?-1:g(A)?0:1};function I(A){for(var E=A.g.length,S=[],R=0;R<E;R++)S[R]=~A.g[R];return new a(S,~A.h).add(d)}t.abs=function(){return w(this)?I(this):this},t.add=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],R=0,D=0;D<=E;D++){var N=R+(this.i(D)&65535)+(A.i(D)&65535),O=(N>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);R=O>>>16,N&=65535,O&=65535,S[D]=O<<16|N}return new a(S,S[S.length-1]&-2147483648?-1:0)};function _(A,E){return A.add(I(E))}t.j=function(A){if(g(this)||g(A))return h;if(w(this))return w(A)?I(this).j(I(A)):I(I(this).j(A));if(w(A))return I(this.j(I(A)));if(0>this.l(p)&&0>A.l(p))return l(this.m()*A.m());for(var E=this.g.length+A.g.length,S=[],R=0;R<2*E;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var D=0;D<A.g.length;D++){var N=this.i(R)>>>16,O=this.i(R)&65535,fe=A.i(D)>>>16,Ue=A.i(D)&65535;S[2*R+2*D]+=O*Ue,m(S,2*R+2*D),S[2*R+2*D+1]+=N*Ue,m(S,2*R+2*D+1),S[2*R+2*D+1]+=O*fe,m(S,2*R+2*D+1),S[2*R+2*D+2]+=N*fe,m(S,2*R+2*D+2)}for(R=0;R<E;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=E;R<2*E;R++)S[R]=0;return new a(S,0)};function m(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function x(A,E){this.g=A,this.h=E}function P(A,E){if(g(E))throw Error("division by zero");if(g(A))return new x(h,h);if(w(A))return E=P(I(A),E),new x(I(E.g),I(E.h));if(w(E))return E=P(A,I(E)),new x(I(E.g),E.h);if(30<A.g.length){if(w(A)||w(E))throw Error("slowDivide_ only works with positive integers.");for(var S=d,R=E;0>=R.l(A);)S=k(S),R=k(R);var D=M(S,1),N=M(R,1);for(R=M(R,2),S=M(S,2);!g(R);){var O=N.add(R);0>=O.l(A)&&(D=D.add(S),N=O),R=M(R,1),S=M(S,1)}return E=_(A,D.j(E)),new x(D,E)}for(D=h;0<=A.l(E);){for(S=Math.max(1,Math.floor(A.m()/E.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),N=l(S),O=N.j(E);w(O)||0<O.l(A);)S-=R,N=l(S),O=N.j(E);g(N)&&(N=d),D=D.add(N),A=_(A,O)}return new x(D,A)}t.A=function(A){return P(this,A).h},t.and=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],R=0;R<E;R++)S[R]=this.i(R)&A.i(R);return new a(S,this.h&A.h)},t.or=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],R=0;R<E;R++)S[R]=this.i(R)|A.i(R);return new a(S,this.h|A.h)},t.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],R=0;R<E;R++)S[R]=this.i(R)^A.i(R);return new a(S,this.h^A.h)};function k(A){for(var E=A.g.length+1,S=[],R=0;R<E;R++)S[R]=A.i(R)<<1|A.i(R-1)>>>31;return new a(S,A.h)}function M(A,E){var S=E>>5;E%=32;for(var R=A.g.length-S,D=[],N=0;N<R;N++)D[N]=0<E?A.i(N+S)>>>E|A.i(N+S+1)<<32-E:A.i(N+S);return new a(D,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,I2=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=l,a.fromString=f,Vi=a}).apply(typeof Ng<"u"?Ng:typeof self<"u"?self:typeof window<"u"?window:{});var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var C2,Xa,S2,cl,wd,T2,R2,O2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,y){return c==Array.prototype||c==Object.prototype||(c[v]=y.value),c};function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var v=0;v<c.length;++v){var y=c[v];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var n=r(this);function i(c,v){if(v)e:{var y=n;c=c.split(".");for(var C=0;C<c.length-1;C++){var L=c[C];if(!(L in y))break e;y=y[L]}c=c[c.length-1],C=y[c],v=v(C),v!=C&&v!=null&&e(y,c,{configurable:!0,writable:!0,value:v})}}function o(c,v){c instanceof String&&(c+="");var y=0,C=!1,L={next:function(){if(!C&&y<c.length){var B=y++;return{value:v(B,c[B]),done:!1}}return C=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(c){return c||function(){return o(this,function(v,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function u(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function l(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function f(c,v,y){return c.call.apply(c.bind,arguments)}function h(c,v,y){if(!c)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,C),c.apply(v,L)}}return function(){return c.apply(v,arguments)}}function d(c,v,y){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:h,d.apply(null,arguments)}function p(c,v){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function g(c,v){function y(){}y.prototype=v.prototype,c.aa=v.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(C,L,B){for(var G=Array(arguments.length-2),De=2;De<arguments.length;De++)G[De-2]=arguments[De];return v.prototype[L].apply(C,G)}}function w(c){const v=c.length;if(0<v){const y=Array(v);for(let C=0;C<v;C++)y[C]=c[C];return y}return[]}function I(c,v){for(let y=1;y<arguments.length;y++){const C=arguments[y];if(u(C)){const L=c.length||0,B=C.length||0;c.length=L+B;for(let G=0;G<B;G++)c[L+G]=C[G]}else c.push(C)}}class _{constructor(v,y){this.i=v,this.j=y,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function m(c){return/^[\s\xa0]*$/.test(c)}function x(){var c=s.navigator;return c&&(c=c.userAgent)?c:""}function P(c){return P[" "](c),c}P[" "]=function(){};var k=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function M(c,v,y){for(const C in c)v.call(y,c[C],C,c)}function A(c,v){for(const y in c)v.call(void 0,c[y],y,c)}function E(c){const v={};for(const y in c)v[y]=c[y];return v}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(c,v){let y,C;for(let L=1;L<arguments.length;L++){C=arguments[L];for(y in C)c[y]=C[y];for(let B=0;B<S.length;B++)y=S[B],Object.prototype.hasOwnProperty.call(C,y)&&(c[y]=C[y])}}function D(c){var v=1;c=c.split(":");const y=[];for(;0<v&&c.length;)y.push(c.shift()),v--;return c.length&&y.push(c.join(":")),y}function N(c){s.setTimeout(()=>{throw c},0)}function O(){var c=re;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class fe{constructor(){this.h=this.g=null}add(v,y){const C=Ue.get();C.set(v,y),this.h?this.h.next=C:this.g=C,this.h=C}}var Ue=new _(()=>new mr,c=>c.reset());class mr{constructor(){this.next=this.g=this.h=null}set(v,y){this.h=v,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Wt,$=!1,re=new fe,oe=()=>{const c=s.Promise.resolve(void 0);Wt=()=>{c.then(X)}};var X=()=>{for(var c;c=O();){try{c.h.call(c.g)}catch(y){N(y)}var v=Ue;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}$=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Oe(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var er=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};s.addEventListener("test",y,v),s.removeEventListener("test",y,v)}catch{}return c}();function _r(c,v){if(Oe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(k){e:{try{P(v.nodeName);var L=!0;break e}catch{}L=!1}L||(v=null)}}else y=="mouseover"?v=c.fromElement:y=="mouseout"&&(v=c.toElement);this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:on[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&_r.aa.h.call(this)}}g(_r,Oe);var on={2:"touch",3:"pen",4:"mouse"};_r.prototype.h=function(){_r.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var an="closure_listenable_"+(1e6*Math.random()|0),Dx=0;function Nx(c,v,y,C,L){this.listener=c,this.proxy=null,this.src=v,this.type=y,this.capture=!!C,this.ha=L,this.key=++Dx,this.da=this.fa=!1}function iu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ou(c){this.src=c,this.g={},this.h=0}ou.prototype.add=function(c,v,y,C,L){var B=c.toString();c=this.g[B],c||(c=this.g[B]=[],this.h++);var G=Yc(c,v,C,L);return-1<G?(v=c[G],y||(v.fa=!1)):(v=new Nx(v,this.src,B,!!C,L),v.fa=y,c.push(v)),v};function qc(c,v){var y=v.type;if(y in c.g){var C=c.g[y],L=Array.prototype.indexOf.call(C,v,void 0),B;(B=0<=L)&&Array.prototype.splice.call(C,L,1),B&&(iu(v),c.g[y].length==0&&(delete c.g[y],c.h--))}}function Yc(c,v,y,C){for(var L=0;L<c.length;++L){var B=c[L];if(!B.da&&B.listener==v&&B.capture==!!y&&B.ha==C)return L}return-1}var Qc="closure_lm_"+(1e6*Math.random()|0),Zc={};function b1(c,v,y,C,L){if(Array.isArray(v)){for(var B=0;B<v.length;B++)b1(c,v[B],y,C,L);return null}return y=L1(y),c&&c[an]?c.K(v,y,l(C)?!!C.capture:!1,L):bx(c,v,y,!1,C,L)}function bx(c,v,y,C,L,B){if(!v)throw Error("Invalid event type");var G=l(L)?!!L.capture:!!L,De=ef(c);if(De||(c[Qc]=De=new ou(c)),y=De.add(v,y,C,G,B),y.proxy)return y;if(C=kx(),y.proxy=C,C.src=c,C.listener=y,c.addEventListener)er||(L=G),L===void 0&&(L=!1),c.addEventListener(v.toString(),C,L);else if(c.attachEvent)c.attachEvent(M1(v.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function kx(){function c(y){return v.call(c.src,c.listener,y)}const v=Mx;return c}function k1(c,v,y,C,L){if(Array.isArray(v))for(var B=0;B<v.length;B++)k1(c,v[B],y,C,L);else C=l(C)?!!C.capture:!!C,y=L1(y),c&&c[an]?(c=c.i,v=String(v).toString(),v in c.g&&(B=c.g[v],y=Yc(B,y,C,L),-1<y&&(iu(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete c.g[v],c.h--)))):c&&(c=ef(c))&&(v=c.g[v.toString()],c=-1,v&&(c=Yc(v,y,C,L)),(y=-1<c?v[c]:null)&&Jc(y))}function Jc(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[an])qc(v.i,c);else{var y=c.type,C=c.proxy;v.removeEventListener?v.removeEventListener(y,C,c.capture):v.detachEvent?v.detachEvent(M1(y),C):v.addListener&&v.removeListener&&v.removeListener(C),(y=ef(v))?(qc(y,c),y.h==0&&(y.src=null,v[Qc]=null)):iu(c)}}}function M1(c){return c in Zc?Zc[c]:Zc[c]="on"+c}function Mx(c,v){if(c.da)c=!0;else{v=new _r(v,this);var y=c.listener,C=c.ha||c.src;c.fa&&Jc(c),c=y.call(C,v)}return c}function ef(c){return c=c[Qc],c instanceof ou?c:null}var tf="__closure_events_fn_"+(1e9*Math.random()>>>0);function L1(c){return typeof c=="function"?c:(c[tf]||(c[tf]=function(v){return c.handleEvent(v)}),c[tf])}function Pt(){he.call(this),this.i=new ou(this),this.M=this,this.F=null}g(Pt,he),Pt.prototype[an]=!0,Pt.prototype.removeEventListener=function(c,v,y,C){k1(this,c,v,y,C)};function Gt(c,v){var y,C=c.F;if(C)for(y=[];C;C=C.F)y.push(C);if(c=c.M,C=v.type||v,typeof v=="string")v=new Oe(v,c);else if(v instanceof Oe)v.target=v.target||c;else{var L=v;v=new Oe(C,c),R(v,L)}if(L=!0,y)for(var B=y.length-1;0<=B;B--){var G=v.g=y[B];L=au(G,C,!0,v)&&L}if(G=v.g=c,L=au(G,C,!0,v)&&L,L=au(G,C,!1,v)&&L,y)for(B=0;B<y.length;B++)G=v.g=y[B],L=au(G,C,!1,v)&&L}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var y=c.g[v],C=0;C<y.length;C++)iu(y[C]);delete c.g[v],c.h--}}this.F=null},Pt.prototype.K=function(c,v,y,C){return this.i.add(String(c),v,!1,y,C)},Pt.prototype.L=function(c,v,y,C){return this.i.add(String(c),v,!0,y,C)};function au(c,v,y,C){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var L=!0,B=0;B<v.length;++B){var G=v[B];if(G&&!G.da&&G.capture==y){var De=G.listener,_t=G.ha||G.src;G.fa&&qc(c.i,G),L=De.call(_t,C)!==!1&&L}}return L&&!C.defaultPrevented}function F1(c,v,y){if(typeof c=="function")y&&(c=d(c,y));else if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:s.setTimeout(c,v||0)}function B1(c){c.g=F1(()=>{c.g=null,c.i&&(c.i=!1,B1(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class Lx extends he{constructor(v,y){super(),this.m=v,this.l=y,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:B1(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function da(c){he.call(this),this.h=c,this.g={}}g(da,he);var V1=[];function U1(c){M(c.g,function(v,y){this.g.hasOwnProperty(y)&&Jc(v)},c),c.g={}}da.prototype.N=function(){da.aa.N.call(this),U1(this)},da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rf=s.JSON.stringify,Fx=s.JSON.parse,Bx=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function nf(){}nf.prototype.h=null;function j1(c){return c.h||(c.h=c.i())}function z1(){}var pa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function of(){Oe.call(this,"d")}g(of,Oe);function af(){Oe.call(this,"c")}g(af,Oe);var wi={},H1=null;function su(){return H1=H1||new Pt}wi.La="serverreachability";function W1(c){Oe.call(this,wi.La,c)}g(W1,Oe);function va(c){const v=su();Gt(v,new W1(v))}wi.STAT_EVENT="statevent";function G1(c,v){Oe.call(this,wi.STAT_EVENT,c),this.stat=v}g(G1,Oe);function $t(c){const v=su();Gt(v,new G1(v,c))}wi.Ma="timingevent";function $1(c,v){Oe.call(this,wi.Ma,c),this.size=v}g($1,Oe);function ga(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},v)}function ya(){this.g=!0}ya.prototype.xa=function(){this.g=!1};function Vx(c,v,y,C,L,B){c.info(function(){if(c.g)if(B)for(var G="",De=B.split("&"),_t=0;_t<De.length;_t++){var _e=De[_t].split("=");if(1<_e.length){var Dt=_e[0];_e=_e[1];var Nt=Dt.split("_");G=2<=Nt.length&&Nt[1]=="type"?G+(Dt+"="+_e+"&"):G+(Dt+"=redacted&")}}else G=null;else G=B;return"XMLHTTP REQ ("+C+") [attempt "+L+"]: "+v+`
`+y+`
`+G})}function Ux(c,v,y,C,L,B,G){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+L+"]: "+v+`
`+y+`
`+B+" "+G})}function ro(c,v,y,C){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+zx(c,y)+(C?" "+C:"")})}function jx(c,v){c.info(function(){return"TIMEOUT: "+v})}ya.prototype.info=function(){};function zx(c,v){if(!c.g)return v;if(!v)return null;try{var y=JSON.parse(v);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var C=y[c];if(!(2>C.length)){var L=C[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return rf(y)}catch{return v}}var uu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},X1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sf;function lu(){}g(lu,nf),lu.prototype.g=function(){return new XMLHttpRequest},lu.prototype.i=function(){return{}},sf=new lu;function On(c,v,y,C){this.j=c,this.i=v,this.l=y,this.R=C||1,this.U=new da(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new K1}function K1(){this.i=null,this.g="",this.h=!1}var q1={},uf={};function lf(c,v,y){c.L=1,c.v=du(sn(v)),c.m=y,c.P=!0,Y1(c,null)}function Y1(c,v){c.F=Date.now(),cu(c),c.A=sn(c.v);var y=c.A,C=c.R;Array.isArray(C)||(C=[String(C)]),cp(y.i,"t",C),c.C=0,y=c.j.J,c.h=new K1,c.g=Rp(c.j,y?v:null,!c.m),0<c.O&&(c.M=new Lx(d(c.Y,c,c.g),c.O)),v=c.U,y=c.g,C=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(V1[0]=L.toString()),L=V1);for(var B=0;B<L.length;B++){var G=b1(y,L[B],C||v.handleEvent,!1,v.h||v);if(!G)break;v.g[G.key]=G}v=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),va(),Vx(c.i,c.u,c.A,c.l,c.R,c.m)}On.prototype.ca=function(c){c=c.target;const v=this.M;v&&un(c)==3?v.j():this.Y(c)},On.prototype.Y=function(c){try{if(c==this.g)e:{const Nt=un(this.g);var v=this.g.Ba();const oo=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||yp(this.g)))){this.J||Nt!=4||v==7||(v==8||0>=oo?va(3):va(2)),cf(this);var y=this.g.Z();this.X=y;t:if(Q1(this)){var C=yp(this.g);c="";var L=C.length,B=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xi(this),ma(this);var G="";break t}this.h.i=new s.TextDecoder}for(v=0;v<L;v++)this.h.h=!0,c+=this.h.i.decode(C[v],{stream:!(B&&v==L-1)});C.length=0,this.h.g+=c,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=y==200,Ux(this.i,this.u,this.A,this.l,this.R,Nt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var De,_t=this.g;if((De=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(De)){var _e=De;break t}}_e=null}if(y=_e)ro(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ff(this,y);else{this.o=!1,this.s=3,$t(12),xi(this),ma(this);break e}}if(this.P){y=!0;let Pr;for(;!this.J&&this.C<G.length;)if(Pr=Hx(this,G),Pr==uf){Nt==4&&(this.s=4,$t(14),y=!1),ro(this.i,this.l,null,"[Incomplete Response]");break}else if(Pr==q1){this.s=4,$t(15),ro(this.i,this.l,G,"[Invalid Chunk]"),y=!1;break}else ro(this.i,this.l,Pr,null),ff(this,Pr);if(Q1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||G.length!=0||this.h.h||(this.s=1,$t(16),y=!1),this.o=this.o&&y,!y)ro(this.i,this.l,G,"[Invalid Chunked Response]"),xi(this),ma(this);else if(0<G.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),yf(Dt),Dt.M=!0,$t(11))}}else ro(this.i,this.l,G,null),ff(this,G);Nt==4&&xi(this),this.o&&!this.J&&(Nt==4?Ip(this.j,this):(this.o=!1,cu(this)))}else aE(this.g),y==400&&0<G.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),xi(this),ma(this)}}}catch{}finally{}};function Q1(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Hx(c,v){var y=c.C,C=v.indexOf(`
`,y);return C==-1?uf:(y=Number(v.substring(y,C)),isNaN(y)?q1:(C+=1,C+y>v.length?uf:(v=v.slice(C,C+y),c.C=C+y,v)))}On.prototype.cancel=function(){this.J=!0,xi(this)};function cu(c){c.S=Date.now()+c.I,Z1(c,c.I)}function Z1(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ga(d(c.ba,c),v)}function cf(c){c.B&&(s.clearTimeout(c.B),c.B=null)}On.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(jx(this.i,this.A),this.L!=2&&(va(),$t(17)),xi(this),this.s=2,ma(this)):Z1(this,this.S-c)};function ma(c){c.j.G==0||c.J||Ip(c.j,c)}function xi(c){cf(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,U1(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function ff(c,v){try{var y=c.j;if(y.G!=0&&(y.g==c||hf(y.h,c))){if(!c.K&&hf(y.h,c)&&y.G==3){try{var C=y.Da.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var L=C;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)_u(y),yu(y);else break e;gf(y),$t(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=ga(d(y.Za,y),6e3));if(1>=tp(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ai(y,11)}else if((c.K||y.g==c)&&_u(y),!m(v))for(L=y.Da.g.parse(v),v=0;v<L.length;v++){let _e=L[v];if(y.T=_e[0],_e=_e[1],y.G==2)if(_e[0]=="c"){y.K=_e[1],y.ia=_e[2];const Dt=_e[3];Dt!=null&&(y.la=Dt,y.j.info("VER="+y.la));const Nt=_e[4];Nt!=null&&(y.Aa=Nt,y.j.info("SVER="+y.Aa));const oo=_e[5];oo!=null&&typeof oo=="number"&&0<oo&&(C=1.5*oo,y.L=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;const Pr=c.g;if(Pr){const xu=Pr.g?Pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xu){var B=C.h;B.g||xu.indexOf("spdy")==-1&&xu.indexOf("quic")==-1&&xu.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(df(B,B.h),B.h=null))}if(C.D){const mf=Pr.g?Pr.g.getResponseHeader("X-HTTP-Session-Id"):null;mf&&(C.ya=mf,Me(C.I,C.D,mf))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),C=y;var G=c;if(C.qa=Tp(C,C.J?C.ia:null,C.W),G.K){rp(C.h,G);var De=G,_t=C.L;_t&&(De.I=_t),De.B&&(cf(De),cu(De)),C.g=G}else Ep(C);0<y.i.length&&mu(y)}else _e[0]!="stop"&&_e[0]!="close"||Ai(y,7);else y.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Ai(y,7):vf(y):_e[0]!="noop"&&y.l&&y.l.ta(_e),y.v=0)}}va(4)}catch{}}var Wx=class{constructor(c,v){this.g=c,this.map=v}};function J1(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ep(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function tp(c){return c.h?1:c.g?c.g.size:0}function hf(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function df(c,v){c.g?c.g.add(v):c.h=v}function rp(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}J1.prototype.cancel=function(){if(this.i=np(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function np(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const y of c.g.values())v=v.concat(y.D);return v}return w(c.i)}function Gx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var v=[],y=c.length,C=0;C<y;C++)v.push(c[C]);return v}v=[],y=0;for(C in c)v[y++]=c[C];return v}function $x(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var v=[];c=c.length;for(var y=0;y<c;y++)v.push(y);return v}v=[],y=0;for(const C in c)v[y++]=C;return v}}}function ip(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var y=$x(c),C=Gx(c),L=C.length,B=0;B<L;B++)v.call(void 0,C[B],y&&y[B],c)}var op=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xx(c,v){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var C=c[y].indexOf("="),L=null;if(0<=C){var B=c[y].substring(0,C);L=c[y].substring(C+1)}else B=c[y];v(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ei(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ei){this.h=c.h,fu(this,c.j),this.o=c.o,this.g=c.g,hu(this,c.s),this.l=c.l;var v=c.i,y=new xa;y.i=v.i,v.g&&(y.g=new Map(v.g),y.h=v.h),ap(this,y),this.m=c.m}else c&&(v=String(c).match(op))?(this.h=!1,fu(this,v[1]||"",!0),this.o=_a(v[2]||""),this.g=_a(v[3]||"",!0),hu(this,v[4]),this.l=_a(v[5]||"",!0),ap(this,v[6]||"",!0),this.m=_a(v[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}Ei.prototype.toString=function(){var c=[],v=this.j;v&&c.push(wa(v,sp,!0),":");var y=this.g;return(y||v=="file")&&(c.push("//"),(v=this.o)&&c.push(wa(v,sp,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(wa(y,y.charAt(0)=="/"?Yx:qx,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",wa(y,Zx)),c.join("")};function sn(c){return new Ei(c)}function fu(c,v,y){c.j=y?_a(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function hu(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function ap(c,v,y){v instanceof xa?(c.i=v,Jx(c.i,c.h)):(y||(v=wa(v,Qx)),c.i=new xa(v,c.h))}function Me(c,v,y){c.i.set(v,y)}function du(c){return Me(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function _a(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function wa(c,v,y){return typeof c=="string"?(c=encodeURI(c).replace(v,Kx),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Kx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var sp=/[#\/\?@]/g,qx=/[#\?:]/g,Yx=/[#\?]/g,Qx=/[#\?@]/g,Zx=/#/g;function xa(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Pn(c){c.g||(c.g=new Map,c.h=0,c.i&&Xx(c.i,function(v,y){c.add(decodeURIComponent(v.replace(/\+/g," ")),y)}))}t=xa.prototype,t.add=function(c,v){Pn(this),this.i=null,c=no(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(v),this.h+=1,this};function up(c,v){Pn(c),v=no(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function lp(c,v){return Pn(c),v=no(c,v),c.g.has(v)}t.forEach=function(c,v){Pn(this),this.g.forEach(function(y,C){y.forEach(function(L){c.call(v,L,C,this)},this)},this)},t.na=function(){Pn(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),y=[];for(let C=0;C<v.length;C++){const L=c[C];for(let B=0;B<L.length;B++)y.push(v[C])}return y},t.V=function(c){Pn(this);let v=[];if(typeof c=="string")lp(this,c)&&(v=v.concat(this.g.get(no(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)v=v.concat(c[y])}return v},t.set=function(c,v){return Pn(this),this.i=null,c=no(this,c),lp(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},t.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function cp(c,v,y){up(c,v),0<y.length&&(c.i=null,c.g.set(no(c,v),w(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var y=0;y<v.length;y++){var C=v[y];const B=encodeURIComponent(String(C)),G=this.V(C);for(C=0;C<G.length;C++){var L=B;G[C]!==""&&(L+="="+encodeURIComponent(String(G[C]))),c.push(L)}}return this.i=c.join("&")};function no(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function Jx(c,v){v&&!c.j&&(Pn(c),c.i=null,c.g.forEach(function(y,C){var L=C.toLowerCase();C!=L&&(up(this,C),cp(this,L,y))},c)),c.j=v}function eE(c,v){const y=new ya;if(s.Image){const C=new Image;C.onload=p(Dn,y,"TestLoadImage: loaded",!0,v,C),C.onerror=p(Dn,y,"TestLoadImage: error",!1,v,C),C.onabort=p(Dn,y,"TestLoadImage: abort",!1,v,C),C.ontimeout=p(Dn,y,"TestLoadImage: timeout",!1,v,C),s.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else v(!1)}function tE(c,v){const y=new ya,C=new AbortController,L=setTimeout(()=>{C.abort(),Dn(y,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:C.signal}).then(B=>{clearTimeout(L),B.ok?Dn(y,"TestPingServer: ok",!0,v):Dn(y,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(L),Dn(y,"TestPingServer: error",!1,v)})}function Dn(c,v,y,C,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),C(y)}catch{}}function rE(){this.g=new Bx}function nE(c,v,y){const C=y||"";try{ip(c,function(L,B){let G=L;l(L)&&(G=rf(L)),v.push(C+B+"="+encodeURIComponent(G))})}catch(L){throw v.push(C+"type="+encodeURIComponent("_badmap")),L}}function pu(c){this.l=c.Ub||null,this.j=c.eb||!1}g(pu,nf),pu.prototype.g=function(){return new vu(this.l,this.j)},pu.prototype.i=function(c){return function(){return c}}({});function vu(c,v){Pt.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(vu,Pt),t=vu.prototype,t.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,Aa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||s).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Aa(this)),this.g&&(this.readyState=3,Aa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fp(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function fp(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Ea(this):Aa(this),this.readyState==3&&fp(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ea(this))},t.Qa=function(c){this.g&&(this.response=c,Ea(this))},t.ga=function(){this.g&&Ea(this)};function Ea(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Aa(c)}t.setRequestHeader=function(c,v){this.u.append(c,v)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var y=v.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=v.next();return c.join(`\r
`)};function Aa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(vu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function hp(c){let v="";return M(c,function(y,C){v+=C,v+=":",v+=y,v+=`\r
`}),v}function pf(c,v,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=hp(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Me(c,v,y))}function qe(c){Pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(qe,Pt);var iE=/^https?$/i,oE=["POST","PUT"];t=qe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,v,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sf.g(),this.v=this.o?j1(this.o):j1(sf),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(B){dp(this,B);return}if(c=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var L in C)y.set(L,C[L]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const B of C.keys())y.set(B,C.get(B));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),L=s.FormData&&c instanceof s.FormData,!(0<=Array.prototype.indexOf.call(oE,v,void 0))||C||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,G]of y)this.g.setRequestHeader(B,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gp(this),this.u=!0,this.g.send(c),this.u=!1}catch(B){dp(this,B)}};function dp(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,pp(c),gu(c)}function pp(c){c.A||(c.A=!0,Gt(c,"complete"),Gt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Gt(this,"complete"),Gt(this,"abort"),gu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gu(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vp(this):this.bb())},t.bb=function(){vp(this)};function vp(c){if(c.h&&typeof a<"u"&&(!c.v[1]||un(c)!=4||c.Z()!=2)){if(c.u&&un(c)==4)F1(c.Ea,0,c);else if(Gt(c,"readystatechange"),un(c)==4){c.h=!1;try{const G=c.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var y;if(!(y=v)){var C;if(C=G===0){var L=String(c.D).match(op)[1]||null;!L&&s.self&&s.self.location&&(L=s.self.location.protocol.slice(0,-1)),C=!iE.test(L?L.toLowerCase():"")}y=C}if(y)Gt(c,"complete"),Gt(c,"success");else{c.m=6;try{var B=2<un(c)?c.g.statusText:""}catch{B=""}c.l=B+" ["+c.Z()+"]",pp(c)}}finally{gu(c)}}}}function gu(c,v){if(c.g){gp(c);const y=c.g,C=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||Gt(c,"ready");try{y.onreadystatechange=C}catch{}}}function gp(c){c.I&&(s.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function un(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),Fx(v)}};function yp(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function aE(c){const v={};c=(c.g&&2<=un(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(m(c[C]))continue;var y=D(c[C]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const B=v[L]||[];v[L]=B,B.push(y)}A(v,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ia(c,v,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||v}function mp(c){this.Aa=0,this.i=[],this.j=new ya,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ia("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ia("baseRetryDelayMs",5e3,c),this.cb=Ia("retryDelaySeedMs",1e4,c),this.Wa=Ia("forwardChannelMaxRetries",2,c),this.wa=Ia("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new J1(c&&c.concurrentRequestLimit),this.Da=new rE,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=mp.prototype,t.la=8,t.G=1,t.connect=function(c,v,y,C){$t(0),this.W=c,this.H=v||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.I=Tp(this,null,this.W),mu(this)};function vf(c){if(_p(c),c.G==3){var v=c.U++,y=sn(c.I);if(Me(y,"SID",c.K),Me(y,"RID",v),Me(y,"TYPE","terminate"),Ca(c,y),v=new On(c,c.j,v),v.L=2,v.v=du(sn(y)),y=!1,s.navigator&&s.navigator.sendBeacon)try{y=s.navigator.sendBeacon(v.v.toString(),"")}catch{}!y&&s.Image&&(new Image().src=v.v,y=!0),y||(v.g=Rp(v.j,null),v.g.ea(v.v)),v.F=Date.now(),cu(v)}Sp(c)}function yu(c){c.g&&(yf(c),c.g.cancel(),c.g=null)}function _p(c){yu(c),c.u&&(s.clearTimeout(c.u),c.u=null),_u(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&s.clearTimeout(c.s),c.s=null)}function mu(c){if(!ep(c.h)&&!c.s){c.s=!0;var v=c.Ga;Wt||oe(),$||(Wt(),$=!0),re.add(v,c),c.B=0}}function sE(c,v){return tp(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ga(d(c.Ga,c,v),Cp(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new On(this,this.j,c);let B=this.o;if(this.S&&(B?(B=E(B),R(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var v=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,4096<v){v=y;break e}if(v===4096||y===this.i.length-1){v=y+1;break e}}v=1e3}else v=1e3;v=xp(this,L,v),y=sn(this.I),Me(y,"RID",c),Me(y,"CVER",22),this.D&&Me(y,"X-HTTP-Session-Id",this.D),Ca(this,y),B&&(this.O?v="headers="+encodeURIComponent(String(hp(B)))+"&"+v:this.m&&pf(y,this.m,B)),df(this.h,L),this.Ua&&Me(y,"TYPE","init"),this.P?(Me(y,"$req",v),Me(y,"SID","null"),L.T=!0,lf(L,y,null)):lf(L,y,v),this.G=2}}else this.G==3&&(c?wp(this,c):this.i.length==0||ep(this.h)||wp(this))};function wp(c,v){var y;v?y=v.l:y=c.U++;const C=sn(c.I);Me(C,"SID",c.K),Me(C,"RID",y),Me(C,"AID",c.T),Ca(c,C),c.m&&c.o&&pf(C,c.m,c.o),y=new On(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),v&&(c.i=v.D.concat(c.i)),v=xp(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),df(c.h,y),lf(y,C,v)}function Ca(c,v){c.H&&M(c.H,function(y,C){Me(v,C,y)}),c.l&&ip({},function(y,C){Me(v,C,y)})}function xp(c,v,y){y=Math.min(c.i.length,y);var C=c.l?d(c.l.Na,c.l,c):null;e:{var L=c.i;let B=-1;for(;;){const G=["count="+y];B==-1?0<y?(B=L[0].g,G.push("ofs="+B)):B=0:G.push("ofs="+B);let De=!0;for(let _t=0;_t<y;_t++){let _e=L[_t].g;const Dt=L[_t].map;if(_e-=B,0>_e)B=Math.max(0,L[_t].g-100),De=!1;else try{nE(Dt,G,"req"+_e+"_")}catch{C&&C(Dt)}}if(De){C=G.join("&");break e}}}return c=c.i.splice(0,y),v.D=c,C}function Ep(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;Wt||oe(),$||(Wt(),$=!0),re.add(v,c),c.v=0}}function gf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ga(d(c.Fa,c),Cp(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Ap(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ga(d(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),yu(this),Ap(this))};function yf(c){c.A!=null&&(s.clearTimeout(c.A),c.A=null)}function Ap(c){c.g=new On(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=sn(c.qa);Me(v,"RID","rpc"),Me(v,"SID",c.K),Me(v,"AID",c.T),Me(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&Me(v,"TO",c.ja),Me(v,"TYPE","xmlhttp"),Ca(c,v),c.m&&c.o&&pf(v,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=du(sn(v)),y.m=null,y.P=!0,Y1(y,c)}t.Za=function(){this.C!=null&&(this.C=null,yu(this),gf(this),$t(19))};function _u(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function Ip(c,v){var y=null;if(c.g==v){_u(c),yf(c),c.g=null;var C=2}else if(hf(c.h,v))y=v.D,rp(c.h,v),C=1;else return;if(c.G!=0){if(v.o)if(C==1){y=v.m?v.m.length:0,v=Date.now()-v.F;var L=c.B;C=su(),Gt(C,new $1(C,y)),mu(c)}else Ep(c);else if(L=v.s,L==3||L==0&&0<v.X||!(C==1&&sE(c,v)||C==2&&gf(c)))switch(y&&0<y.length&&(v=c.h,v.i=v.i.concat(y)),L){case 1:Ai(c,5);break;case 4:Ai(c,10);break;case 3:Ai(c,6);break;default:Ai(c,2)}}}function Cp(c,v){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*v}function Ai(c,v){if(c.j.info("Error code "+v),v==2){var y=d(c.fb,c),C=c.Xa;const L=!C;C=new Ei(C||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||fu(C,"https"),du(C),L?eE(C.toString(),y):tE(C.toString(),y)}else $t(2);c.G=0,c.l&&c.l.sa(v),Sp(c),_p(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Sp(c){if(c.G=0,c.ka=[],c.l){const v=np(c.h);(v.length!=0||c.i.length!=0)&&(I(c.ka,v),I(c.ka,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.ra()}}function Tp(c,v,y){var C=y instanceof Ei?sn(y):new Ei(y);if(C.g!="")v&&(C.g=v+"."+C.g),hu(C,C.s);else{var L=s.location;C=L.protocol,v=v?v+"."+L.hostname:L.hostname,L=+L.port;var B=new Ei(null);C&&fu(B,C),v&&(B.g=v),L&&hu(B,L),y&&(B.l=y),C=B}return y=c.D,v=c.ya,y&&v&&Me(C,y,v),Me(C,"VER",c.la),Ca(c,C),C}function Rp(c,v,y){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new qe(new pu({eb:y})):new qe(c.pa),v.Ha(c.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Op(){}t=Op.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wu(){}wu.prototype.g=function(c,v){return new cr(c,v)};function cr(c,v){Pt.call(this),this.g=new mp(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!m(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!m(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new io(this)}g(cr,Pt),cr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cr.prototype.close=function(){vf(this.g)},cr.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=rf(c),c=y);v.i.push(new Wx(v.Ya++,c)),v.G==3&&mu(v)},cr.prototype.N=function(){this.g.l=null,delete this.j,vf(this.g),delete this.g,cr.aa.N.call(this)};function Pp(c){of.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const y in v){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}g(Pp,of);function Dp(){af.call(this),this.status=1}g(Dp,af);function io(c){this.g=c}g(io,Op),io.prototype.ua=function(){Gt(this.g,"a")},io.prototype.ta=function(c){Gt(this.g,new Pp(c))},io.prototype.sa=function(c){Gt(this.g,new Dp)},io.prototype.ra=function(){Gt(this.g,"b")},wu.prototype.createWebChannel=wu.prototype.g,cr.prototype.send=cr.prototype.o,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,O2=function(){return new wu},R2=function(){return su()},T2=wi,wd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uu.NO_ERROR=0,uu.TIMEOUT=8,uu.HTTP_ERROR=6,cl=uu,X1.COMPLETE="complete",S2=X1,z1.EventType=pa,pa.OPEN="a",pa.CLOSE="b",pa.ERROR="c",pa.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,Xa=z1,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,C2=qe}).apply(typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{});const bg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new j0("@firebase/firestore");function Fa(){return $i.logLevel}function q(t,...e){if($i.logLevel<=pe.DEBUG){const r=e.map(W0);$i.debug(`Firestore (${ua}): ${t}`,...r)}}function In(t,...e){if($i.logLevel<=pe.ERROR){const r=e.map(W0);$i.error(`Firestore (${ua}): ${t}`,...r)}}function qo(t,...e){if($i.logLevel<=pe.WARN){const r=e.map(W0);$i.warn(`Firestore (${ua}): ${t}`,...r)}}function W0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: `+t;throw In(e),new Error(e)}function Re(t,e){t||ne()}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Rn{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class u8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ft.UNAUTHENTICATED))}shutdown(){}}class l8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class c8{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Re(this.o===void 0);let n=this.i;const i=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let o=new yn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new yn,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},s=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>s(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?s(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new yn)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Re(typeof n.accessToken=="string"),new P2(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new Ft(e)}}class f8{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class h8{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new f8(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d8{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Re(this.o===void 0);const n=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Re(typeof r.token=="string"),this.R=r.token,new d8(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=v8(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<r&&(n+=e.charAt(i[o]%e.length))}return n}}function xe(t,e){return t<e?-1:t>e?1:0}function Yo(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new ht(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new ht(0,0))}static max(){return new ae(new ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,r,n){r===void 0?r=0:r>e.length&&ne(),n===void 0?n=e.length-r:n>e.length-r&&ne(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Os.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Os?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const o=e.get(i),a=r.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ze extends Os{construct(e,r,n){return new ze(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Q(j.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new ze(r)}static emptyPath(){return new ze([])}}const g8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Os{construct(e,r,n){return new It(e,r,n)}static isValidIdentifier(e){return g8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const o=()=>{if(n.length===0)throw new Q(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new Q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else s==="`"?(a=!a,i++):s!=="."||a?(n+=s,i++):(o(),i++)}if(o(),a)throw new Q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(r)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(ze.fromString(e))}static fromName(e){return new ee(ze.fromString(e).popFirst(5))}static empty(){return new ee(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ze.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new ze(e.slice()))}}function y8(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(n===1e9?new ht(r+1,0):new ht(r,n));return new fi(i,ee.empty(),e)}function m8(t){return new fi(t.readTime,t.key,-1)}class fi{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new fi(ae.min(),ee.empty(),-1)}static max(){return new fi(ae.max(),ee.empty(),-1)}}function _8(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ee.comparator(t.documentKey,e.documentKey),r!==0?r:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==w8)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new z((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof z?r:z.resolve(r)}catch(r){return z.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):z.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):z.reject(r)}static resolve(e){return new z((r,n)=>{r(e)})}static reject(e){return new z((r,n)=>{n(e)})}static waitFor(e){return new z((r,n)=>{let i=0,o=0,a=!1;e.forEach(s=>{++i,s.next(()=>{++o,a&&o===i&&r()},u=>n(u))}),a=!0,o===i&&r()})}static or(e){let r=z.resolve(!1);for(const n of e)r=r.next(i=>i?z.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,o)=>{n.push(r.call(this,i,o))}),this.waitFor(n)}static mapArray(e,r){return new z((n,i)=>{const o=e.length,a=new Array(o);let s=0;for(let u=0;u<o;u++){const l=u;r(e[l]).next(f=>{a[l]=f,++s,s===o&&n(a)},f=>i(f))}})}static doWhile(e,r){return new z((n,i)=>{const o=()=>{e()===!0?r().next(()=>{o()},i):n()};o()})}}function E8(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Xs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}G0.oe=-1;function Nc(t){return t==null}function Zl(t){return t===0&&1/t==-1/0}function A8(t){return typeof t=="number"&&Number.isInteger(t)&&!Zl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function la(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function N2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,r){this.comparator=e,this.root=r||At.EMPTY}insert(e,r){return new Ke(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??At.RED,this.left=i??At.EMPTY,this.right=o??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,o){return new At(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return At.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,r,n,i,o){return this}insert(e,r,n){return new At(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Mg(this.data.getIterator())}getIteratorFrom(e){return new Mg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Tt(this.comparator);return r.data=e,r}}class Mg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Br([])}unionWith(e){let r=new Tt(It.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Br(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new b2("Invalid base64 string: "+o):o}}(e);return new Ot(r)}static fromUint8Array(e){const r=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new Ot(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const I8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(t){if(Re(!!t),typeof t=="string"){let e=0;const r=I8.exec(t);if(Re(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xi(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function X0(t){const e=t.mapValue.fields.__previous_value__;return $0(e)?X0(e):e}function Ps(t){const e=hi(t.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,r,n,i,o,a,s,u,l){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=l}}class Ds{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Ds("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ds&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u={mapValue:{}};function Ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$0(t)?4:T8(t)?9007199254740991:S8(t)?10:11:ne()}function rn(t,e){if(t===e)return!0;const r=Ki(t);if(r!==Ki(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ps(t).isEqual(Ps(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=hi(i.timestampValue),s=hi(o.timestampValue);return a.seconds===s.seconds&&a.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Xi(i.bytesValue).isEqual(Xi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ze(i.geoPointValue.latitude)===Ze(o.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ze(i.integerValue)===Ze(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=Ze(i.doubleValue),s=Ze(o.doubleValue);return a===s?Zl(a)===Zl(s):isNaN(a)&&isNaN(s)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},s=o.mapValue.fields||{};if(kg(a)!==kg(s))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(s[u]===void 0||!rn(a[u],s[u])))return!1;return!0}(t,e);default:return ne()}}function Ns(t,e){return(t.values||[]).find(r=>rn(r,e))!==void 0}function Qo(t,e){if(t===e)return 0;const r=Ki(t),n=Ki(e);if(r!==n)return xe(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const s=Ze(o.integerValue||o.doubleValue),u=Ze(a.integerValue||a.doubleValue);return s<u?-1:s>u?1:s===u?0:isNaN(s)?isNaN(u)?0:-1:1}(t,e);case 3:return Lg(t.timestampValue,e.timestampValue);case 4:return Lg(Ps(t),Ps(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(o,a){const s=Xi(o),u=Xi(a);return s.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const s=o.split("/"),u=a.split("/");for(let l=0;l<s.length&&l<u.length;l++){const f=xe(s[l],u[l]);if(f!==0)return f}return xe(s.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const s=xe(Ze(o.latitude),Ze(a.latitude));return s!==0?s:xe(Ze(o.longitude),Ze(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fg(t.arrayValue,e.arrayValue);case 10:return function(o,a){var s,u,l,f;const h=o.fields||{},d=a.fields||{},p=(s=h.value)===null||s===void 0?void 0:s.arrayValue,g=(u=d.value)===null||u===void 0?void 0:u.arrayValue,w=xe(((l=p==null?void 0:p.values)===null||l===void 0?void 0:l.length)||0,((f=g==null?void 0:g.values)===null||f===void 0?void 0:f.length)||0);return w!==0?w:Fg(p,g)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===$u.mapValue&&a===$u.mapValue)return 0;if(o===$u.mapValue)return 1;if(a===$u.mapValue)return-1;const s=o.fields||{},u=Object.keys(s),l=a.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let h=0;h<u.length&&h<f.length;++h){const d=xe(u[h],f[h]);if(d!==0)return d;const p=Qo(s[u[h]],l[f[h]]);if(p!==0)return p}return xe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ne()}}function Lg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const r=hi(t),n=hi(e),i=xe(r.seconds,n.seconds);return i!==0?i:xe(r.nanos,n.nanos)}function Fg(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const o=Qo(r[i],n[i]);if(o)return o}return xe(r.length,n.length)}function Zo(t){return xd(t)}function xd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=hi(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Xi(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ee.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const o of r.values||[])i?i=!1:n+=",",n+=xd(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of n)o?o=!1:i+=",",i+=`${a}:${xd(r.fields[a])}`;return i+"}"}(t.mapValue):ne()}function Ed(t){return!!t&&"integerValue"in t}function K0(t){return!!t&&"arrayValue"in t}function Bg(t){return!!t&&"nullValue"in t}function Vg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fl(t){return!!t&&"mapValue"in t}function S8(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function as(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return la(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=as(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=as(t.arrayValue.values[r]);return e}return Object.assign({},t)}function T8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.value=e}static empty(){return new Ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!fl(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=as(r)}setAll(e){let r=It.emptyPath(),n={},i=[];e.forEach((a,s)=>{if(!r.isImmediateParentOf(s)){const u=this.getFieldsMap(r);this.applyChanges(u,n,i),n={},i=[],r=s.popLast()}a?n[s.lastSegment()]=as(a):i.push(s.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,n,i)}delete(e){const r=this.field(e.popLast());fl(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];fl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){la(r,(i,o)=>e[i]=o);for(const i of n)delete e[i]}clone(){return new Ar(as(this.value))}}function k2(t){const e=[];return la(t.fields,(r,n)=>{const i=new It([r]);if(fl(n)){const o=k2(n.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new Br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,r,n,i,o,a,s){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=o,this.data=a,this.documentState=s}static newInvalidDocument(e){return new Ut(e,0,ae.min(),ae.min(),ae.min(),Ar.empty(),0)}static newFoundDocument(e,r,n,i){return new Ut(e,1,r,ae.min(),n,i,0)}static newNoDocument(e,r){return new Ut(e,2,r,ae.min(),ae.min(),Ar.empty(),0)}static newUnknownDocument(e,r){return new Ut(e,3,r,ae.min(),ae.min(),Ar.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,r){this.position=e,this.inclusive=r}}function Ug(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?n=ee.comparator(ee.fromName(a.referenceValue),r.key):n=Qo(a,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function jg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!rn(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,r="asc"){this.field=e,this.dir=r}}function R8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{}class lt extends M2{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new P8(e,r,n):r==="array-contains"?new b8(e,n):r==="in"?new k8(e,n):r==="not-in"?new M8(e,n):r==="array-contains-any"?new L8(e,n):new lt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new D8(e,n):new N8(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Qo(r,this.value)):r!==null&&Ki(this.value)===Ki(r)&&this.matchesComparison(Qo(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends M2{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new nn(e,r)}matches(e){return L2(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function L2(t){return t.op==="and"}function F2(t){return O8(t)&&L2(t)}function O8(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function Ad(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+Zo(t.value);if(F2(t))return t.filters.map(e=>Ad(e)).join(",");{const e=t.filters.map(r=>Ad(r)).join(",");return`${t.op}(${e})`}}function B2(t,e){return t instanceof lt?function(n,i){return i instanceof lt&&n.op===i.op&&n.field.isEqual(i.field)&&rn(n.value,i.value)}(t,e):t instanceof nn?function(n,i){return i instanceof nn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,a,s)=>o&&B2(a,i.filters[s]),!0):!1}(t,e):void ne()}function V2(t){return t instanceof lt?function(r){return`${r.field.canonicalString()} ${r.op} ${Zo(r.value)}`}(t):t instanceof nn?function(r){return r.op.toString()+" {"+r.getFilters().map(V2).join(" ,")+"}"}(t):"Filter"}class P8 extends lt{constructor(e,r,n){super(e,r,n),this.key=ee.fromName(n.referenceValue)}matches(e){const r=ee.comparator(e.key,this.key);return this.matchesComparison(r)}}class D8 extends lt{constructor(e,r){super(e,"in",r),this.keys=U2("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class N8 extends lt{constructor(e,r){super(e,"not-in",r),this.keys=U2("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function U2(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ee.fromName(n.referenceValue))}class b8 extends lt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return K0(r)&&Ns(r.arrayValue,this.value)}}class k8 extends lt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ns(this.value.arrayValue,r)}}class M8 extends lt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ns(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Ns(this.value.arrayValue,r)}}class L8 extends lt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!K0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ns(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,r=null,n=[],i=[],o=null,a=null,s=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=a,this.endAt=s,this.ue=null}}function zg(t,e=null,r=[],n=[],i=null,o=null,a=null){return new F8(t,e,r,n,i,o,a)}function q0(t){const e=se(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Ad(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),Nc(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Zo(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Zo(n)).join(",")),e.ue=r}return e.ue}function Y0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!R8(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!B2(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jg(t.startAt,e.startAt)&&jg(t.endAt,e.endAt)}function Id(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,r=null,n=[],i=[],o=null,a="F",s=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function B8(t,e,r,n,i,o,a,s){return new bc(t,e,r,n,i,o,a,s)}function Q0(t){return new bc(t)}function Hg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V8(t){return t.collectionGroup!==null}function ss(t){const e=se(t);if(e.ce===null){e.ce=[];const r=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let s=new Tt(It.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(s=s.add(l.field))})}),s})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ec(o,n))}),r.has(It.keyField().canonicalString())||e.ce.push(new ec(It.keyField(),n))}return e.ce}function Yr(t){const e=se(t);return e.le||(e.le=U8(e,ss(t))),e.le}function U8(t,e){if(t.limitType==="F")return zg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new ec(i.field,o)});const r=t.endAt?new Jl(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Jl(t.startAt.position,t.startAt.inclusive):null;return zg(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Cd(t,e,r){return new bc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function kc(t,e){return Y0(Yr(t),Yr(e))&&t.limitType===e.limitType}function j2(t){return`${q0(Yr(t))}|lt:${t.limitType}`}function uo(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>V2(i)).join(", ")}]`),Nc(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>Zo(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>Zo(i)).join(",")),`Target(${n})`}(Yr(t))}; limitType=${t.limitType})`}function Mc(t,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):ee.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,i){for(const o of ss(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(a,s,u){const l=Ug(a,s,u);return a.inclusive?l<=0:l<0}(n.startAt,ss(n),i)||n.endAt&&!function(a,s,u){const l=Ug(a,s,u);return a.inclusive?l>=0:l>0}(n.endAt,ss(n),i))}(t,e)}function j8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function z2(t){return(e,r)=>{let n=!1;for(const i of ss(t)){const o=z8(i,e,r);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function z8(t,e,r){const n=t.field.isKeyField()?ee.comparator(e.key,r.key):function(o,a,s){const u=a.data.field(o),l=s.data.field(o);return u!==null&&l!==null?Qo(u,l):ne()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,(r,n)=>{for(const[i,o]of n)e(i,o)})}isEmpty(){return N2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=new Ke(ee.comparator);function Cn(){return H8}const H2=new Ke(ee.comparator);function Ka(...t){let e=H2;for(const r of t)e=e.insert(r.key,r);return e}function W2(t){let e=H2;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Mi(){return us()}function G2(){return us()}function us(){return new ca(t=>t.toString(),(t,e)=>t.isEqual(e))}const W8=new Ke(ee.comparator),G8=new Tt(ee.comparator);function de(...t){let e=G8;for(const r of t)e=e.add(r);return e}const $8=new Tt(xe);function X8(){return $8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zl(e)?"-0":e}}function $2(t){return{integerValue:""+t}}function K8(t,e){return A8(e)?$2(e):Z0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function q8(t,e,r){return t instanceof tc?function(i,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&$0(o)&&(o=X0(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(r,e):t instanceof bs?K2(t,e):t instanceof ks?q2(t,e):function(i,o){const a=X2(i,o),s=Wg(a)+Wg(i.Pe);return Ed(a)&&Ed(i.Pe)?$2(s):Z0(i.serializer,s)}(t,e)}function Y8(t,e,r){return t instanceof bs?K2(t,e):t instanceof ks?q2(t,e):r}function X2(t,e){return t instanceof rc?function(n){return Ed(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class tc extends Lc{}class bs extends Lc{constructor(e){super(),this.elements=e}}function K2(t,e){const r=Y2(e);for(const n of t.elements)r.some(i=>rn(i,n))||r.push(n);return{arrayValue:{values:r}}}class ks extends Lc{constructor(e){super(),this.elements=e}}function q2(t,e){let r=Y2(e);for(const n of t.elements)r=r.filter(i=>!rn(i,n));return{arrayValue:{values:r}}}class rc extends Lc{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Wg(t){return Ze(t.integerValue||t.doubleValue)}function Y2(t){return K0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Q8(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof bs&&i instanceof bs||n instanceof ks&&i instanceof ks?Yo(n.elements,i.elements,rn):n instanceof rc&&i instanceof rc?rn(n.Pe,i.Pe):n instanceof tc&&i instanceof tc}(t.transform,e.transform)}class Z8{constructor(e,r){this.version=e,this.transformResults=r}}class Qr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Qr}static exists(e){return new Qr(void 0,e)}static updateTime(e){return new Qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fc{}function Q2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new J0(t.key,Qr.none()):new Ks(t.key,t.data,Qr.none());{const r=t.data,n=Ar.empty();let i=new Tt(It.comparator);for(let o of e.fields)if(!i.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?n.delete(o):n.set(o,a),i=i.add(o)}return new Ji(t.key,n,new Br(i.toArray()),Qr.none())}}function J8(t,e,r){t instanceof Ks?function(i,o,a){const s=i.value.clone(),u=$g(i.fieldTransforms,o,a.transformResults);s.setAll(u),o.convertToFoundDocument(a.version,s).setHasCommittedMutations()}(t,e,r):t instanceof Ji?function(i,o,a){if(!hl(i.precondition,o))return void o.convertToUnknownDocument(a.version);const s=$g(i.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(Z2(i)),u.setAll(s),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,r):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function ls(t,e,r,n){return t instanceof Ks?function(o,a,s,u){if(!hl(o.precondition,a))return s;const l=o.value.clone(),f=Xg(o.fieldTransforms,u,a);return l.setAll(f),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),null}(t,e,r,n):t instanceof Ji?function(o,a,s,u){if(!hl(o.precondition,a))return s;const l=Xg(o.fieldTransforms,u,a),f=a.data;return f.setAll(Z2(o)),f.setAll(l),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),s===null?null:s.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(o,a,s){return hl(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):s}(t,e,r)}function eR(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),o=X2(n.transform,i||null);o!=null&&(r===null&&(r=Ar.empty()),r.set(n.field,o))}return r||null}function Gg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Yo(n,i,(o,a)=>Q8(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ks extends Fc{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ji extends Fc{constructor(e,r,n,i,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Z2(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function $g(t,e,r){const n=new Map;Re(t.length===r.length);for(let i=0;i<r.length;i++){const o=t[i],a=o.transform,s=e.data.field(o.field);n.set(o.field,Y8(a,s,r[i]))}return n}function Xg(t,e,r){const n=new Map;for(const i of t){const o=i.transform,a=r.data.field(i.field);n.set(i.field,q8(o,a,e))}return n}class J0 extends Fc{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tR extends Fc{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&J8(o,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=ls(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=ls(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=G2();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let s=this.applyToLocalView(a,o.mutatedFields);s=r.has(i.key)?null:s;const u=Q2(a,s);u!==null&&n.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(ae.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),de())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(r,n)=>Gg(r,n))&&Yo(this.baseMutations,e.baseMutations,(r,n)=>Gg(r,n))}}class e1{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Re(e.mutations.length===n.length);let i=function(){return W8}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new e1(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,ve;function oR(t){switch(t){default:return ne();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function J2(t){if(t===void 0)return In("GRPC error has no .code"),j.UNKNOWN;switch(t){case et.OK:return j.OK;case et.CANCELLED:return j.CANCELLED;case et.UNKNOWN:return j.UNKNOWN;case et.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case et.INTERNAL:return j.INTERNAL;case et.UNAVAILABLE:return j.UNAVAILABLE;case et.UNAUTHENTICATED:return j.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case et.NOT_FOUND:return j.NOT_FOUND;case et.ALREADY_EXISTS:return j.ALREADY_EXISTS;case et.PERMISSION_DENIED:return j.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case et.ABORTED:return j.ABORTED;case et.OUT_OF_RANGE:return j.OUT_OF_RANGE;case et.UNIMPLEMENTED:return j.UNIMPLEMENTED;case et.DATA_LOSS:return j.DATA_LOSS;default:return ne()}}(ve=et||(et={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=new Vi([4294967295,4294967295],0);function Kg(t){const e=aR().encode(t),r=new I2;return r.update(e),new Uint8Array(r.digest())}function qg(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vi([r,n],0),new Vi([i,o],0)]}class t1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new qa(`Invalid padding: ${r}`);if(n<0)throw new qa(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new qa(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new qa(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Vi.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(Vi.fromNumber(n)));return i.compare(sR)===1&&(i=new Vi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Kg(e),[n,i]=qg(r);for(let o=0;o<this.hashCount;o++){const a=this.Ee(n,i,o);if(!this.de(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new t1(o,i,r);return n.forEach(s=>a.insert(s)),a}insert(e){if(this.Ie===0)return;const r=Kg(e),[n,i]=qg(r);for(let o=0;o<this.hashCount;o++){const a=this.Ee(n,i,o);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,r,n,i,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,qs.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Bc(ae.min(),i,new Ke(xe),Cn(),de())}}class qs{constructor(e,r,n,i,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new qs(n,r,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class ew{constructor(e,r){this.targetId=e,this.me=r}}class tw{constructor(e,r,n=Ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class Yg{constructor(){this.fe=0,this.ge=Zg(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),r=de(),n=de();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:ne()}}),new qs(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=Zg()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cn(),this.qe=Qg(),this.Qe=new Ke(xe)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,i)=>{this.ze(i)&&r(i)})}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const o=i.target;if(Id(o))if(n===0){const a=new ee(o.path);this.Ue(r,a,Ut.newNoDocument(a,ae.min()))}else Re(n===1);else{const a=this.Ye(r);if(a!==n){const s=this.Ze(e),u=s?this.Xe(s,e,a):1;if(u!==0){this.je(r);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,l)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=r;let a,s;try{a=Xi(n).toUint8Array()}catch(u){if(u instanceof b2)return qo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{s=new t1(a,i,o)}catch(u){return qo(u instanceof qa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return s.Ie===0?null:s}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(o=>{const a=this.Le.tt(),s=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(s)||(this.Ue(r,o,null),i++)}),i}rt(e){const r=new Map;this.Be.forEach((o,a)=>{const s=this.Je(a);if(s){if(o.current&&Id(s.target)){const u=new ee(s.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Ut.newNoDocument(u,e))}o.be&&(r.set(a,o.ve()),o.Ce())}});let n=de();this.qe.forEach((o,a)=>{let s=!0;a.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(n=n.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const i=new Bc(e,r,this.Qe,this.ke,n);return this.ke=Cn(),this.qe=Qg(),this.Qe=new Ke(xe),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Yg,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Tt(xe),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||q("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Yg),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Qg(){return new Ke(ee.comparator)}function Zg(){return new Ke(ee.comparator)}const lR={asc:"ASCENDING",desc:"DESCENDING"},cR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fR={and:"AND",or:"OR"};class hR{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Sd(t,e){return t.useProto3Json||Nc(e)?e:{value:e}}function nc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dR(t,e){return nc(t,e.toTimestamp())}function Zr(t){return Re(!!t),ae.fromTimestamp(function(r){const n=hi(r);return new ht(n.seconds,n.nanos)}(t))}function r1(t,e){return Td(t,e).canonicalString()}function Td(t,e){const r=function(i){return new ze(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function nw(t){const e=ze.fromString(t);return Re(uw(e)),e}function Rd(t,e){return r1(t.databaseId,e.path)}function ah(t,e){const r=nw(e);if(r.get(1)!==t.databaseId.projectId)throw new Q(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Q(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ee(ow(r))}function iw(t,e){return r1(t.databaseId,e)}function pR(t){const e=nw(t);return e.length===4?ze.emptyPath():ow(e)}function Od(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ow(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Jg(t,e,r){return{name:Rd(t,e),fields:r.value.mapValue.fields}}function vR(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(Re(f===void 0||typeof f=="string"),Ot.fromBase64String(f||"")):(Re(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ot.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(l){const f=l.code===void 0?j.UNKNOWN:J2(l.code);return new Q(f,l.message||"")}(a);r=new tw(n,i,o,s||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=ah(t,n.document.name),o=Zr(n.document.updateTime),a=n.document.createTime?Zr(n.document.createTime):ae.min(),s=new Ar({mapValue:{fields:n.document.fields}}),u=Ut.newFoundDocument(i,o,a,s),l=n.targetIds||[],f=n.removedTargetIds||[];r=new dl(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=ah(t,n.document),o=n.readTime?Zr(n.readTime):ae.min(),a=Ut.newNoDocument(i,o),s=n.removedTargetIds||[];r=new dl([],s,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=ah(t,n.document),o=n.removedTargetIds||[];r=new dl([],o,i,null)}else{if(!("filter"in e))return ne();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,a=new iR(i,o),s=n.targetId;r=new ew(s,a)}}return r}function gR(t,e){let r;if(e instanceof Ks)r={update:Jg(t,e.key,e.value)};else if(e instanceof J0)r={delete:Rd(t,e.key)};else if(e instanceof Ji)r={update:Jg(t,e.key,e.data),updateMask:CR(e.fieldMask)};else{if(!(e instanceof tR))return ne();r={verify:Rd(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(o,a){const s=a.transform;if(s instanceof tc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof bs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof ks)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof rc)return{fieldPath:a.field.canonicalString(),increment:s.Pe};throw ne()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:dR(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne()}(t,e.precondition)),r}function yR(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(r=>function(i,o){let a=i.updateTime?Zr(i.updateTime):Zr(o);return a.isEqual(ae.min())&&(a=Zr(o)),new Z8(a,i.transformResults||[])}(r,e))):[]}function mR(t,e){return{documents:[iw(t,e.path)]}}function _R(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=iw(t,i);const o=function(l){if(l.length!==0)return sw(nn.create(l,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(l){if(l.length!==0)return l.map(f=>function(d){return{field:lo(d.field),direction:ER(d.dir)}}(f))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const s=Sd(t,e.limit);return s!==null&&(r.structuredQuery.limit=s),e.startAt&&(r.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:r,parent:i}}function wR(t){let e=pR(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Re(n===1);const f=r.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];r.where&&(o=function(h){const d=aw(h);return d instanceof nn&&F2(d)?d.getFilters():[d]}(r.where));let a=[];r.orderBy&&(a=function(h){return h.map(d=>function(g){return new ec(co(g.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(d))}(r.orderBy));let s=null;r.limit&&(s=function(h){let d;return d=typeof h=="object"?h.value:h,Nc(d)?null:d}(r.limit));let u=null;r.startAt&&(u=function(h){const d=!!h.before,p=h.values||[];return new Jl(p,d)}(r.startAt));let l=null;return r.endAt&&(l=function(h){const d=!h.before,p=h.values||[];return new Jl(p,d)}(r.endAt)),B8(e,i,a,o,s,"F",u,l)}function xR(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function aw(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=co(r.unaryFilter.field);return lt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=co(r.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=co(r.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=co(r.unaryFilter.field);return lt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(r){return lt.create(co(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return nn.create(r.compositeFilter.filters.map(n=>aw(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(r.compositeFilter.op))}(t):ne()}function ER(t){return lR[t]}function AR(t){return cR[t]}function IR(t){return fR[t]}function lo(t){return{fieldPath:t.canonicalString()}}function co(t){return It.fromServerFormat(t.fieldPath)}function sw(t){return t instanceof lt?function(r){if(r.op==="=="){if(Vg(r.value))return{unaryFilter:{field:lo(r.field),op:"IS_NAN"}};if(Bg(r.value))return{unaryFilter:{field:lo(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Vg(r.value))return{unaryFilter:{field:lo(r.field),op:"IS_NOT_NAN"}};if(Bg(r.value))return{unaryFilter:{field:lo(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(r.field),op:AR(r.op),value:r.value}}}(t):t instanceof nn?function(r){const n=r.getFilters().map(i=>sw(i));return n.length===1?n[0]:{compositeFilter:{op:IR(r.op),filters:n}}}(t):ne()}function CR(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function uw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,r,n,i,o=ae.min(),a=ae.min(),s=Ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=u}withSequenceNumber(e){return new Xn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Xn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.ct=e}}function TR(t){const e=wR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.un=new OR}addToCollectionParentIndex(e,r){return this.un.add(r),z.resolve()}getCollectionParents(e,r){return z.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return z.resolve()}deleteFieldIndex(e,r){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,r){return z.resolve()}getDocumentsMatchingTarget(e,r){return z.resolve(null)}getIndexType(e,r){return z.resolve(0)}getFieldIndexes(e,r){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,r){return z.resolve(fi.min())}getMinOffsetFromCollectionGroup(e,r){return z.resolve(fi.min())}updateCollectionGroup(e,r,n){return z.resolve()}updateIndexEntries(e,r){return z.resolve()}}class OR{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Tt(ze.comparator),o=!i.has(n);return this.index[r]=i.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Tt(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Jo(0)}static kn(){return new Jo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.changes=new ca(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?z.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&ls(n.mutation,i,Br.empty(),ht.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,de()).next(()=>n))}getLocalViewOfDocuments(e,r,n=de()){const i=Mi();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(o=>{let a=Ka();return o.forEach((s,u)=>{a=a.insert(s,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Mi();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,de()))}populateOverlays(e,r,n){const i=[];return n.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,s)=>{r.set(a,s)})})}computeViews(e,r,n,i){let o=Cn();const a=us(),s=function(){return us()}();return r.forEach((u,l)=>{const f=n.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Ji)?o=o.insert(l.key,l):f!==void 0?(a.set(l.key,f.mutation.getFieldMask()),ls(f.mutation,l,f.mutation.getFieldMask(),ht.now())):a.set(l.key,Br.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>a.set(l,f)),r.forEach((l,f)=>{var h;return s.set(l,new DR(f,(h=a.get(l))!==null&&h!==void 0?h:null))}),s))}recalculateAndSaveOverlays(e,r){const n=us();let i=new Ke((a,s)=>a-s),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const s of a)s.keys().forEach(u=>{const l=r.get(u);if(l===null)return;let f=n.get(u)||Br.empty();f=s.applyToLocalView(l,f),n.set(u,f);const h=(i.get(s.batchId)||de()).add(u);i=i.insert(s.batchId,h)})}).next(()=>{const a=[],s=i.getReverseIterator();for(;s.hasNext();){const u=s.getNext(),l=u.key,f=u.value,h=G2();f.forEach(d=>{if(!o.has(d)){const p=Q2(r.get(d),n.get(d));p!==null&&h.set(d,p),o=o.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(e,l,h))}return z.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(a){return ee.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):V8(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-o.size):z.resolve(Mi());let s=-1,u=o;return a.next(l=>z.forEach(l,(f,h)=>(s<h.largestBatchId&&(s=h.largestBatchId),o.get(f)?z.resolve():this.remoteDocumentCache.getEntry(e,f).next(d=>{u=u.insert(f,d)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,de())).next(f=>({batchId:s,changes:W2(f)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ee(r)).next(n=>{let i=Ka();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const o=r.collectionGroup;let a=Ka();return this.indexManager.getCollectionParents(e,o).next(s=>z.forEach(s,u=>{const l=function(h,d){return new bc(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,n,i).next(f=>{f.forEach((h,d)=>{a=a.insert(h,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,i))).next(a=>{o.forEach((u,l)=>{const f=l.getKey();a.get(f)===null&&(a=a.insert(f,Ut.newInvalidDocument(f)))});let s=Ka();return a.forEach((u,l)=>{const f=o.get(u);f!==void 0&&ls(f.mutation,l,Br.empty(),ht.now()),Mc(r,l)&&(s=s.insert(u,l))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return z.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Zr(i.createTime)}}(r)),z.resolve()}getNamedQuery(e,r){return z.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(i){return{name:i.name,query:TR(i.bundledQuery),readTime:Zr(i.readTime)}}(r)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.overlays=new Ke(ee.comparator),this.Ir=new Map}getOverlay(e,r){return z.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Mi();return z.forEach(r,i=>this.getOverlay(e,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,o)=>{this.ht(e,r,o)}),z.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(n)),z.resolve()}getOverlaysForCollection(e,r,n){const i=Mi(),o=r.length+1,a=new ee(r.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const u=s.getNext().value,l=u.getKey();if(!r.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>n&&i.set(u.getKey(),u)}return z.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let o=new Ke((l,f)=>l-f);const a=this.overlays.getIterator();for(;a.hasNext();){const l=a.getNext().value;if(l.getKey().getCollectionGroup()===r&&l.largestBatchId>n){let f=o.get(l.largestBatchId);f===null&&(f=Mi(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}const s=Mi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>s.set(l,f)),!(s.size()>=i)););return z.resolve(s)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new nR(r,n));let o=this.Ir.get(r);o===void 0&&(o=de(),this.Ir.set(r,o)),this.Ir.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.Tr=new Tt(vt.Er),this.dr=new Tt(vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new vt(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new vt(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new ee(new ze([])),n=new vt(r,e),i=new vt(r,e+1),o=[];return this.dr.forEachInRange([n,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new ee(new ze([])),n=new vt(r,e),i=new vt(r,e+1);let o=de();return this.dr.forEachInRange([n,i],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new vt(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class vt{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return ee.comparator(e.key,r.key)||xe(e.wr,r.wr)}static Ar(e,r){return xe(e.wr,r.wr)||ee.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Tt(vt.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new rR(o,r,n,i);this.mutationQueue.push(a);for(const s of i)this.br=this.br.add(new vt(s.key,o)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,r){return z.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new vt(r,0),i=new vt(r,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([n,i],a=>{const s=this.Dr(a.wr);o.push(s)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Tt(xe);return r.forEach(i=>{const o=new vt(i,0),a=new vt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],s=>{n=n.add(s.wr)})}),z.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let o=n;ee.isDocumentKey(o)||(o=o.child(""));const a=new vt(new ee(o),0);let s=new Tt(xe);return this.br.forEachWhile(u=>{const l=u.key.path;return!!n.isPrefixOf(l)&&(l.length===i&&(s=s.add(u.wr)),!0)},a),z.resolve(this.Cr(s))}Cr(e){const r=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Re(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return z.forEach(r.mutations,i=>{const o=new vt(i.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new vt(r,0),i=this.br.firstAfterOrEqual(n);return z.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.Mr=e,this.docs=function(){return new Ke(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),o=i?i.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return z.resolve(n?n.document.mutableCopy():Ut.newInvalidDocument(r))}getEntries(e,r){let n=Cn();return r.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():Ut.newInvalidDocument(i))}),z.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let o=Cn();const a=r.path,s=new ee(a.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:l,value:{document:f}}=u.getNext();if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||_8(m8(f),n)<=0||(i.has(f.key)||Mc(r,f))&&(o=o.insert(f.key,f.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,r,n,i){ne()}Or(e,r){return z.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new BR(this)}getSize(e){return z.resolve(this.size)}}class BR extends PR{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),z.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.persistence=e,this.Nr=new ca(r=>q0(r),Y0),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new n1,this.targetCount=0,this.kr=Jo.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,i)=>r(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),z.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Jo(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,z.resolve()}updateTargetData(e,r){return this.Kn(r),z.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,r,n){let i=0;const o=[];return this.Nr.forEach((a,s)=>{s.sequenceNumber<=r&&n.get(s.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return z.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),z.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),z.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return z.resolve(n)}containsKey(e,r){return z.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,r){this.qr={},this.overlays={},this.Qr=new G0(0),this.Kr=!1,this.Kr=!0,this.$r=new MR,this.referenceDelegate=e(this),this.Ur=new VR(this),this.indexManager=new RR,this.remoteDocumentCache=function(i){return new FR(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new SR(r),this.Gr=new bR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new kR,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new LR(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){q("MemoryPersistence","Starting transaction:",e);const i=new jR(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,r){return z.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class jR extends x8{constructor(e){super(),this.currentSequenceNumber=e}}class i1{constructor(e){this.persistence=e,this.Jr=new n1,this.Yr=null}static Zr(e){return new i1(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),z.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),z.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),z.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,n=>{const i=ee.fromPath(n);return this.ei(e,i).next(o=>{o||r.removeEntry(i,ae.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return z.or([()=>z.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=de(),i=de();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new o1(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return GT()?8:E8(zt())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const o={result:null};return this.Yi(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,r,i,n).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new zR;return this.Xi(e,r,a).next(s=>{if(o.result=s,this.zi)return this.es(e,r,a,s.size)})}).next(()=>o.result)}es(e,r,n,i){return n.documentReadCount<this.ji?(Fa()<=pe.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",uo(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Fa()<=pe.DEBUG&&q("QueryEngine","Query:",uo(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(Fa()<=pe.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",uo(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(r))):z.resolve())}Yi(e,r){if(Hg(r))return z.resolve(null);let n=Yr(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Cd(r,null,"F"),n=Yr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const a=de(...o);return this.Ji.getDocuments(e,a).next(s=>this.indexManager.getMinOffset(e,n).next(u=>{const l=this.ts(r,s);return this.ns(r,l,a,u.readTime)?this.Yi(e,Cd(r,null,"F")):this.rs(e,l,r,u)}))})))}Zi(e,r,n,i){return Hg(r)||i.isEqual(ae.min())?z.resolve(null):this.Ji.getDocuments(e,n).next(o=>{const a=this.ts(r,o);return this.ns(r,a,n,i)?z.resolve(null):(Fa()<=pe.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uo(r)),this.rs(e,a,r,y8(i,-1)).next(s=>s))})}ts(e,r){let n=new Tt(z2(e));return r.forEach((i,o)=>{Mc(e,o)&&(n=n.add(o))}),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,r,n){return Fa()<=pe.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",uo(r)),this.Ji.getDocumentsMatchingQuery(e,r,fi.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new Ke(xe),this._s=new ca(o=>q0(o),Y0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function GR(t,e,r,n){return new WR(t,e,r,n)}async function lw(t,e){const r=se(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(o=>{const a=[],s=[];let u=de();for(const l of i){a.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}for(const l of o){s.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}return r.localDocuments.getDocuments(n,u).next(l=>({hs:l,removedBatchIds:a,addedBatchIds:s}))})})}function $R(t,e){const r=se(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),o=r.cs.newChangeBuffer({trackRemovals:!0});return function(s,u,l,f){const h=l.batch,d=h.keys();let p=z.resolve();return d.forEach(g=>{p=p.next(()=>f.getEntry(u,g)).next(w=>{const I=l.docVersions.get(g);Re(I!==null),w.version.compareTo(I)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),f.addEntry(w)))})}),p.next(()=>s.mutationQueue.removeMutationBatch(u,h))}(r,n,e,o).next(()=>o.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(s){let u=de();for(let l=0;l<s.mutationResults.length;++l)s.mutationResults[l].transformResults.length>0&&(u=u.add(s.batch.mutations[l].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function cw(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function XR(t,e){const r=se(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const s=[];e.targetChanges.forEach((f,h)=>{const d=i.get(h);if(!d)return;s.push(r.Ur.removeMatchingKeys(o,f.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(o,f.addedDocuments,h)));let p=d.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Ot.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,n)),i=i.insert(h,p),function(w,I,_){return w.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(d,p,f)&&s.push(r.Ur.updateTargetData(o,p))});let u=Cn(),l=de();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&s.push(r.persistence.referenceDelegate.updateLimboDocument(o,f))}),s.push(KR(o,a,e.documentUpdates).next(f=>{u=f.Ps,l=f.Is})),!n.isEqual(ae.min())){const f=r.Ur.getLastRemoteSnapshotVersion(o).next(h=>r.Ur.setTargetsMetadata(o,o.currentSequenceNumber,n));s.push(f)}return z.waitFor(s).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(r.os=i,o))}function KR(t,e,r){let n=de(),i=de();return r.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let a=Cn();return r.forEach((s,u)=>{const l=o.get(s);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(s)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(s,u.readTime),a=a.insert(s,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),a=a.insert(s,u)):q("LocalStore","Ignoring outdated watch update for ",s,". Current version:",l.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function qR(t,e){const r=se(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function YR(t,e){const r=se(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Ur.getTargetData(n,e).next(o=>o?(i=o,z.resolve(i)):r.Ur.allocateTargetId(n).next(a=>(i=new Xn(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Pd(t,e,r){const n=se(t),i=n.os.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Xs(a))throw a;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function ey(t,e,r){const n=se(t);let i=ae.min(),o=de();return n.persistence.runTransaction("Execute query","readwrite",a=>function(u,l,f){const h=se(u),d=h._s.get(f);return d!==void 0?z.resolve(h.os.get(d)):h.Ur.getTargetData(l,f)}(n,a,Yr(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,s.targetId).next(u=>{o=u})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?i:ae.min(),r?o:de())).next(s=>(QR(n,j8(e),s),{documents:s,Ts:o})))}function QR(t,e,r){let n=t.us.get(e)||ae.min();r.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.us.set(e,n)}class ty{constructor(){this.activeTargetIds=X8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZR{constructor(){this.so=new ty,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ty,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu=null;function sh(){return Xu===null?Xu=function(){return 268435456+Math.round(2147483648*Math.random())}():Xu++,"0x"+Xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class r6 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(r,n,i,o,a){const s=sh(),u=this.xo(r,n.toUriEncodedString());q("RestConnection",`Sending RPC '${r}' ${s}:`,u,i);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,a),this.No(r,u,l,i).then(f=>(q("RestConnection",`Received RPC '${r}' ${s}: `,f),f),f=>{throw qo("RestConnection",`RPC '${r}' ${s} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(r,n,i,o,a,s){return this.Mo(r,n,i,o,a)}Oo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ua}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,a)=>r[a]=o),i&&i.headers.forEach((o,a)=>r[a]=o)}xo(r,n){const i=e6[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const o=sh();return new Promise((a,s)=>{const u=new C2;u.setWithCredentials(!0),u.listenOnce(S2.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cl.NO_ERROR:const f=u.getResponseJson();q(Mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case cl.TIMEOUT:q(Mt,`RPC '${e}' ${o} timed out`),s(new Q(j.DEADLINE_EXCEEDED,"Request time out"));break;case cl.HTTP_ERROR:const h=u.getStatus();if(q(Mt,`RPC '${e}' ${o} failed with status:`,h,"response text:",u.getResponseText()),h>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const g=function(I){const _=I.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(_)>=0?_:j.UNKNOWN}(p.status);s(new Q(g,p.message))}else s(new Q(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else s(new Q(j.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{q(Mt,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);q(Mt,`RPC '${e}' ${o} sending request:`,i),u.send(r,"POST",l,n,15)})}Bo(e,r,n){const i=sh(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=O2(),s=R2(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const f=o.join("");q(Mt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const h=a.createWebChannel(f,u);let d=!1,p=!1;const g=new t6({Io:I=>{p?q(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(d||(q(Mt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),q(Mt,`RPC '${e}' stream ${i} sending:`,I),h.send(I))},To:()=>h.close()}),w=(I,_,m)=>{I.listen(_,x=>{try{m(x)}catch(P){setTimeout(()=>{throw P},0)}})};return w(h,Xa.EventType.OPEN,()=>{p||(q(Mt,`RPC '${e}' stream ${i} transport opened.`),g.yo())}),w(h,Xa.EventType.CLOSE,()=>{p||(p=!0,q(Mt,`RPC '${e}' stream ${i} transport closed`),g.So())}),w(h,Xa.EventType.ERROR,I=>{p||(p=!0,qo(Mt,`RPC '${e}' stream ${i} transport errored:`,I),g.So(new Q(j.UNAVAILABLE,"The operation could not be completed")))}),w(h,Xa.EventType.MESSAGE,I=>{var _;if(!p){const m=I.data[0];Re(!!m);const x=m,P=x.error||((_=x[0])===null||_===void 0?void 0:_.error);if(P){q(Mt,`RPC '${e}' stream ${i} received error:`,P);const k=P.status;let M=function(S){const R=et[S];if(R!==void 0)return J2(R)}(k),A=P.message;M===void 0&&(M=j.INTERNAL,A="Unknown error status: "+k+" with message "+P.message),p=!0,g.So(new Q(M,A)),h.close()}else q(Mt,`RPC '${e}' stream ${i} received:`,m),g.bo(m)}}),w(s,T2.STAT_EVENT,I=>{I.stat===wd.PROXY?q(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===wd.NOPROXY&&q(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){return new hR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,r,n=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,r,n,i,o,a,s,u){this.ui=e,this.Ho=n,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fw(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===j.RESOURCE_EXHAUSTED?(In(r.toString()),In("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===r&&this.P_(n,i)},n=>{e(()=>{const i=new Q(j.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n6 extends hw{constructor(e,r,n,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=o}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=vR(this.serializer,e),n=function(o){if(!("targetChange"in o))return ae.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ae.min():a.readTime?Zr(a.readTime):ae.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Od(this.serializer),r.addTarget=function(o,a){let s;const u=a.target;if(s=Id(u)?{documents:mR(o,u)}:{query:_R(o,u)._t},s.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){s.resumeToken=rw(o,a.resumeToken);const l=Sd(o,a.expectedCount);l!==null&&(s.expectedCount=l)}else if(a.snapshotVersion.compareTo(ae.min())>0){s.readTime=nc(o,a.snapshotVersion.toTimestamp());const l=Sd(o,a.expectedCount);l!==null&&(s.expectedCount=l)}return s}(this.serializer,e);const n=xR(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Od(this.serializer),r.removeTarget=e,this.a_(r)}}class i6 extends hw{constructor(e,r,n,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=yR(e.writeResults,e.commitTime),n=Zr(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Od(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>gR(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6 extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Td(r,n),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(j.UNKNOWN,o.toString())})}Lo(e,r,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Lo(e,Td(r,n),i,a,s,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(j.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class a6{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(In(r),this.D_=!1):q("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,r,n,i,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{n.enqueueAndForget(async()=>{eo(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=se(u);l.L_.add(4),await Ys(l),l.q_.set("Unknown"),l.L_.delete(4),await Uc(l)}(this))})}),this.q_=new a6(n,i)}}async function Uc(t){if(eo(t))for(const e of t.B_)await e(!0)}async function Ys(t){for(const e of t.B_)await e(!1)}function dw(t,e){const r=se(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),l1(r)?u1(r):fa(r).r_()&&s1(r,e))}function a1(t,e){const r=se(t),n=fa(r);r.N_.delete(e),n.r_()&&pw(r,e),r.N_.size===0&&(n.r_()?n.o_():eo(r)&&r.q_.set("Unknown"))}function s1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}fa(t).A_(e)}function pw(t,e){t.Q_.xe(e),fa(t).R_(e)}function u1(t){t.Q_=new uR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),fa(t).start(),t.q_.v_()}function l1(t){return eo(t)&&!fa(t).n_()&&t.N_.size>0}function eo(t){return se(t).L_.size===0}function vw(t){t.Q_=void 0}async function u6(t){t.q_.set("Online")}async function l6(t){t.N_.forEach((e,r)=>{s1(t,e)})}async function c6(t,e){vw(t),l1(t)?(t.q_.M_(e),u1(t)):t.q_.set("Unknown")}async function f6(t,e,r){if(t.q_.set("Online"),e instanceof tw&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const s of o.targetIds)i.N_.has(s)&&(await i.remoteSyncer.rejectListen(s,a),i.N_.delete(s),i.Q_.removeTarget(s))}(t,e)}catch(n){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ic(t,n)}else if(e instanceof dl?t.Q_.Ke(e):e instanceof ew?t.Q_.He(e):t.Q_.We(e),!r.isEqual(ae.min()))try{const n=await cw(t.localStore);r.compareTo(n)>=0&&await function(o,a){const s=o.Q_.rt(a);return s.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.N_.get(l);f&&o.N_.set(l,f.withResumeToken(u.resumeToken,a))}}),s.targetMismatches.forEach((u,l)=>{const f=o.N_.get(u);if(!f)return;o.N_.set(u,f.withResumeToken(Ot.EMPTY_BYTE_STRING,f.snapshotVersion)),pw(o,u);const h=new Xn(f.target,u,l,f.sequenceNumber);s1(o,h)}),o.remoteSyncer.applyRemoteEvent(s)}(t,r)}catch(n){q("RemoteStore","Failed to raise snapshot:",n),await ic(t,n)}}async function ic(t,e,r){if(!Xs(e))throw e;t.L_.add(1),await Ys(t),t.q_.set("Offline"),r||(r=()=>cw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Uc(t)})}function gw(t,e){return e().catch(r=>ic(t,r,e))}async function jc(t){const e=se(t),r=di(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;h6(e);)try{const i=await qR(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,d6(e,i)}catch(i){await ic(e,i)}yw(e)&&mw(e)}function h6(t){return eo(t)&&t.O_.length<10}function d6(t,e){t.O_.push(e);const r=di(t);r.r_()&&r.V_&&r.m_(e.mutations)}function yw(t){return eo(t)&&!di(t).n_()&&t.O_.length>0}function mw(t){di(t).start()}async function p6(t){di(t).p_()}async function v6(t){const e=di(t);for(const r of t.O_)e.m_(r.mutations)}async function g6(t,e,r){const n=t.O_.shift(),i=e1.from(n,e,r);await gw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await jc(t)}async function y6(t,e){e&&di(t).V_&&await async function(n,i){if(function(a){return oR(a)&&a!==j.ABORTED}(i.code)){const o=n.O_.shift();di(n).s_(),await gw(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await jc(n)}}(t,e),yw(t)&&mw(t)}async function ny(t,e){const r=se(t);r.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const n=eo(r);r.L_.add(3),await Ys(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Uc(r)}async function m6(t,e){const r=se(t);e?(r.L_.delete(2),await Uc(r)):e||(r.L_.add(2),await Ys(r),r.q_.set("Unknown"))}function fa(t){return t.K_||(t.K_=function(r,n,i){const o=se(r);return o.w_(),new n6(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:u6.bind(null,t),Ro:l6.bind(null,t),mo:c6.bind(null,t),d_:f6.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),l1(t)?u1(t):t.q_.set("Unknown")):(await t.K_.stop(),vw(t))})),t.K_}function di(t){return t.U_||(t.U_=function(r,n,i){const o=se(r);return o.w_(),new i6(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:p6.bind(null,t),mo:y6.bind(null,t),f_:v6.bind(null,t),g_:g6.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await jc(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,r,n,i,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,o){const a=Date.now()+n,s=new c1(e,r,a,i,o);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function f1(t,e){if(In("AsyncQueue",`${e}: ${t}`),Xs(t))return new Q(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ee.comparator(r.key,n.key):(r,n)=>ee.comparator(r.key,n.key),this.keyedMap=Ka(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new Mo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Mo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.W_=new Ke(ee.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class ea{constructor(e,r,n,i,o,a,s,u,l){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,r,n,i,o){const a=[];return r.forEach(s=>{a.push({type:0,doc:s})}),new ea(e,r,Mo.emptySet(r),a,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class w6{constructor(){this.queries=oy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=se(r),o=i.queries;i.queries=oy(),o.forEach((a,s)=>{for(const u of s.j_)u.onError(n)})})(this,new Q(j.ABORTED,"Firestore shutting down"))}}function oy(){return new ca(t=>j2(t),kc)}async function _w(t,e){const r=se(t);let n=3;const i=e.query;let o=r.queries.get(i);o?!o.H_()&&e.J_()&&(n=2):(o=new _6,n=e.J_()?0:1);try{switch(n){case 0:o.z_=await r.onListen(i,!0);break;case 1:o.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const s=f1(a,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(s)}r.queries.set(i,o),o.j_.push(e),e.Z_(r.onlineState),o.z_&&e.X_(o.z_)&&h1(r)}async function ww(t,e){const r=se(t),n=e.query;let i=3;const o=r.queries.get(n);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function x6(t,e){const r=se(t);let n=!1;for(const i of e){const o=i.query,a=r.queries.get(o);if(a){for(const s of a.j_)s.X_(i)&&(n=!0);a.z_=i}}n&&h1(r)}function E6(t,e,r){const n=se(t),i=n.queries.get(e);if(i)for(const o of i.j_)o.onError(r);n.queries.delete(e)}function h1(t){t.Y_.forEach(e=>{e.next()})}var Dd,ay;(ay=Dd||(Dd={})).ea="default",ay.Cache="cache";class xw{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new ea(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Dd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.key=e}}class Aw{constructor(e){this.key=e}}class A6{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=z2(e),this.Ra=new Mo(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new iy,i=r?r.Ra:this.Ra;let o=r?r.mutatedKeys:this.mutatedKeys,a=i,s=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,h)=>{const d=i.get(f),p=Mc(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let I=!1;d&&p?d.data.isEqual(p.data)?g!==w&&(n.track({type:3,doc:p}),I=!0):this.ga(d,p)||(n.track({type:2,doc:p}),I=!0,(u&&this.Aa(p,u)>0||l&&this.Aa(p,l)<0)&&(s=!0)):!d&&p?(n.track({type:0,doc:p}),I=!0):d&&!p&&(n.track({type:1,doc:d}),I=!0,(u||l)&&(s=!0)),I&&(p?(a=a.add(p),o=w?o.add(f):o.delete(f)):(a=a.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),o=o.delete(f.key),n.track({type:1,doc:f})}return{Ra:a,fa:n,ns:s,mutatedKeys:o}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,h)=>function(p,g){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return w(p)-w(g)}(f.type,h.type)||this.Aa(f.doc,h.doc)),this.pa(n),i=i!=null&&i;const s=r&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,a.length!==0||l?{snapshot:new ea(this.query,e.Ra,o,a,e.mutatedKeys,u===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:s}:{wa:s}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=de(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new Aw(n))}),this.da.forEach(n=>{e.has(n)||r.push(new Ew(n))}),r}ba(e){this.Ta=e.Ts,this.da=de();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ea.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class I6{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class C6{constructor(e){this.key=e,this.va=!1}}class S6{constructor(e,r,n,i,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new ca(s=>j2(s),kc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(ee.comparator),this.Na=new Map,this.La=new n1,this.Ba={},this.ka=new Map,this.qa=Jo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function T6(t,e,r=!0){const n=Ow(t);let i;const o=n.Fa.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await Iw(n,e,r,!0),i}async function R6(t,e){const r=Ow(t);await Iw(r,e,!0,!1)}async function Iw(t,e,r,n){const i=await YR(t.localStore,Yr(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,r);let s;return n&&(s=await O6(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&dw(t.remoteStore,i),s}async function O6(t,e,r,n,i){t.Ka=(h,d,p)=>async function(w,I,_,m){let x=I.view.ma(_);x.ns&&(x=await ey(w.localStore,I.query,!1).then(({documents:A})=>I.view.ma(A,x)));const P=m&&m.targetChanges.get(I.targetId),k=m&&m.targetMismatches.get(I.targetId)!=null,M=I.view.applyChanges(x,w.isPrimaryClient,P,k);return uy(w,I.targetId,M.wa),M.snapshot}(t,h,d,p);const o=await ey(t.localStore,e,!0),a=new A6(e,o.Ts),s=a.ma(o.documents),u=qs.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),l=a.applyChanges(s,t.isPrimaryClient,u);uy(t,r,l.wa);const f=new I6(e,r,a);return t.Fa.set(e,f),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),l.snapshot}async function P6(t,e,r){const n=se(t),i=n.Fa.get(e),o=n.Ma.get(i.targetId);if(o.length>1)return n.Ma.set(i.targetId,o.filter(a=>!kc(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Pd(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&a1(n.remoteStore,i.targetId),Nd(n,i.targetId)}).catch($s)):(Nd(n,i.targetId),await Pd(n.localStore,i.targetId,!0))}async function D6(t,e){const r=se(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),a1(r.remoteStore,n.targetId))}async function N6(t,e,r){const n=V6(t);try{const i=await function(a,s){const u=se(a),l=ht.now(),f=s.reduce((p,g)=>p.add(g.key),de());let h,d;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Cn(),w=de();return u.cs.getEntries(p,f).next(I=>{g=I,g.forEach((_,m)=>{m.isValidDocument()||(w=w.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,g)).next(I=>{h=I;const _=[];for(const m of s){const x=eR(m,h.get(m.key).overlayedDocument);x!=null&&_.push(new Ji(m.key,x,k2(x.value.mapValue),Qr.exists(!0)))}return u.mutationQueue.addMutationBatch(p,l,_,s)}).next(I=>{d=I;const _=I.applyToLocalDocumentSet(h,w);return u.documentOverlayCache.saveOverlays(p,I.batchId,_)})}).then(()=>({batchId:d.batchId,changes:W2(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,s,u){let l=a.Ba[a.currentUser.toKey()];l||(l=new Ke(xe)),l=l.insert(s,u),a.Ba[a.currentUser.toKey()]=l}(n,i.batchId,r),await Qs(n,i.changes),await jc(n.remoteStore)}catch(i){const o=f1(i,"Failed to persist write");r.reject(o)}}async function Cw(t,e){const r=se(t);try{const n=await XR(r.localStore,e);e.targetChanges.forEach((i,o)=>{const a=r.Na.get(o);a&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Re(a.va):i.removedDocuments.size>0&&(Re(a.va),a.va=!1))}),await Qs(r,n,e)}catch(n){await $s(n)}}function sy(t,e,r){const n=se(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach((o,a)=>{const s=a.view.Z_(e);s.snapshot&&i.push(s.snapshot)}),function(a,s){const u=se(a);u.onlineState=s;let l=!1;u.queries.forEach((f,h)=>{for(const d of h.j_)d.Z_(s)&&(l=!0)}),l&&h1(u)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function b6(t,e,r){const n=se(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),o=i&&i.key;if(o){let a=new Ke(ee.comparator);a=a.insert(o,Ut.newNoDocument(o,ae.min()));const s=de().add(o),u=new Bc(ae.min(),new Map,new Ke(xe),a,s);await Cw(n,u),n.Oa=n.Oa.remove(o),n.Na.delete(e),d1(n)}else await Pd(n.localStore,e,!1).then(()=>Nd(n,e,r)).catch($s)}async function k6(t,e){const r=se(t),n=e.batch.batchId;try{const i=await $R(r.localStore,e);Tw(r,n,null),Sw(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Qs(r,i)}catch(i){await $s(i)}}async function M6(t,e,r){const n=se(t);try{const i=await function(a,s){const u=se(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,s).next(h=>(Re(h!==null),f=h.keys(),u.mutationQueue.removeMutationBatch(l,h))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,s)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(n.localStore,e);Tw(n,e,r),Sw(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Qs(n,i)}catch(i){await $s(i)}}function Sw(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function Tw(t,e,r){const n=se(t);let i=n.Ba[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(r?o.reject(r):o.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Nd(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||Rw(t,n)})}function Rw(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(a1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),d1(t))}function uy(t,e,r){for(const n of r)n instanceof Ew?(t.La.addReference(n.key,e),L6(t,n)):n instanceof Aw?(q("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||Rw(t,n.key)):ne()}function L6(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(q("SyncEngine","New document in limbo: "+r),t.xa.add(n),d1(t))}function d1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new ee(ze.fromString(e)),n=t.qa.next();t.Na.set(n,new C6(r)),t.Oa=t.Oa.insert(r,n),dw(t.remoteStore,new Xn(Yr(Q0(r.path)),n,"TargetPurposeLimboResolution",G0.oe))}}async function Qs(t,e,r){const n=se(t),i=[],o=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((s,u)=>{a.push(n.Ka(u,e,r).then(l=>{var f;if((l||r)&&n.isPrimaryClient){const h=l?!l.fromCache:(f=r==null?void 0:r.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);const h=o1.Wi(u.targetId,l);o.push(h)}}))}),await Promise.all(a),n.Ca.d_(i),await async function(u,l){const f=se(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>z.forEach(l,d=>z.forEach(d.$i,p=>f.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>z.forEach(d.Ui,p=>f.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!Xs(h))throw h;q("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=f.os.get(d),g=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(g);f.os=f.os.insert(d,w)}}}(n.localStore,o))}async function F6(t,e){const r=se(t);if(!r.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const n=await lw(r.localStore,e);r.currentUser=e,function(o,a){o.ka.forEach(s=>{s.forEach(u=>{u.reject(new Q(j.CANCELLED,a))})}),o.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Qs(r,n.hs)}}function B6(t,e){const r=se(t),n=r.Na.get(e);if(n&&n.va)return de().add(n.key);{let i=de();const o=r.Ma.get(e);if(!o)return i;for(const a of o){const s=r.Fa.get(a);i=i.unionWith(s.view.Va)}return i}}function Ow(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b6.bind(null,e),e.Ca.d_=x6.bind(null,e.eventManager),e.Ca.$a=E6.bind(null,e.eventManager),e}function V6(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M6.bind(null,e),e}class oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return GR(this.persistence,new HR,e.initialUser,this.serializer)}Ga(e){return new UR(i1.Zr,this.serializer)}Wa(e){return new ZR}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oc.provider={build:()=>new oc};class bd{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>sy(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=F6.bind(null,this.syncEngine),await m6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new w6}()}createDatastore(e){const r=Vc(e.databaseInfo.databaseId),n=function(o){return new r6(o)}(e.databaseInfo);return function(o,a,s,u){return new o6(o,a,s,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,o,a,s){return new s6(n,i,o,a,s)}(this.localStore,this.datastore,e.asyncQueue,r=>sy(this.syncEngine,r,0),function(){return ry.D()?new ry:new JR}())}createSyncEngine(e,r){return function(i,o,a,s,u,l,f){const h=new S6(i,o,a,s,u,l);return f&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const o=se(i);q("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Ys(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}bd.provider={build:()=>new bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):In("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,r,n,i,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=D2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async a=>{q("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(q("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=f1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function lh(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await lw(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ly(t,e){t.asyncQueue.verifyOperationInProgress();const r=await j6(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>ny(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>ny(e.remoteStore,i)),t._onlineComponents=e}async function j6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await lh(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;qo("Error using user provided cache. Falling back to memory cache: "+r),await lh(t,new oc)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await lh(t,new oc);return t._offlineComponents}async function Dw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await ly(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await ly(t,new bd))),t._onlineComponents}function z6(t){return Dw(t).then(e=>e.syncEngine)}async function Nw(t){const e=await Dw(t),r=e.eventManager;return r.onListen=T6.bind(null,e.syncEngine),r.onUnlisten=P6.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=R6.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=D6.bind(null,e.syncEngine),r}function H6(t,e,r={}){const n=new yn;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,s,u,l){const f=new Pw({next:d=>{f.Za(),a.enqueueAndForget(()=>ww(o,h));const p=d.docs.has(s);!p&&d.fromCache?l.reject(new Q(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&u&&u.source==="server"?l.reject(new Q(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new xw(Q0(s.path),f,{includeMetadataChanges:!0,_a:!0});return _w(o,h)}(await Nw(t),t.asyncQueue,e,r,n)),n.promise}function W6(t,e,r={}){const n=new yn;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,s,u,l){const f=new Pw({next:d=>{f.Za(),a.enqueueAndForget(()=>ww(o,h)),d.fromCache&&u.source==="server"?l.reject(new Q(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new xw(s,f,{includeMetadataChanges:!0,_a:!0});return _w(o,h)}(await Nw(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t,e,r){if(!r)throw new Q(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function G6(t,e,r,n){if(e===!0&&n===!0)throw new Q(j.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function fy(t){if(!ee.isDocumentKey(t))throw new Q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hy(t){if(ee.isDocumentKey(t))throw new Q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function p1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function pi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=p1(t);throw new Q(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bw((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zc{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dy(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new u8;switch(n.type){case"firstParty":return new h8(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=cy.get(r);n&&(q("ComponentProvider","Removing Datastore"),cy.delete(r),n.terminate())}(this),Promise.resolve()}}function $6(t,e,r,n={}){var i;const o=(t=pi(t,zc))._getSettings(),a=`${e}:${r}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),n.mockUserToken){let s,u;if(typeof n.mockUserToken=="string")s=n.mockUserToken,u=Ft.MOCK_USER;else{s=BT(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=n.mockUserToken.sub||n.mockUserToken.user_id;if(!l)throw new Q(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ft(l)}t._authCredentials=new l8(new P2(s,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hc(this.firestore,e,this._query)}}class pr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pr(this.firestore,e,this._key)}}class ui extends Hc{constructor(e,r,n){super(e,r,Q0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pr(this.firestore,null,new ee(e))}withConverter(e){return new ui(this.firestore,e,this._path)}}function X6(t,e,...r){if(t=ur(t),kw("collection","path",e),t instanceof zc){const n=ze.fromString(e,...r);return hy(n),new ui(t,null,n)}{if(!(t instanceof pr||t instanceof ui))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ze.fromString(e,...r));return hy(n),new ui(t.firestore,null,n)}}function v1(t,e,...r){if(t=ur(t),arguments.length===1&&(e=D2.newId()),kw("doc","path",e),t instanceof zc){const n=ze.fromString(e,...r);return fy(n),new pr(t,null,new ee(n))}{if(!(t instanceof pr||t instanceof ui))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ze.fromString(e,...r));return fy(n),new pr(t.firestore,t instanceof ui?t.converter:null,new ee(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fw(this,"async_queue_retry"),this.Vu=()=>{const n=uh();n&&q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=uh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=uh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new yn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xs(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const i=function(a){let s=a.message||"";return a.stack&&(s=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),s}(n);throw In("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=c1.createAndSchedule(this,e,r,n,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}class Zs extends zc{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new py,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new py(e),this._firestoreClient=void 0,await e}}}function K6(t,e){const r=typeof t=="object"?t:x2(),n=typeof t=="string"?t:"(default)",i=H0(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=LT("firestore");o&&$6(i,...o)}return i}function g1(t){if(t._terminated)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||q6(t),t._firestoreClient}function q6(t){var e,r,n;const i=t._freezeSettings(),o=function(s,u,l,f){return new C8(s,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,bw(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new U6(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(s){const u=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ta(Ot.fromBase64String(e))}catch(r){throw new Q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ta(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=/^__.*__$/;class Q6{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ji(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ks(e,this.data,r,this.fieldTransforms)}}function Lw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class w1{constructor(e,r,n,i,o,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new w1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ac(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Lw(this.Cu)&&Y6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Z6{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Vc(e)}Qu(e,r,n,i=!1){return new w1({Cu:e,methodName:r,qu:n,path:It.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J6(t){const e=t._freezeSettings(),r=Vc(t._databaseId);return new Z6(t._databaseId,!!e.ignoreUndefinedProperties,r)}function eO(t,e,r,n,i,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,r,i);Uw("Data must be an object, but it was:",a,n);const s=Bw(n,a);let u,l;if(o.merge)u=new Br(a.fieldMask),l=a.fieldTransforms;else if(o.mergeFields){const f=[];for(const h of o.mergeFields){const d=tO(e,h,r);if(!a.contains(d))throw new Q(j.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);nO(f,d)||f.push(d)}u=new Br(f),l=a.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,l=a.fieldTransforms;return new Q6(new Ar(s),u,l)}function Fw(t,e){if(Vw(t=ur(t)))return Uw("Unsupported field value:",e,t),Bw(t,e);if(t instanceof Mw)return function(n,i){if(!Lw(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,i){const o=[];let a=0;for(const s of n){let u=Fw(s,i.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(n,i){if((n=ur(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return K8(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=ht.fromDate(n);return{timestampValue:nc(i.serializer,o)}}if(n instanceof ht){const o=new ht(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:nc(i.serializer,o)}}if(n instanceof m1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ta)return{bytesValue:rw(i.serializer,n._byteString)};if(n instanceof pr){const o=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(o))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:r1(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof _1)return function(a,s){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw s.Bu("VectorValues must only contain numeric values.");return Z0(s.serializer,u)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${p1(n)}`)}(t,e)}function Bw(t,e){const r={};return N2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(t,(n,i)=>{const o=Fw(i,e.Mu(n));o!=null&&(r[n]=o)}),{mapValue:{fields:r}}}function Vw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof m1||t instanceof ta||t instanceof pr||t instanceof Mw||t instanceof _1)}function Uw(t,e,r){if(!Vw(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=p1(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function tO(t,e,r){if((e=ur(e))instanceof y1)return e._internalPath;if(typeof e=="string")return jw(t,e);throw ac("Field path arguments must be of type string or ",t,!1,void 0,r)}const rO=new RegExp("[~\\*/\\[\\]]");function jw(t,e,r){if(e.search(rO)>=0)throw ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new y1(...e.split("."))._internalPath}catch{throw ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function ac(t,e,r,n,i){const o=n&&!n.isEmpty(),a=i!==void 0;let s=`Function ${e}() called with invalid data`;r&&(s+=" (via `toFirestore()`)"),s+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${n}`),a&&(u+=` in document ${i}`),u+=")"),new Q(j.INVALID_ARGUMENT,s+t+u)}function nO(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,r,n,i,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Hw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class iO extends zw{data(){return super.data()}}function Hw(t,e){return typeof e=="string"?jw(t,e):e instanceof y1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aO{convertValue(e,r="none"){switch(Ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return la(e,(i,o)=>{n[i]=this.convertValue(o,r)}),n}convertVectorValue(e){var r,n,i;const o=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(a=>Ze(a.doubleValue));return new _1(o)}convertGeoPoint(e){return new m1(Ze(e.latitude),Ze(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=X0(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Ps(e));default:return null}}convertTimestamp(e){const r=hi(e);return new ht(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ze.fromString(e);Re(uw(n));const i=new Ds(n.get(1),n.get(3)),o=new ee(n.popFirst(5));return i.isEqual(r)||In(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ww extends zw{constructor(e,r,n,i,o,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Hw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class pl extends Ww{data(e={}){return super.data(e)}}class uO{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Ya(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new pl(this._firestore,this._userDataWriter,n.key,n,new Ya(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Q(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(s=>{const u=new pl(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Ya(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>o||s.type!==3).map(s=>{const u=new pl(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Ya(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,f=-1;return s.type!==0&&(l=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),f=a.indexOf(s.doc.key)),{type:lO(s.type),doc:u,oldIndex:l,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function lO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(t){t=pi(t,pr);const e=pi(t.firestore,Zs);return H6(g1(e),t._key).then(r=>dO(e,t,r))}class Gw extends aO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ta(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,r)}}function fO(t){t=pi(t,Hc);const e=pi(t.firestore,Zs),r=g1(e),n=new Gw(e);return oO(t._query),W6(r,t._query).then(i=>new uO(e,n,t,i))}function x1(t,e,r){t=pi(t,pr);const n=pi(t.firestore,Zs),i=sO(t.converter,e,r);return $w(n,[eO(J6(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Qr.none())])}function hO(t){return $w(pi(t.firestore,Zs),[new J0(t._key,Qr.none())])}function $w(t,e){return function(n,i){const o=new yn;return n.asyncQueue.enqueueAndForget(async()=>N6(await z6(n),i,o)),o.promise}(g1(t),e)}function dO(t,e,r){const n=r.docs.get(e._key),i=new Gw(t);return new Ww(t,i,e._key,n,new Ya(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(i){ua=i})(sa),Ko(new Gi("firestore",(n,{instanceIdentifier:i,options:o})=>{const a=n.getProvider("app").getImmediate(),s=new Zs(new c8(n.getProvider("auth-internal")),new p8(n.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ds(l.options.projectId,f)}(a,i),a);return o=Object.assign({useFetchStreams:r},o),s._setSettings(o),s},"PUBLIC").setMultipleInstances(!0)),si(bg,"4.7.3",e),si(bg,"4.7.3","esm2017")})();var pO="firebase",vO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si(pO,vO,"app");function E1(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Xw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gO=Xw,Kw=new Ws("auth","Firebase",Xw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new j0("@firebase/auth");function yO(t,...e){sc.logLevel<=pe.WARN&&sc.warn(`Auth (${sa}): ${t}`,...e)}function vl(t,...e){sc.logLevel<=pe.ERROR&&sc.error(`Auth (${sa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t,...e){throw A1(t,...e)}function Jr(t,...e){return A1(t,...e)}function qw(t,e,r){const n=Object.assign(Object.assign({},gO()),{[e]:r});return new Ws("auth","Firebase",n).create(e,{appName:t.name})}function mn(t){return qw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function A1(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Kw.create(t,...e)}function te(t,e,...r){if(!t)throw A1(e,...r)}function dn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vl(e),new Error(e)}function Sn(t,e){t||dn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mO(){return vy()==="http:"||vy()==="https:"}function vy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mO()||zT()||"connection"in navigator)?navigator.onLine:!0}function wO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,r){this.shortDelay=e,this.longDelay=r,Sn(r>e,"Short delay should be less than long delay!"),this.isMobile=VT()||HT()}get(){return _O()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t,e){Sn(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=new Js(3e4,6e4);function mi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _i(t,e,r,n,i={}){return Qw(t,i,async()=>{let o={},a={};n&&(e==="GET"?a=n:o={body:JSON.stringify(n)});const s=Gs(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:u},o);return jT()||(l.referrerPolicy="no-referrer"),Yw.fetch()(Zw(t,t.config.apiHost,r,s),l)})}async function Qw(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},xO),e);try{const i=new IO(t),o=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Ku(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const s=o.ok?a.errorMessage:a.error.message,[u,l]=s.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ku(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Ku(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Ku(t,"user-disabled",a);const f=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw qw(t,f,l);zr(t,f)}}catch(i){if(i instanceof Rn)throw i;zr(t,"network-request-failed",{message:String(i)})}}async function eu(t,e,r,n,i={}){const o=await _i(t,e,r,n,i);return"mfaPendingCredential"in o&&zr(t,"multi-factor-auth-required",{_serverResponse:o}),o}function Zw(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?I1(t.config,i):`${t.config.apiScheme}://${i}`}function AO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IO{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Jr(this.auth,"network-request-failed")),EO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ku(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Jr(t,e,n);return i.customData._tokenResponse=r,i}function gy(t){return t!==void 0&&t.enterprise!==void 0}class CO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return AO(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function SO(t,e){return _i(t,"GET","/v2/recaptchaConfig",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(t,e){return _i(t,"POST","/v1/accounts:delete",e)}async function Jw(t,e){return _i(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RO(t,e=!1){const r=ur(t),n=await r.getIdToken(e),i=C1(n);te(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:n,authTime:cs(ch(i.auth_time)),issuedAtTime:cs(ch(i.iat)),expirationTime:cs(ch(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ch(t){return Number(t)*1e3}function C1(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return vl("JWT malformed, contained fewer than 3 sections"),null;try{const i=p2(r);return i?JSON.parse(i):(vl("Failed to decode base64 JWT payload"),null)}catch(i){return vl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yy(t){const e=C1(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Rn&&OO(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function OO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=cs(this.lastLoginAt),this.creationTime=cs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Ms(t,Jw(r,{idToken:n}));te(i==null?void 0:i.users.length,r,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ex(o.providerUserInfo):[],s=NO(t.providerData,a),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(s!=null&&s.length),f=u?l:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Md(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function DO(t){const e=ur(t);await uc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NO(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function ex(t){return t.map(e=>{var{providerId:r}=e,n=E1(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e){const r=await Qw(t,{},async()=>{const n=Gs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,a=Zw(t,i,"/v1/token",`key=${o}`),s=await t._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Yw.fetch()(a,{method:"POST",headers:s,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function kO(t,e){return _i(t,"POST","/v2/accounts:revokeToken",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){te(e.length!==0,"internal-error");const r=yy(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:o}=await bO(e,r);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:o}=r,a=new Lo;return n&&(te(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(te(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(te(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return dn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pn{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,o=E1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Md(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const r=await Ms(this,this.stsTokenManager.getToken(this.auth,e));return te(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return RO(this,e)}reload(){return DO(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new pn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await uc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xr(this.auth.app))return Promise.reject(mn(this.auth));const e=await this.getIdToken();return await Ms(this,TO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,o,a,s,u,l,f;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,d=(i=r.email)!==null&&i!==void 0?i:void 0,p=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,g=(a=r.photoURL)!==null&&a!==void 0?a:void 0,w=(s=r.tenantId)!==null&&s!==void 0?s:void 0,I=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,_=(l=r.createdAt)!==null&&l!==void 0?l:void 0,m=(f=r.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:x,emailVerified:P,isAnonymous:k,providerData:M,stsTokenManager:A}=r;te(x&&A,e,"internal-error");const E=Lo.fromJSON(this.name,A);te(typeof x=="string",e,"internal-error"),Mn(h,e.name),Mn(d,e.name),te(typeof P=="boolean",e,"internal-error"),te(typeof k=="boolean",e,"internal-error"),Mn(p,e.name),Mn(g,e.name),Mn(w,e.name),Mn(I,e.name),Mn(_,e.name),Mn(m,e.name);const S=new pn({uid:x,auth:e,email:d,emailVerified:P,displayName:h,isAnonymous:k,photoURL:g,phoneNumber:p,tenantId:w,stsTokenManager:E,createdAt:_,lastLoginAt:m});return M&&Array.isArray(M)&&(S.providerData=M.map(R=>Object.assign({},R))),I&&(S._redirectEventId=I),S}static async _fromIdTokenResponse(e,r,n=!1){const i=new Lo;i.updateFromServerResponse(r);const o=new pn({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await uc(o),o}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];te(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?ex(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),s=new Lo;s.updateFromIdToken(n);const u=new pn({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:a}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Md(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=new Map;function vn(t){Sn(t instanceof Function,"Expected a class definition");let e=my.get(t);return e?(Sn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,my.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}tx.type="NONE";const _y=tx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t,e,r){return`firebase:${t}:${e}:${r}`}class Fo{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=gl(this.userKey,i.apiKey,o),this.fullPersistenceKey=gl("persistence",i.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?pn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Fo(vn(_y),e,n);const i=(await Promise.all(r.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let o=i[0]||vn(_y);const a=gl(n,e.config.apiKey,e.name);let s=null;for(const l of r)try{const f=await l._get(a);if(f){const h=pn._fromJSON(e,f);l!==o&&(s=h),o=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Fo(o,e,n):(o=u[0],s&&await o._set(a,s.toJSON()),await Promise.all(r.map(async l=>{if(l!==o)try{await l._remove(a)}catch{}})),new Fo(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ox(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sx(e))return"Blackberry";if(ux(e))return"Webos";if(nx(e))return"Safari";if((e.includes("chrome/")||ix(e))&&!e.includes("edge/"))return"Chrome";if(ax(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function rx(t=zt()){return/firefox\//i.test(t)}function nx(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ix(t=zt()){return/crios\//i.test(t)}function ox(t=zt()){return/iemobile/i.test(t)}function ax(t=zt()){return/android/i.test(t)}function sx(t=zt()){return/blackberry/i.test(t)}function ux(t=zt()){return/webos/i.test(t)}function S1(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MO(t=zt()){var e;return S1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LO(){return WT()&&document.documentMode===10}function lx(t=zt()){return S1(t)||ax(t)||ux(t)||sx(t)||/windows phone/i.test(t)||ox(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t,e=[]){let r;switch(t){case"Browser":r=wy(zt());break;case"Worker":r=`${wy(zt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${sa}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=o=>new Promise((a,s)=>{try{const u=e(o);a(u)}catch(u){s(u)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(t,e={}){return _i(t,"GET","/v2/passwordPolicy",mi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=6;class UO{constructor(e){var r,n,i,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:VO,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,o,a,s;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(s=u.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xy(this),this.idTokenSubscription=new xy(this),this.beforeStateQueue=new FO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=vn(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Fo.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Jw(this,{idToken:e}),n=await pn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Xr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,s=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===s)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await uc(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xr(this.app))return Promise.reject(mn(this));const r=e?ur(e):null;return r&&te(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xr(this.app)?Promise.reject(mn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xr(this.app)?Promise.reject(mn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BO(this),r=new UO(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ws("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await kO(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&vn(e)||this._popupRedirectResolver;te(r,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[vn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(s,this,"internal-error"),s.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,i);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&yO(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function to(t){return ur(t)}class xy{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZT(r=>this.observer=r)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zO(t){Wc=t}function fx(t){return Wc.loadJS(t)}function HO(){return Wc.recaptchaEnterpriseScript}function WO(){return Wc.gapiScript}function GO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const $O="recaptcha-enterprise",XO="NO_RECAPTCHA";class KO{constructor(e){this.type=$O,this.auth=to(e)}async verify(e="verify",r=!1){async function n(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,s)=>{SO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const l=new CO(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,a(l.siteKey)}}).catch(u=>{s(u)})})}function i(o,a,s){const u=window.grecaptcha;gy(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{a(l)}).catch(()=>{a(XO)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{n(this.auth).then(s=>{if(!r&&gy(window.grecaptcha))i(s,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=HO();u.length!==0&&(u+=s),fx(u).then(()=>{i(s,o,a)}).catch(l=>{a(l)})}}).catch(s=>{a(s)})})}}async function Ey(t,e,r,n=!1){const i=new KO(t);let o;try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ld(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ey(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Ey(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t,e){const r=H0(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),o=r.getOptions();if(Yl(o,e??{}))return i;zr(i,"already-initialized")}return r.initialize({options:e})}function YO(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function QO(t,e,r){const n=to(t);te(n._canInitEmulator,n,"emulator-config-failed"),te(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,o=hx(e),{host:a,port:s}=ZO(e),u=s===null?"":`:${s}`;n.config.emulator={url:`${o}//${a}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),JO()}function hx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZO(t){const e=hx(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const o=i[1];return{host:o,port:Ay(n.substr(o.length+1))}}else{const[o,a]=n.split(":");return{host:o,port:Ay(a)}}}function Ay(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function JO(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return dn("not implemented")}_getIdTokenResponse(e){return dn("not implemented")}_linkToIdToken(e,r){return dn("not implemented")}_getReauthenticationResolver(e){return dn("not implemented")}}async function eP(t,e){return _i(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(t,e){return eu(t,"POST","/v1/accounts:signInWithPassword",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(t,e){return eu(t,"POST","/v1/accounts:signInWithEmailLink",mi(t,e))}async function nP(t,e){return eu(t,"POST","/v1/accounts:signInWithEmailLink",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends T1{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new Ls(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Ls(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ld(e,r,"signInWithPassword",tP);case"emailLink":return rP(e,{email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ld(e,n,"signUpPassword",eP);case"emailLink":return nP(e,{idToken:r,email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t,e){return eu(t,"POST","/v1/accounts:signInWithIdp",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="http://localhost";class qi extends T1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new qi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):zr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,o=E1(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new qi(n,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Bo(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Bo(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Bo(e,r)}buildRequest(){const e={requestUri:iP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Gs(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aP(t){const e=Ga($a(t)).link,r=e?Ga($a(e)).deep_link_id:null,n=Ga($a(t)).deep_link_id;return(n?Ga($a(n)).link:null)||n||r||e||t}class R1{constructor(e){var r,n,i,o,a,s;const u=Ga($a(e)),l=(r=u.apiKey)!==null&&r!==void 0?r:null,f=(n=u.oobCode)!==null&&n!==void 0?n:null,h=oP((i=u.mode)!==null&&i!==void 0?i:null);te(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(s=u.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const r=aP(e);try{return new R1(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.providerId=ha.PROVIDER_ID}static credential(e,r){return Ls._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=R1.parseLink(r);return te(n,"argument-error"),Ls._fromEmailAndCode(e,n.code,n.tenantId)}}ha.PROVIDER_ID="password";ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends dx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends tu{constructor(){super("facebook.com")}static credential(e){return qi._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jn.credential(e.oauthAccessToken)}catch{return null}}}jn.FACEBOOK_SIGN_IN_METHOD="facebook.com";jn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return qi._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return zn.credential(r,n)}catch{return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com";zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends tu{constructor(){super("github.com")}static credential(e){return qi._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hn.credential(e.oauthAccessToken)}catch{return null}}}Hn.GITHUB_SIGN_IN_METHOD="github.com";Hn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends tu{constructor(){super("twitter.com")}static credential(e,r){return qi._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Wn.credential(r,n)}catch{return null}}}Wn.TWITTER_SIGN_IN_METHOD="twitter.com";Wn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(t,e){return eu(t,"POST","/v1/accounts:signUp",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const o=await pn._fromIdTokenResponse(e,n,i),a=Iy(n);return new Yi({user:o,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=Iy(n);return new Yi({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function Iy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends Rn{constructor(e,r,n,i){var o;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,lc.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new lc(e,r,n,i)}}function px(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lc._fromErrorAndOperation(t,o,e,n):o})}async function uP(t,e,r=!1){const n=await Ms(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Yi._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(t,e,r=!1){const{auth:n}=t;if(Xr(n.app))return Promise.reject(mn(n));const i="reauthenticate";try{const o=await Ms(t,px(n,i,e,t),r);te(o.idToken,n,"internal-error");const a=C1(o.idToken);te(a,n,"internal-error");const{sub:s}=a;return te(t.uid===s,n,"user-mismatch"),Yi._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&zr(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vx(t,e,r=!1){if(Xr(t.app))return Promise.reject(mn(t));const n="signIn",i=await px(t,n,e),o=await Yi._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(o.user),o}async function cP(t,e){return vx(to(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(t){const e=to(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fP(t,e,r){if(Xr(t.app))return Promise.reject(mn(t));const n=to(t),a=await Ld(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&gx(t),u}),s=await Yi._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(s.user),s}function hP(t,e,r){return Xr(t.app)?Promise.reject(mn(t)):cP(ur(t),ha.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&gx(t),n})}function dP(t,e,r,n){return ur(t).onIdTokenChanged(e,r,n)}function pP(t,e,r){return ur(t).beforeAuthStateChanged(e,r)}function vP(t,e,r,n){return ur(t).onAuthStateChanged(e,r,n)}function Fd(t){return ur(t).signOut()}const cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(cc,"1"),this.storage.removeItem(cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=1e3,yP=10;class mx extends yx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,s,u)=>{this.notifyListeners(a,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},o=this.storage.getItem(n);LO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,yP):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},gP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}mx.type="LOCAL";const mP=mx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x extends yx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}_x.type="SESSION";const wx=_x;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Gc(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:o}=r.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const s=Array.from(a).map(async l=>l(r.origin,o)),u=await _P(s);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((s,u)=>{const l=O1("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),s(d.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return window}function xP(t){en().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(){return typeof en().WorkerGlobalScope<"u"&&typeof en().importScripts=="function"}async function EP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function IP(){return xx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="firebaseLocalStorageDb",CP=1,fc="firebaseLocalStorage",Ax="fbase_key";class ru{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function $c(t,e){return t.transaction([fc],e?"readwrite":"readonly").objectStore(fc)}function SP(){const t=indexedDB.deleteDatabase(Ex);return new ru(t).toPromise()}function Bd(){const t=indexedDB.open(Ex,CP);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(fc,{keyPath:Ax})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(fc)?e(n):(n.close(),await SP(),e(await Bd()))})})}async function Cy(t,e,r){const n=$c(t,!0).put({[Ax]:e,value:r});return new ru(n).toPromise()}async function TP(t,e){const r=$c(t,!1).get(e),n=await new ru(r).toPromise();return n===void 0?null:n.value}function Sy(t,e){const r=$c(t,!0).delete(e);return new ru(r).toPromise()}const RP=800,OP=3;class Ix{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bd(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>OP)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gc._getInstance(IP()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await EP(),!this.activeServiceWorker)return;this.sender=new wP(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bd();return await Cy(e,cc,"1"),await Sy(e,cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cy(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>TP(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Sy(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=$c(i,!1).getAll();return new ru(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ix.type="LOCAL";const PP=Ix;new Js(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t,e){return e?vn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1 extends T1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Bo(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function NP(t){return vx(t.auth,new P1(t),t.bypassAuthState)}function bP(t){const{auth:e,user:r}=t;return te(r,e,"internal-error"),lP(r,new P1(t),t.bypassAuthState)}async function kP(t){const{auth:e,user:r}=t;return te(r,e,"internal-error"),uP(r,new P1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,r,n,i,o=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:o,error:a,type:s}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NP;case"linkViaPopup":case"linkViaRedirect":return kP;case"reauthViaPopup":case"reauthViaRedirect":return bP;default:zr(this.auth,"internal-error")}}resolve(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=new Js(2e3,1e4);class Ro extends Cx{constructor(e,r,n,i,o){super(e,r,i,o),this.provider=n,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Sn(this.filter.length===1,"Popup operations only handle one event");const e=O1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MP.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="pendingRedirect",yl=new Map;class FP extends Cx{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=yl.get(this.auth._key());if(!e){try{const n=await BP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}yl.set(this.auth._key(),e)}return this.bypassAuthState||yl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BP(t,e){const r=jP(e),n=UP(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function VP(t,e){yl.set(t._key(),e)}function UP(t){return vn(t._redirectPersistence)}function jP(t){return gl(LP,t.config.apiKey,t.name)}async function zP(t,e,r=!1){if(Xr(t.app))return Promise.reject(mn(t));const n=to(t),i=DP(n,e),a=await new FP(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=10*60*1e3;class WP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GP(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!Sx(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Jr(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ty(e))}saveEventToCache(e){this.cachedEventUids.add(Ty(e)),this.lastProcessedEventTime=Date.now()}}function Ty(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Sx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(t,e={}){return _i(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KP=/^https?/;async function qP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $P(t);for(const r of e)try{if(YP(r))return}catch{}zr(t,"unauthorized-domain")}function YP(t){const e=kd(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!KP.test(r))return!1;if(XP.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=new Js(3e4,6e4);function Ry(){const t=en().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function ZP(t){return new Promise((e,r)=>{var n,i,o;function a(){Ry(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ry(),r(Jr(t,"network-request-failed"))},timeout:QP.get()})}if(!((i=(n=en().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=en().gapi)===null||o===void 0)&&o.load)a();else{const s=GO("iframefcb");return en()[s]=()=>{gapi.load?a():r(Jr(t,"network-request-failed"))},fx(`${WO()}?onload=${s}`).catch(u=>r(u))}}).catch(e=>{throw ml=null,e})}let ml=null;function JP(t){return ml=ml||ZP(t),ml}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new Js(5e3,15e3),tD="__/auth/iframe",rD="emulator/auth/iframe",nD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oD(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?I1(e,rD):`https://${t.config.authDomain}/${tD}`,n={apiKey:e.apiKey,appName:t.name,v:sa},i=iD.get(t.config.apiHost);i&&(n.eid=i);const o=t._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${Gs(n).slice(1)}`}async function aD(t){const e=await JP(t),r=en().gapi;return te(r,t,"internal-error"),e.open({where:document.body,url:oD(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nD,dontclear:!0},n=>new Promise(async(i,o)=>{await n.restyle({setHideOnLeave:!1});const a=Jr(t,"network-request-failed"),s=en().setTimeout(()=>{o(a)},eD.get());function u(){en().clearTimeout(s),i(n)}n.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uD=500,lD=600,cD="_blank",fD="http://localhost";class Oy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hD(t,e,r,n=uD,i=lD){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let s="";const u=Object.assign(Object.assign({},sD),{width:n.toString(),height:i.toString(),top:o,left:a}),l=zt().toLowerCase();r&&(s=ix(l)?cD:r),rx(l)&&(e=e||fD,u.scrollbars="yes");const f=Object.entries(u).reduce((d,[p,g])=>`${d}${p}=${g},`,"");if(MO(l)&&s!=="_self")return dD(e||"",s),new Oy(null);const h=window.open(e||"",s,f);te(h,t,"popup-blocked");try{h.focus()}catch{}return new Oy(h)}function dD(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="__/auth/handler",vD="emulator/auth/handler",gD=encodeURIComponent("fac");async function Py(t,e,r,n,i,o){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:sa,eventId:i};if(e instanceof dx){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",QT(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))a[f]=h}if(e instanceof tu){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const s=a;for(const f of Object.keys(s))s[f]===void 0&&delete s[f];const u=await t._getAppCheckToken(),l=u?`#${gD}=${encodeURIComponent(u)}`:"";return`${yD(t)}?${Gs(s).slice(1)}${l}`}function yD({config:t}){return t.emulator?I1(t,vD):`https://${t.authDomain}/${pD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="webStorageSupport";class mD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wx,this._completeRedirectFn=zP,this._overrideRedirectResult=VP}async _openPopup(e,r,n,i){var o;Sn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await Py(e,r,n,kd(),i);return hD(e,a,O1())}async _openRedirect(e,r,n,i){await this._originValidation(e);const o=await Py(e,r,n,kd(),i);return xP(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:o}=this.eventManagers[r];return i?Promise.resolve(i):(Sn(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await aD(e),n=new WP(e);return r.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(fh,{type:fh},i=>{var o;const a=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[fh];a!==void 0&&r(!!a),zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=qP(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return lx()||nx()||S1()}}const _D=mD;var Dy="@firebase/auth",Ny="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ED(t){Ko(new Gi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=n.options;te(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cx(t)},l=new jO(n,i,o,u);return YO(l,r),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ko(new Gi("auth-internal",e=>{const r=to(e.getProvider("auth").getImmediate());return(n=>new wD(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),si(Dy,Ny,xD(t)),si(Dy,Ny,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=5*60,ID=y2("authIdTokenMaxAge")||AD;let by=null;const CD=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>ID)return;const i=r==null?void 0:r.token;by!==i&&(by=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function SD(t=x2()){const e=H0(t,"auth");if(e.isInitialized())return e.getImmediate();const r=qO(t,{popupRedirectResolver:_D,persistence:[PP,mP,wx]}),n=y2("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const a=CD(o.toString());pP(r,a,()=>a(r.currentUser)),dP(r,s=>a(s))}}const i=v2("auth");return i&&QO(r,`http://${i}`),r}function TD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}zO({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const o=Jr("internal-error");o.customData=i,r(o)},n.type="text/javascript",n.charset="UTF-8",TD().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ED("Browser");const RD={apiKey:"AIzaSyCv0zpv-wM6dx5uHcgco_O7D4S_NE024wE",authDomain:"biblioteca-scott.firebaseapp.com",projectId:"biblioteca-scott",storageBucket:"biblioteca-scott.firebasestorage.app",messagingSenderId:"1006522361048",appId:"1:1006522361048:web:e5bec210732c768f0ee3ad"},Tx=w2(RD),Vo=SD(Tx),Xc=K6(Tx),nu="biblioteca-scott";function OD(){return X6(Xc,"libraries",nu,"books")}function Rx(){return v1(Xc,"libraries",nu,"meta","settings")}function PD(){return Math.random().toString(16).slice(2)+"-"+Date.now().toString(16)}async function Kc(){const e=(await fO(OD())).docs.map(r=>({id:r.id,...r.data()}));return e.sort((r,n)=>(r.authorLast||"").localeCompare(n.authorLast||"","it")||(r.title||"").localeCompare(n.title||"","it")),e}async function Ox(t){const e=v1(Xc,"libraries",nu,"books",t.id);await x1(e,t,{merge:!0})}async function D1(t){const e=v1(Xc,"libraries",nu,"books",t);await hO(e)}async function Px(){const t=Rx(),e=await cO(t);if(!e.exists()){const i=["salone","camera matrimoniale","camera Niki","camera Francesco","camera Cecilia","studio"];return await x1(t,{locations:i},{merge:!0}),i}const r=e.data(),n=Array.isArray(r.locations)?r.locations:[];return n.length?n:["salone"]}async function N1(t){const e=Rx();await x1(e,{locations:t},{merge:!0})}async function DD(){const t=await Kc(),e=await Px();return{version:2,exportedAt:Date.now(),libraryId:nu,locations:e,books:t}}async function ND(t,{mode:e="merge"}={}){const r=(t==null?void 0:t.books)||[],n=(t==null?void 0:t.locations)||[];if(n.length&&await N1(n),e==="replace"){const i=await Kc();for(const o of i)await D1(o.id)}for(const i of r)i.id&&await Ox(i)}async function bD(){const t=await Kc();for(const e of t)await D1(e.id);await N1(["salone","camera matrimoniale","camera Niki","camera Francesco","camera Cecilia","studio"])}const Vd=["paolodandrea27@gmail.com","niccolodonatodandrea@gmail.com"];function Bt(t){return(t||"").toString().trim()}function Si(t){return Bt(t).toLowerCase()}function kD(t,e){if(!e)return!0;const r=Si(e);return Si(t.title).includes(r)||Si(t.authorLast).includes(r)||Si(t.authorFirst).includes(r)||Si(t.location).includes(r)||Si(t.archive).includes(r)||Si(t.isbn).includes(r)}function MD(t){const e=Bt(t);if(!e)return{last:"",first:""};if(e.includes(",")){const[n,i]=e.split(",").map(o=>Bt(o));return{last:n,first:i}}const r=e.split(/\s+/).filter(Boolean);return r.length===1?{last:r[0],first:""}:{last:r[r.length-1],first:r.slice(0,-1).join(" ")}}function Kn(t){const e=Bt(t).replace(/[^0-9Xx]/g,"").toUpperCase();return e.length>13?e.slice(0,13):e}function LD(t){const e=Kn(t);return e.length===10||e.length===13}function FD(){return typeof window<"u"&&"BarcodeDetector"in window}function BD(t){var r;return((r=t.find(n=>/back|rear|environment/i.test(n.label||""))||t[0]||null)==null?void 0:r.deviceId)||void 0}async function VD(){const t={width:{ideal:1280},height:{ideal:720}};try{return await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},...t},audio:!1})}catch{}try{const e=(await navigator.mediaDevices.enumerateDevices()).filter(n=>n.kind==="videoinput"),r=BD(e);if(r)return await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:r},...t},audio:!1})}catch{}return await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}async function UD(t){var e,r;try{const n=((e=t.getCapabilities)==null?void 0:e.call(t))||{},i=((r=t.getSettings)==null?void 0:r.call(t))||{},o=[];if(n.focusMode&&Array.isArray(n.focusMode)&&(n.focusMode.includes("continuous")?o.push({focusMode:"continuous"}):n.focusMode.includes("auto")&&o.push({focusMode:"auto"})),n.zoom){const a=n.zoom.min??1,s=n.zoom.max??1,u=Math.min(Math.max(1.2,a),s);u!==(i.zoom??1)&&o.push({zoom:u})}o.length&&await t.applyConstraints({advanced:o})}catch{}}function jD({onDetected:t,onClose:e}){const r=ie.useRef(null),n=ie.useRef(null),i=ie.useRef(!1),o=ie.useRef({value:"",hits:0}),[a,s]=ie.useState("Avvio fotocamera"),[u,l]=ie.useState("");return ie.useEffect(()=>{i.current=!1;async function f(){l(""),s("Cerco la fotocamera");let h;try{h=await VD(),n.current=h;const d=r.current;if(!d)return;d.srcObject=h;const[p]=h.getVideoTracks();if(await UD(p),await d.play(),s("Inquadra il codice a barre ISBN (EAN-13 978/979)"),FD()){const I=new window.BarcodeDetector({formats:["ean_13"]}),_=document.createElement("canvas"),m=_.getContext("2d",{willReadFrequently:!0}),x=async()=>{if(!i.current){try{const P=d.videoWidth||0,k=d.videoHeight||0;if(P&&k){_.width=P,_.height=k,m.drawImage(d,0,0,P,k);const M=Math.floor(P*.1),A=Math.floor(k*.55),E=Math.floor(P*.8),S=Math.floor(k*.3),R=m.getImageData(M,A,E,S),D=R.data;for(let O=0;O<D.length;O+=4){const Ue=(D[O]*.299+D[O+1]*.587+D[O+2]*.114|0)>160?255:0;D[O]=D[O+1]=D[O+2]=Ue}m.putImageData(R,M,A);const N=await I.detect(_);if(N&&N.length){const O=N[0].rawValue||"",fe=Kn(O);if(fe){const Ue=o.current;if(Ue.value===fe?Ue.hits+=1:o.current={value:fe,hits:1},o.current.hits>=2){t(fe);return}}}}}catch{}setTimeout(x,120)}};x();return}const g=new ST,w=async()=>{var I;if(!i.current){try{const _=await g.decodeOnceFromVideoElement(d),m=Kn(((I=_==null?void 0:_.getText)==null?void 0:I.call(_))||(_==null?void 0:_.text)||"");if(m){const x=o.current;if(x.value===m?x.hits+=1:o.current={value:m,hits:1},o.current.hits>=2){t(m);return}}}catch(_){_ instanceof V}setTimeout(w,120)}};w()}catch(d){console.error("CAMERA ERROR:",d),l(`Errore camera: ${(d==null?void 0:d.name)||"Unknown"}  ${(d==null?void 0:d.message)||""}`),s("")}}return f(),()=>{i.current=!0;try{const h=n.current;h&&h.getTracks().forEach(d=>d.stop())}catch{}}},[t]),b.jsxs("div",{style:{...U.card,display:"grid",gap:10},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},children:[b.jsx("div",{style:{fontWeight:900},children:"Scanner ISBN"}),b.jsx("button",{style:U.btn,onClick:e,children:"Chiudi"})]}),b.jsx("div",{style:U.small,children:"Consigli: avvicina il codice, evita riflessi, tieni fermo 12 secondi."}),b.jsxs("div",{style:{position:"relative",width:"100%",aspectRatio:"16/9",borderRadius:16,overflow:"hidden",border:"1px solid #eee"},children:[b.jsx("video",{ref:r,playsInline:!0,muted:!0,style:{width:"100%",height:"100%",objectFit:"cover"}}),b.jsx("div",{style:{position:"absolute",left:"10%",top:"55%",width:"80%",height:"30%",border:"2px solid rgba(255,255,255,0.85)",borderRadius:12,boxShadow:"0 0 0 9999px rgba(0,0,0,0.20) inset"}})]}),a?b.jsxs("div",{style:U.small,children:["Stato: ",a]}):null,u?b.jsx("div",{style:{...U.small,color:"#b00020"},children:u}):null]})}async function ky({isbn:t,title:e,author:r}){let n="";const i=Kn(t||"");if(LD(i)?n=`isbn:${i}`:n=[Bt(e),Bt(r)].filter(Boolean).join(" "),!n)return[];const o=`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(n)}&maxResults=5`,a=await fetch(o);if(!a.ok)return[];const s=await a.json();return(Array.isArray(s.items)?s.items:[]).map(l=>{var I,_,m,x;const f=l.volumeInfo||{},h=Array.isArray(f.authors)?f.authors.join(", "):"",{last:d,first:p}=MD(((I=f.authors)==null?void 0:I[0])||h),g=((_=f.imageLinks)==null?void 0:_.thumbnail)||((m=f.imageLinks)==null?void 0:m.smallThumbnail)||"",w=((x=(f.industryIdentifiers||[]).find(P=>P.type==="ISBN_13"))==null?void 0:x.identifier)||"";return{id:l.id,title:f.title||"",authorLast:d,authorFirst:p,publishedDate:f.publishedDate||"",publisher:f.publisher||"",isbn:w||i,coverUrl:g}})}function zD(t){return new Promise(e=>{const r=new FileReader;r.onload=()=>e(String(r.result||"")),r.readAsDataURL(t)})}async function HD(t,e=900,r=.78){const n=t instanceof Blob?t:new Blob([t]),i=document.createElement("img"),o=URL.createObjectURL(n);i.src=o,await new Promise((p,g)=>{i.onload=p,i.onerror=g});const a=i.naturalWidth||i.width,s=i.naturalHeight||i.height,u=Math.min(1,e/Math.max(a,s)),l=Math.round(a*u),f=Math.round(s*u),h=document.createElement("canvas");return h.width=l,h.height=f,h.getContext("2d").drawImage(i,0,0,l,f),URL.revokeObjectURL(o),await new Promise(p=>h.toBlob(g=>p(g),"image/jpeg",r))}function WD(){const[t,e]=ie.useState("login"),[r,n]=ie.useState(""),[i,o]=ie.useState(""),[a,s]=ie.useState(""),u=h=>Vd.map(d=>d.toLowerCase()).includes((h||"").toLowerCase());async function l(){s("Accesso in corso");try{const h=await hP(Vo,Bt(r),i);if(!u(h.user.email)){await Fd(Vo),s("Questa email non  abilitata.");return}s("")}catch{s("Login fallito. Controlla email/password.")}}async function f(){const h=Bt(r).toLowerCase();if(!u(h)){s("Questa email non  nella lista abilitata.");return}s("Creo account");try{await fP(Vo,h,i),s("")}catch{s("Registrazione fallita (password min 6, o email gi usata).")}}return b.jsx("div",{style:U.app,children:b.jsxs("div",{style:{...U.card,maxWidth:520,margin:"40px auto",display:"grid",gap:10},children:[b.jsx("h1",{style:U.h1,children:"Biblioteca Scott"}),b.jsxs("div",{style:U.small,children:["Login famiglia (email+password). Email abilitate: ",Vd.join(", ")]}),b.jsxs("div",{style:{display:"flex",gap:10},children:[b.jsx("button",{style:t==="login"?U.btnPrimary:U.btn,onClick:()=>e("login"),children:"Login"}),b.jsx("button",{style:t==="signup"?U.btnPrimary:U.btn,onClick:()=>e("signup"),children:"Crea account"})]}),b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"Email"}),b.jsx("input",{style:U.input,value:r,onChange:h=>n(h.target.value)})]}),b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"Password"}),b.jsx("input",{type:"password",style:U.input,value:i,onChange:h=>o(h.target.value)})]}),t==="login"?b.jsx("button",{style:U.btnPrimary,onClick:l,children:"Entra"}):b.jsx("button",{style:U.btnPrimary,onClick:f,children:"Crea account"}),a?b.jsxs("div",{style:U.small,children:["Stato: ",a]}):null]})})}function GD({userEmail:t,onAdd:e,onLocations:r,onBackup:n,onLogout:i}){return b.jsxs("div",{style:U.topbar,children:[b.jsxs("div",{style:{flex:1},children:[b.jsx("h1",{style:U.h1,children:"Biblioteca Scott"}),b.jsxs("div",{style:U.small,children:["Utente: ",t]})]}),b.jsx("button",{style:U.btn,onClick:r,children:"Location"}),b.jsx("button",{style:U.btn,onClick:n,children:"Backup"}),b.jsx("button",{style:U.btn,onClick:i,children:"Logout"}),b.jsx("button",{style:U.btnPrimary,onClick:e,children:"+ Aggiungi"})]})}function $D({b:t,onOpen:e}){const r=t.personalCoverDataUrl||"",n=t.catalogCoverUrl||"";return b.jsx("div",{style:U.card,onClick:()=>e(t),role:"button",tabIndex:0,children:b.jsxs("div",{style:U.bookRow,children:[b.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[r?b.jsx("img",{alt:"",src:r,style:{...U.cover,width:46,height:64}}):null,n?b.jsx("img",{alt:"",src:n,style:{...U.cover,width:46,height:64}}):null,!r&&!n?b.jsx("div",{style:{...U.cover,width:46,height:64,display:"grid",placeItems:"center",color:"#999"},children:""}):null]}),b.jsxs("div",{children:[b.jsxs("div",{style:{fontWeight:800},children:[t.authorLast||"",t.authorFirst?`, ${t.authorFirst}`:""]}),b.jsx("div",{style:{fontSize:16,fontWeight:800},children:t.title}),b.jsxs("div",{style:U.meta,children:[t.isbn?`ISBN ${t.isbn}  `:"",t.location?` ${t.location}`:"",t.archive?`   ${t.archive}`:""]})]})]})})}function XD({results:t,onPick:e,onCancel:r}){return b.jsxs("div",{style:{...U.card,display:"grid",gap:10},children:[b.jsx("div",{style:{fontWeight:900,fontSize:16},children:"Seleziona il libro (Google Books)"}),b.jsx("div",{style:{display:"grid",gap:10},children:t.map(n=>b.jsx("div",{style:{...U.card,padding:12},onClick:()=>e(n),role:"button",tabIndex:0,children:b.jsxs("div",{style:U.bookRow,children:[b.jsx("img",{alt:"",src:n.coverUrl||"",style:U.cover}),b.jsxs("div",{children:[b.jsxs("div",{style:{fontWeight:800},children:[n.authorLast,n.authorFirst?`, ${n.authorFirst}`:""]}),b.jsx("div",{style:{fontSize:16,fontWeight:800},children:n.title}),b.jsxs("div",{style:U.small,children:[n.publisher?`${n.publisher}  `:"",n.publishedDate||""]}),b.jsx("div",{style:U.small,children:n.isbn?`ISBN: ${n.isbn}`:""})]})]})},n.id))}),b.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:b.jsx("button",{style:U.btn,onClick:r,children:"Annulla"})})]})}function My({mode:t,locations:e,archives:r,initial:n,onCancel:i,onSave:o}){const[a,s]=ie.useState((n==null?void 0:n.authorLast)??""),[u,l]=ie.useState((n==null?void 0:n.authorFirst)??""),[f,h]=ie.useState((n==null?void 0:n.title)??""),[d,p]=ie.useState((n==null?void 0:n.isbn)??""),[g,w]=ie.useState(!1),[I,_]=ie.useState(""),[m,x]=ie.useState((n==null?void 0:n.location)??(e[0]||"")),[P,k]=ie.useState((n==null?void 0:n.archive)??""),[M,A]=ie.useState((n==null?void 0:n.notes)??""),[E,S]=ie.useState((n==null?void 0:n.personalCoverDataUrl)??""),[R,D]=ie.useState((n==null?void 0:n.catalogCoverUrl)??""),[N,O]=ie.useState(null),fe=ie.useRef(null),Ue=ie.useRef(null);async function mr(X){var _r;const he=(_r=X.target.files)==null?void 0:_r[0];if(!he)return;const Oe=await HD(he,900,.78),er=await zD(Oe);S(er)}async function Wt(X){w(!1);const he=Kn(X);if(he){p(he),_("ISBN letto. Cerco su Google Books");const Oe=[u,a].filter(Boolean).join(" "),er=await ky({isbn:he,title:f,author:Oe});if(!er.length){_("ISBN letto, ma Google Books non ha trovato corrispondenze. Puoi riprovare o compilare a mano.");return}O(er),_("")}}async function $(){const X=Kn(d);X&&X!==d&&p(X),_("Cerco su Google Books");const he=[u,a].filter(Boolean).join(" "),Oe=await ky({isbn:X||d,title:f,author:he});if(!Oe.length){_("Nessun risultato.");return}O(Oe),_("")}async function re(X){O(null),h(X.title||""),s(X.authorLast||""),l(X.authorFirst||""),X.isbn&&p(Kn(X.isbn)),X.coverUrl&&D(X.coverUrl),_("Dati compilati da Google Books.")}const oe=Bt(f).length>0;return b.jsxs("div",{style:{display:"grid",gap:10},children:[N?b.jsx(XD,{results:N,onPick:re,onCancel:()=>O(null)}):null,b.jsxs("div",{style:{...U.card,display:"grid",gap:10},children:[b.jsx("div",{style:{fontWeight:900,fontSize:16},children:t==="edit"?"Modifica libro":"Aggiungi libro"}),b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"Cognome autore"}),b.jsx("input",{style:U.input,value:a,onChange:X=>s(X.target.value)})]}),b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"Nome autore"}),b.jsx("input",{style:U.input,value:u,onChange:X=>l(X.target.value)})]})]}),b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"Titolo *"}),b.jsx("input",{style:U.input,value:f,onChange:X=>h(X.target.value)})]}),b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"ISBN (opzionale)"}),b.jsx("input",{style:U.input,value:d,onChange:X=>p(X.target.value),onKeyDown:X=>{X.key==="Enter"&&(X.preventDefault(),$())},placeholder:"978 (Invio per cercare)"}),b.jsx("div",{style:{display:"flex",gap:10,flexWrap:"wrap",marginTop:8},children:b.jsx("button",{style:U.btn,onClick:()=>w(!0),children:" Scanner ISBN"})}),g?b.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.55)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:16},onClick:()=>w(!1),children:b.jsx("div",{style:{width:"min(920px, 100%)",maxHeight:"92vh",overflow:"auto",borderRadius:18,background:"#fff",boxShadow:"0 20px 60px rgba(0,0,0,0.35)"},onClick:X=>X.stopPropagation(),children:b.jsx(jD,{onDetected:Wt,onClose:()=>w(!1)})})}):null,I?b.jsxs("div",{style:U.small,children:["Stato: ",I]}):b.jsx("div",{style:U.small,children:"Puoi cercare anche da titolo/autore (se ISBN vuoto)."})]}),b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"Location"}),b.jsx("select",{style:U.select,value:m,onChange:X=>x(X.target.value),children:e.map(X=>b.jsx("option",{value:X,children:X},X))})]}),b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"Archivio / sub-location"}),b.jsx("input",{style:U.input,value:P,onChange:X=>k(X.target.value),list:"arch-sug"}),b.jsx("datalist",{id:"arch-sug",children:r.map(X=>b.jsx("option",{value:X},X))})]})]}),b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"Note"}),b.jsx("textarea",{style:{...U.input,height:90,resize:"vertical"},value:M,onChange:X=>A(X.target.value)})]}),b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"Copertine (C)"}),b.jsx("div",{style:U.small,children:"Foto personale + Copertina catalogo (puoi eliminare una delle due)."}),b.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[b.jsx("button",{style:U.btnPrimary,onClick:()=>{var X;return(X=Ue.current)==null?void 0:X.click()},children:" Scatta copertina"}),b.jsx("button",{style:U.btn,onClick:()=>{var X;return(X=fe.current)==null?void 0:X.click()},children:" Scegli da galleria"}),b.jsx("button",{style:U.btn,onClick:()=>S(""),disabled:!E,children:" Elimina foto personale"}),b.jsx("button",{style:U.btn,onClick:()=>D(""),disabled:!R,children:" Elimina copertina catalogo"})]}),b.jsx("input",{ref:Ue,type:"file",accept:"image/*",capture:"environment",onChange:mr,style:{display:"none"}}),b.jsx("input",{ref:fe,type:"file",accept:"image/*",onChange:mr,style:{display:"none"}}),b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,marginTop:10},children:[b.jsx("div",{style:{...U.card,padding:10},children:E?b.jsx("img",{alt:"",src:E,style:{width:"100%",borderRadius:12,border:"1px solid #eee",marginTop:8}}):b.jsx("div",{style:U.small,children:"Nessuna."})}),b.jsxs("div",{style:{...U.card,padding:10},children:[b.jsx("div",{style:{fontWeight:800},children:"Copertina catalogo"}),R?b.jsx("img",{alt:"",src:R,style:{width:"100%",borderRadius:12,border:"1px solid #eee",marginTop:8}}):b.jsx("div",{style:U.small,children:"Nessuna (usa Cerca/Compila)."})]})]})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:10},children:[b.jsx("button",{style:U.btn,onClick:i,children:"Annulla"}),b.jsx("button",{style:{...U.btnPrimary,opacity:oe?1:.5},disabled:!oe,onClick:()=>{const X=Date.now();o({...n,authorLast:Bt(a),authorFirst:Bt(u),title:Bt(f),isbn:Kn(d),location:Bt(m),archive:Bt(P),notes:Bt(M),personalCoverDataUrl:E||"",catalogCoverUrl:R||"",createdAt:(n==null?void 0:n.createdAt)??X,updatedAt:X})},children:"Salva"})]})]})]})}function KD({book:t,onBack:e,onEdit:r,onDelete:n}){const i=t.personalCoverDataUrl||"",o=t.catalogCoverUrl||"";return b.jsxs("div",{style:{display:"grid",gap:10},children:[b.jsx("div",{style:U.row,children:b.jsx("span",{style:U.link,onClick:e,children:" Indietro"})}),b.jsxs("div",{style:{...U.card,display:"grid",gap:10},children:[i||o?b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[b.jsxs("div",{style:{...U.card,padding:10},children:[b.jsx("div",{style:{fontWeight:800},children:"Foto personale"}),i?b.jsx("img",{alt:"",src:i,style:{width:"100%",maxHeight:420,objectFit:"contain",borderRadius:12,border:"1px solid #eee",marginTop:8}}):b.jsx("div",{style:U.small,children:"Nessuna."})]}),b.jsxs("div",{style:{...U.card,padding:10},children:[b.jsx("div",{style:{fontWeight:800},children:"Copertina catalogo"}),o?b.jsx("img",{alt:"",src:o,style:{width:"100%",maxHeight:420,objectFit:"contain",borderRadius:12,border:"1px solid #eee",marginTop:8}}):b.jsx("div",{style:U.small,children:"Nessuna."})]})]}):null,b.jsxs("div",{style:{fontSize:20,fontWeight:900},children:[t.authorLast,t.authorFirst?`, ${t.authorFirst}`:""]}),b.jsx("div",{style:{fontSize:18,fontWeight:800},children:t.title}),b.jsxs("div",{style:U.meta,children:[t.isbn?`ISBN: ${t.isbn}  `:"",t.location?` ${t.location}`:"",t.archive?`   ${t.archive}`:""]}),t.notes?b.jsx("div",{style:{whiteSpace:"pre-wrap"},children:t.notes}):b.jsx("div",{style:U.small,children:"Nessuna nota."}),b.jsxs("div",{style:{display:"flex",gap:10},children:[b.jsx("button",{style:U.btnPrimary,onClick:r,children:"Modifica"}),b.jsx("button",{style:U.btn,onClick:n,children:"Elimina"})]})]})]})}function qD({locations:t,onClose:e,onSave:r}){const[n,i]=ie.useState(t),[o,a]=ie.useState("");function s(){const l=Bt(o);!l||n.includes(l)||(i([...n,l]),a(""))}function u(l){i(n.filter(f=>f!==l))}return b.jsxs("div",{style:{display:"grid",gap:10},children:[b.jsx("div",{style:U.row,children:b.jsx("span",{style:U.link,onClick:e,children:" Indietro"})}),b.jsxs("div",{style:{...U.card,display:"grid",gap:10},children:[b.jsx("div",{style:{fontWeight:900,fontSize:16},children:"Gestione Location"}),b.jsxs("div",{style:{display:"flex",gap:10},children:[b.jsx("input",{style:U.input,value:o,onChange:l=>a(l.target.value),placeholder:"Nuova location"}),b.jsx("button",{style:U.btnPrimary,onClick:s,children:"Aggiungi"})]}),b.jsx("div",{style:U.divider}),b.jsx("div",{style:{display:"grid",gap:8},children:n.map(l=>b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},children:[b.jsx("div",{style:{fontWeight:700},children:l}),b.jsx("button",{style:U.btn,onClick:()=>u(l),children:"Rimuovi"})]},l))}),b.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:10},children:[b.jsx("button",{style:U.btn,onClick:e,children:"Annulla"}),b.jsx("button",{style:U.btnPrimary,onClick:()=>r(n),children:"Salva"})]})]})]})}function YD({onClose:t,onDone:e}){const r=ie.useRef(null),[n,i]=ie.useState("");async function o(){i("Creo backup");const u=await DD(),l=new Blob([JSON.stringify(u,null,2)],{type:"application/json"}),f=URL.createObjectURL(l),h=document.createElement("a"),d=new Date().toISOString().slice(0,19).replaceAll(":","-");h.href=f,h.download=`biblioteca-scott-backup-${d}.json`,document.body.appendChild(h),h.click(),h.remove(),URL.revokeObjectURL(f),i("Backup esportato.")}async function a(u){i("Import in corso");const l=await u.text(),f=JSON.parse(l);await ND(f,{mode:"merge"}),i("Import completato."),e==null||e()}async function s(){window.confirm("ATTENZIONE: cancello TUTTO. Continuare?")&&(await bD(),i("Archivio svuotato."),e==null||e())}return b.jsxs("div",{style:{display:"grid",gap:10},children:[b.jsx("div",{style:U.row,children:b.jsx("span",{style:U.link,onClick:t,children:" Indietro"})}),b.jsxs("div",{style:{...U.card,display:"grid",gap:10},children:[b.jsx("div",{style:{fontWeight:900,fontSize:16},children:"Backup"}),b.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[b.jsx("button",{style:U.btnPrimary,onClick:o,children:" Export JSON"}),b.jsx("button",{style:U.btn,onClick:()=>{var u;return(u=r.current)==null?void 0:u.click()},children:" Import JSON"}),b.jsx("button",{style:U.btn,onClick:s,children:" Reset"}),b.jsx("input",{ref:r,type:"file",accept:"application/json",style:{display:"none"},onChange:u=>{var f;const l=(f=u.target.files)==null?void 0:f[0];l&&a(l),u.target.value=""}})]}),n?b.jsxs("div",{style:U.small,children:["Stato: ",n]}):null]})]})}function QD(){const[t,e]=ie.useState(!1),[r,n]=ie.useState(!1),[i,o]=ie.useState(""),[a,s]=ie.useState("library"),[u,l]=ie.useState([]),[f,h]=ie.useState([]),[d,p]=ie.useState(null),[g,w]=ie.useState(""),[I,_]=ie.useState(""),[m,x]=ie.useState("");async function P(){const D=await Px();l(D);const N=await Kc();h(N)}ie.useEffect(()=>{const D=O=>Vd.map(fe=>fe.toLowerCase()).includes((O||"").toLowerCase()),N=vP(Vo,async O=>{if(e(!0),!O){n(!1),o("");return}if(!D(O.email)){await Fd(Vo),n(!1),o("");return}n(!0),o(O.email||""),await P()});return()=>N()},[]);const k=ie.useMemo(()=>{const D=new Set;return f.forEach(N=>{const O=(N.archive||"").trim();O&&D.add(O)}),Array.from(D).sort((N,O)=>N.localeCompare(O,"it"))},[f]),M=ie.useMemo(()=>f.filter(D=>kD(D,g)).filter(D=>I?D.location===I:!0).filter(D=>m?D.archive===m:!0),[f,g,I,m]);async function A(D){const N=Date.now(),O={id:D.id||PD(),authorLast:D.authorLast,authorFirst:D.authorFirst,title:D.title,isbn:D.isbn||"",location:D.location||"",archive:D.archive||"",notes:D.notes||"",personalCoverDataUrl:D.personalCoverDataUrl||"",catalogCoverUrl:D.catalogCoverUrl||"",createdAt:D.createdAt??N,updatedAt:N};await Ox(O),await P(),p(O),s("detail")}async function E(){d&&window.confirm("Eliminare questo libro?")&&(await D1(d.id),p(null),await P(),s("library"))}async function S(D){await N1(D),await P(),s("library")}async function R(){await Fd(Vo),n(!1),o("")}return t?r?b.jsxs("div",{style:U.app,children:[a==="library"&&b.jsxs(b.Fragment,{children:[b.jsx(GD,{userEmail:i,onAdd:()=>{p(null),s("add")},onLocations:()=>s("locations"),onBackup:()=>s("backup"),onLogout:R}),b.jsxs("div",{style:{display:"grid",gap:10},children:[b.jsxs("div",{style:{...U.card,display:"grid",gap:10},children:[b.jsx("input",{style:U.input,placeholder:"Cerca",value:g,onChange:D=>w(D.target.value)}),b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"Location"}),b.jsxs("select",{style:U.select,value:I,onChange:D=>_(D.target.value),children:[b.jsx("option",{value:"",children:"Tutte"}),u.map(D=>b.jsx("option",{value:D,children:D},D))]})]}),b.jsxs("div",{children:[b.jsx("div",{style:U.label,children:"Archivio"}),b.jsxs("select",{style:U.select,value:m,onChange:D=>x(D.target.value),children:[b.jsx("option",{value:"",children:"Tutti"}),k.map(D=>b.jsx("option",{value:D,children:D},D))]})]})]})]}),M.length?b.jsx("div",{style:U.list,children:M.map(D=>b.jsx($D,{b:D,onOpen:N=>{p(N),s("detail")}},D.id))}):b.jsx("div",{style:{...U.card,...U.small},children:"Nessun libro."})]})]}),a==="add"&&b.jsxs(b.Fragment,{children:[b.jsx("div",{style:U.row,children:b.jsx("span",{style:U.link,onClick:()=>s("library"),children:" Indietro"})}),b.jsx("div",{style:{height:10}}),b.jsx(My,{mode:"add",locations:u,archives:k,initial:null,onCancel:()=>s("library"),onSave:A})]}),a==="detail"&&d&&b.jsx(KD,{book:d,onBack:()=>s("library"),onEdit:()=>s("edit"),onDelete:E}),a==="edit"&&d&&b.jsxs(b.Fragment,{children:[b.jsx("div",{style:U.row,children:b.jsx("span",{style:U.link,onClick:()=>s("detail"),children:" Indietro"})}),b.jsx("div",{style:{height:10}}),b.jsx(My,{mode:"edit",locations:u,archives:k,initial:d,onCancel:()=>s("detail"),onSave:A})]}),a==="locations"&&b.jsx(qD,{locations:u,onClose:()=>s("library"),onSave:S}),a==="backup"&&b.jsx(YD,{onClose:()=>s("library"),onDone:P})]}):b.jsx(WD,{}):b.jsx("div",{style:U.app,children:b.jsx("div",{style:U.card,children:"Caricamento"})})}hh.createRoot(document.getElementById("root")).render(b.jsx(IE.StrictMode,{children:b.jsx(QD,{})}));
